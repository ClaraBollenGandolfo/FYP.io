var R_=Object.defineProperty;var l0=n=>{throw TypeError(n)};var L_=(n,e,t)=>e in n?R_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var q=(n,e,t)=>L_(n,typeof e!="symbol"?e+"":e,t),Zp=(n,e,t)=>e.has(n)||l0("Cannot "+t);var l=(n,e,t)=>(Zp(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>e.has(n)?l0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),g=(n,e,t,s)=>(Zp(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),x=(n,e,t)=>(Zp(n,e,"access private method"),t);var Ot=(n,e,t,s)=>({set _(i){g(n,e,i,t)},get _(){return l(n,e,s)}});function M_(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function I_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yw={exports:{}},_p={},Kw={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id=Symbol.for("react.element"),D_=Symbol.for("react.portal"),F_=Symbol.for("react.fragment"),O_=Symbol.for("react.strict_mode"),j_=Symbol.for("react.profiler"),z_=Symbol.for("react.provider"),B_=Symbol.for("react.context"),H_=Symbol.for("react.forward_ref"),U_=Symbol.for("react.suspense"),$_=Symbol.for("react.memo"),V_=Symbol.for("react.lazy"),c0=Symbol.iterator;function W_(n){return n===null||typeof n!="object"?null:(n=c0&&n[c0]||n["@@iterator"],typeof n=="function"?n:null)}var Qw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jw=Object.assign,Zw={};function mc(n,e,t){this.props=n,this.context=e,this.refs=Zw,this.updater=t||Qw}mc.prototype.isReactComponent={};mc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};mc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function eA(){}eA.prototype=mc.prototype;function Gy(n,e,t){this.props=n,this.context=e,this.refs=Zw,this.updater=t||Qw}var Xy=Gy.prototype=new eA;Xy.constructor=Gy;Jw(Xy,mc.prototype);Xy.isPureReactComponent=!0;var u0=Array.isArray,tA=Object.prototype.hasOwnProperty,qy={current:null},nA={key:!0,ref:!0,__self:!0,__source:!0};function sA(n,e,t){var s,i={},r=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)tA.call(e,s)&&!nA.hasOwnProperty(s)&&(i[s]=e[s]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in o=n.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:id,type:n,key:r,ref:a,props:i,_owner:qy.current}}function G_(n,e){return{$$typeof:id,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Yy(n){return typeof n=="object"&&n!==null&&n.$$typeof===id}function X_(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var h0=/\/+/g;function eg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?X_(""+n.key):e.toString(36)}function Id(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case id:case D_:a=!0}}if(a)return a=n,i=i(a),n=s===""?"."+eg(a,0):s,u0(i)?(t="",n!=null&&(t=n.replace(h0,"$&/")+"/"),Id(i,e,t,"",function(u){return u})):i!=null&&(Yy(i)&&(i=G_(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(h0,"$&/")+"/")+n)),e.push(i)),1;if(a=0,s=s===""?".":s+":",u0(n))for(var o=0;o<n.length;o++){r=n[o];var c=s+eg(r,o);a+=Id(r,e,t,c,i)}else if(c=W_(n),typeof c=="function")for(n=c.call(n),o=0;!(r=n.next()).done;)r=r.value,c=s+eg(r,o++),a+=Id(r,e,t,c,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function fd(n,e,t){if(n==null)return n;var s=[],i=0;return Id(n,s,"","",function(r){return e.call(t,r,i++)}),s}function q_(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var qt={current:null},Dd={transition:null},Y_={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Dd,ReactCurrentOwner:qy};function iA(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:fd,forEach:function(n,e,t){fd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return fd(n,function(){e++}),e},toArray:function(n){return fd(n,function(e){return e})||[]},only:function(n){if(!Yy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};le.Component=mc;le.Fragment=F_;le.Profiler=j_;le.PureComponent=Gy;le.StrictMode=O_;le.Suspense=U_;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y_;le.act=iA;le.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=Jw({},n.props),i=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=qy.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in e)tA.call(e,c)&&!nA.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:id,type:n.type,key:i,ref:r,props:s,_owner:a}};le.createContext=function(n){return n={$$typeof:B_,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:z_,_context:n},n.Consumer=n};le.createElement=sA;le.createFactory=function(n){var e=sA.bind(null,n);return e.type=n,e};le.createRef=function(){return{current:null}};le.forwardRef=function(n){return{$$typeof:H_,render:n}};le.isValidElement=Yy;le.lazy=function(n){return{$$typeof:V_,_payload:{_status:-1,_result:n},_init:q_}};le.memo=function(n,e){return{$$typeof:$_,type:n,compare:e===void 0?null:e}};le.startTransition=function(n){var e=Dd.transition;Dd.transition={};try{n()}finally{Dd.transition=e}};le.unstable_act=iA;le.useCallback=function(n,e){return qt.current.useCallback(n,e)};le.useContext=function(n){return qt.current.useContext(n)};le.useDebugValue=function(){};le.useDeferredValue=function(n){return qt.current.useDeferredValue(n)};le.useEffect=function(n,e){return qt.current.useEffect(n,e)};le.useId=function(){return qt.current.useId()};le.useImperativeHandle=function(n,e,t){return qt.current.useImperativeHandle(n,e,t)};le.useInsertionEffect=function(n,e){return qt.current.useInsertionEffect(n,e)};le.useLayoutEffect=function(n,e){return qt.current.useLayoutEffect(n,e)};le.useMemo=function(n,e){return qt.current.useMemo(n,e)};le.useReducer=function(n,e,t){return qt.current.useReducer(n,e,t)};le.useRef=function(n){return qt.current.useRef(n)};le.useState=function(n){return qt.current.useState(n)};le.useSyncExternalStore=function(n,e,t){return qt.current.useSyncExternalStore(n,e,t)};le.useTransition=function(){return qt.current.useTransition()};le.version="18.3.1";Kw.exports=le;var N=Kw.exports;const rA=I_(N),K_=M_({__proto__:null,default:rA},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_=N,J_=Symbol.for("react.element"),Z_=Symbol.for("react.fragment"),eE=Object.prototype.hasOwnProperty,tE=Q_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nE={key:!0,ref:!0,__self:!0,__source:!0};function aA(n,e,t){var s,i={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)eE.call(e,s)&&!nE.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:J_,type:n,key:r,ref:a,props:i,_owner:tE.current}}_p.Fragment=Z_;_p.jsx=aA;_p.jsxs=aA;Yw.exports=_p;var y=Yw.exports,oA={exports:{}},Pn={},lA={exports:{}},cA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(I,V){var K=I.length;I.push(V);e:for(;0<K;){var oe=K-1>>>1,ie=I[oe];if(0<i(ie,V))I[oe]=V,I[K]=ie,K=oe;else break e}}function t(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var V=I[0],K=I.pop();if(K!==V){I[0]=K;e:for(var oe=0,ie=I.length,_e=ie>>>1;oe<_e;){var ft=2*(oe+1)-1,Rn=I[ft],Ee=ft+1,ue=I[Ee];if(0>i(Rn,K))Ee<ie&&0>i(ue,Rn)?(I[oe]=ue,I[Ee]=K,oe=Ee):(I[oe]=Rn,I[ft]=K,oe=ft);else if(Ee<ie&&0>i(ue,K))I[oe]=ue,I[Ee]=K,oe=Ee;else break e}}return V}function i(I,V){var K=I.sortIndex-V.sortIndex;return K!==0?K:I.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var V=t(u);V!==null;){if(V.callback===null)s(u);else if(V.startTime<=I)s(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=t(u)}}function E(I){if(A=!1,b(I),!m)if(t(c)!==null)m=!0,z(C);else{var V=t(u);V!==null&&X(E,V.startTime-I)}}function C(I,V){m=!1,A&&(A=!1,v(P),P=-1),p=!0;var K=f;try{for(b(V),d=t(c);d!==null&&(!(d.expirationTime>V)||I&&!O());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,f=d.priorityLevel;var ie=oe(d.expirationTime<=V);V=n.unstable_now(),typeof ie=="function"?d.callback=ie:d===t(c)&&s(c),b(V)}else s(c);d=t(c)}if(d!==null)var _e=!0;else{var ft=t(u);ft!==null&&X(E,ft.startTime-V),_e=!1}return _e}finally{d=null,f=K,p=!1}}var T=!1,k=null,P=-1,M=5,D=-1;function O(){return!(n.unstable_now()-D<M)}function j(){if(k!==null){var I=n.unstable_now();D=I;var V=!0;try{V=k(!0,I)}finally{V?ee():(T=!1,k=null)}}else T=!1}var ee;if(typeof w=="function")ee=function(){w(j)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,me=J.port2;J.port1.onmessage=j,ee=function(){me.postMessage(null)}}else ee=function(){_(j,0)};function z(I){k=I,T||(T=!0,ee())}function X(I,V){P=_(function(){I(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,z(C))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(I){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var K=f;f=V;try{return I()}finally{f=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var K=f;f=I;try{return V()}finally{f=K}},n.unstable_scheduleCallback=function(I,V,K){var oe=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?oe+K:oe):K=oe,I){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=K+ie,I={id:h++,callback:V,priorityLevel:I,startTime:K,expirationTime:ie,sortIndex:-1},K>oe?(I.sortIndex=K,e(u,I),t(c)===null&&I===t(u)&&(A?(v(P),P=-1):A=!0,X(E,K-oe))):(I.sortIndex=ie,e(c,I),m||p||(m=!0,z(C))),I},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(I){var V=f;return function(){var K=f;f=V;try{return I.apply(this,arguments)}finally{f=K}}}})(cA);lA.exports=cA;var sE=lA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE=N,Tn=sE;function L(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uA=new Set,hu={};function Ao(n,e){lc(n,e),lc(n+"Capture",e)}function lc(n,e){for(hu[n]=e,n=0;n<e.length;n++)uA.add(e[n])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dg=Object.prototype.hasOwnProperty,rE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d0={},f0={};function aE(n){return Dg.call(f0,n)?!0:Dg.call(d0,n)?!1:rE.test(n)?f0[n]=!0:(d0[n]=!0,!1)}function oE(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function lE(n,e,t,s){if(e===null||typeof e>"u"||oE(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(n,e,t,s,i,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){bt[n]=new Yt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];bt[e]=new Yt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){bt[n]=new Yt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){bt[n]=new Yt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){bt[n]=new Yt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){bt[n]=new Yt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){bt[n]=new Yt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){bt[n]=new Yt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){bt[n]=new Yt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ky=/[\-:]([a-z])/g;function Qy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Ky,Qy);bt[e]=new Yt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Ky,Qy);bt[e]=new Yt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Ky,Qy);bt[e]=new Yt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){bt[n]=new Yt(n,1,!1,n.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){bt[n]=new Yt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Jy(n,e,t,s){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lE(e,t,i,s)&&(t=null),s||i===null?aE(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Bi=iE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pd=Symbol.for("react.element"),Do=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),hA=Symbol.for("react.provider"),dA=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),Og=Symbol.for("react.suspense"),jg=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),$i=Symbol.for("react.lazy"),fA=Symbol.for("react.offscreen"),p0=Symbol.iterator;function Sc(n){return n===null||typeof n!="object"?null:(n=p0&&n[p0]||n["@@iterator"],typeof n=="function"?n:null)}var Be=Object.assign,tg;function Mc(n){if(tg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);tg=e&&e[1]||""}return`
`+tg+n}var ng=!1;function sg(n,e){if(!n||ng)return"";ng=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==r[o]){var c=`
`+i[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{ng=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Mc(n):""}function cE(n){switch(n.tag){case 5:return Mc(n.type);case 16:return Mc("Lazy");case 13:return Mc("Suspense");case 19:return Mc("SuspenseList");case 0:case 2:case 15:return n=sg(n.type,!1),n;case 11:return n=sg(n.type.render,!1),n;case 1:return n=sg(n.type,!0),n;default:return""}}function zg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fo:return"Fragment";case Do:return"Portal";case Fg:return"Profiler";case Zy:return"StrictMode";case Og:return"Suspense";case jg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dA:return(n.displayName||"Context")+".Consumer";case hA:return(n._context.displayName||"Context")+".Provider";case ev:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tv:return e=n.displayName||null,e!==null?e:zg(n.type)||"Memo";case $i:e=n._payload,n=n._init;try{return zg(n(e))}catch{}}return null}function uE(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zg(e);case 8:return e===Zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hE(n){var e=pA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){s=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function gd(n){n._valueTracker||(n._valueTracker=hE(n))}function gA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=pA(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function bf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Bg(n,e){var t=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function g0(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Or(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mA(n,e){e=e.checked,e!=null&&Jy(n,"checked",e,!1)}function Hg(n,e){mA(n,e);var t=Or(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Ug(n,e.type,t):e.hasOwnProperty("defaultValue")&&Ug(n,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function m0(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Ug(n,e,t){(e!=="number"||bf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ic=Array.isArray;function Yo(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Or(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function $g(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function y0(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(L(92));if(Ic(t)){if(1<t.length)throw Error(L(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Or(t)}}function yA(n,e){var t=Or(e.value),s=Or(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function v0(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function vA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?vA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var md,wA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=md.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function du(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dE=["Webkit","ms","Moz","O"];Object.keys(eu).forEach(function(n){dE.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),eu[e]=eu[n]})});function AA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||eu.hasOwnProperty(n)&&eu[n]?(""+e).trim():e+"px"}function SA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=AA(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var fE=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wg(n,e){if(e){if(fE[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Gg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function nv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qg=null,Ko=null,Qo=null;function w0(n){if(n=od(n)){if(typeof qg!="function")throw Error(L(280));var e=n.stateNode;e&&(e=Pp(e),qg(n.stateNode,n.type,e))}}function xA(n){Ko?Qo?Qo.push(n):Qo=[n]:Ko=n}function bA(){if(Ko){var n=Ko,e=Qo;if(Qo=Ko=null,w0(n),e)for(n=0;n<e.length;n++)w0(e[n])}}function _A(n,e){return n(e)}function EA(){}var ig=!1;function CA(n,e,t){if(ig)return n(e,t);ig=!0;try{return _A(n,e,t)}finally{ig=!1,(Ko!==null||Qo!==null)&&(EA(),bA())}}function fu(n,e){var t=n.stateNode;if(t===null)return null;var s=Pp(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(L(231,e,typeof t));return t}var Yg=!1;if(Mi)try{var xc={};Object.defineProperty(xc,"passive",{get:function(){Yg=!0}}),window.addEventListener("test",xc,xc),window.removeEventListener("test",xc,xc)}catch{Yg=!1}function pE(n,e,t,s,i,r,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var tu=!1,_f=null,Ef=!1,Kg=null,gE={onError:function(n){tu=!0,_f=n}};function mE(n,e,t,s,i,r,a,o,c){tu=!1,_f=null,pE.apply(gE,arguments)}function yE(n,e,t,s,i,r,a,o,c){if(mE.apply(this,arguments),tu){if(tu){var u=_f;tu=!1,_f=null}else throw Error(L(198));Ef||(Ef=!0,Kg=u)}}function So(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function kA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function A0(n){if(So(n)!==n)throw Error(L(188))}function vE(n){var e=n.alternate;if(!e){if(e=So(n),e===null)throw Error(L(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return A0(i),n;if(r===s)return A0(i),e;r=r.sibling}throw Error(L(188))}if(t.return!==s.return)t=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,s=r;break}if(o===s){a=!0,s=i,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,s=i;break}if(o===s){a=!0,s=r,t=i;break}o=o.sibling}if(!a)throw Error(L(189))}}if(t.alternate!==s)throw Error(L(190))}if(t.tag!==3)throw Error(L(188));return t.stateNode.current===t?n:e}function TA(n){return n=vE(n),n!==null?PA(n):null}function PA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=PA(n);if(e!==null)return e;n=n.sibling}return null}var NA=Tn.unstable_scheduleCallback,S0=Tn.unstable_cancelCallback,wE=Tn.unstable_shouldYield,AE=Tn.unstable_requestPaint,We=Tn.unstable_now,SE=Tn.unstable_getCurrentPriorityLevel,sv=Tn.unstable_ImmediatePriority,RA=Tn.unstable_UserBlockingPriority,Cf=Tn.unstable_NormalPriority,xE=Tn.unstable_LowPriority,LA=Tn.unstable_IdlePriority,Ep=null,Gs=null;function bE(n){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Ep,n,void 0,(n.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:CE,_E=Math.log,EE=Math.LN2;function CE(n){return n>>>=0,n===0?32:31-(_E(n)/EE|0)|0}var yd=64,vd=4194304;function Dc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function kf(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?s=Dc(o):(r&=a,r!==0&&(s=Dc(r)))}else a=t&~i,a!==0?s=Dc(a):r!==0&&(s=Dc(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-ms(e),i=1<<t,s|=n[t],e&=~i;return s}function kE(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TE(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-ms(r),o=1<<a,c=i[a];c===-1?(!(o&t)||o&s)&&(i[a]=kE(o,e)):c<=e&&(n.expiredLanes|=o),r&=~o}}function Qg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function MA(){var n=yd;return yd<<=1,!(yd&4194240)&&(yd=64),n}function rg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function rd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ms(e),n[e]=t}function PE(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ms(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function iv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-ms(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var Ae=0;function IA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var DA,rv,FA,OA,jA,Jg=!1,wd=[],kr=null,Tr=null,Pr=null,pu=new Map,gu=new Map,Wi=[],NE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x0(n,e){switch(n){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(e.pointerId)}}function bc(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=od(e),e!==null&&rv(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function RE(n,e,t,s,i){switch(e){case"focusin":return kr=bc(kr,n,e,t,s,i),!0;case"dragenter":return Tr=bc(Tr,n,e,t,s,i),!0;case"mouseover":return Pr=bc(Pr,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return pu.set(r,bc(pu.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,gu.set(r,bc(gu.get(r)||null,n,e,t,s,i)),!0}return!1}function zA(n){var e=ta(n.target);if(e!==null){var t=So(e);if(t!==null){if(e=t.tag,e===13){if(e=kA(t),e!==null){n.blockedOn=e,jA(n.priority,function(){FA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Zg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);Xg=s,t.target.dispatchEvent(s),Xg=null}else return e=od(t),e!==null&&rv(e),n.blockedOn=t,!1;e.shift()}return!0}function b0(n,e,t){Fd(n)&&t.delete(e)}function LE(){Jg=!1,kr!==null&&Fd(kr)&&(kr=null),Tr!==null&&Fd(Tr)&&(Tr=null),Pr!==null&&Fd(Pr)&&(Pr=null),pu.forEach(b0),gu.forEach(b0)}function _c(n,e){n.blockedOn===e&&(n.blockedOn=null,Jg||(Jg=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,LE)))}function mu(n){function e(i){return _c(i,n)}if(0<wd.length){_c(wd[0],n);for(var t=1;t<wd.length;t++){var s=wd[t];s.blockedOn===n&&(s.blockedOn=null)}}for(kr!==null&&_c(kr,n),Tr!==null&&_c(Tr,n),Pr!==null&&_c(Pr,n),pu.forEach(e),gu.forEach(e),t=0;t<Wi.length;t++)s=Wi[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Wi.length&&(t=Wi[0],t.blockedOn===null);)zA(t),t.blockedOn===null&&Wi.shift()}var Jo=Bi.ReactCurrentBatchConfig,Tf=!0;function ME(n,e,t,s){var i=Ae,r=Jo.transition;Jo.transition=null;try{Ae=1,av(n,e,t,s)}finally{Ae=i,Jo.transition=r}}function IE(n,e,t,s){var i=Ae,r=Jo.transition;Jo.transition=null;try{Ae=4,av(n,e,t,s)}finally{Ae=i,Jo.transition=r}}function av(n,e,t,s){if(Tf){var i=Zg(n,e,t,s);if(i===null)gg(n,e,s,Pf,t),x0(n,s);else if(RE(i,n,e,t,s))s.stopPropagation();else if(x0(n,s),e&4&&-1<NE.indexOf(n)){for(;i!==null;){var r=od(i);if(r!==null&&DA(r),r=Zg(n,e,t,s),r===null&&gg(n,e,s,Pf,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else gg(n,e,s,null,t)}}var Pf=null;function Zg(n,e,t,s){if(Pf=null,n=nv(s),n=ta(n),n!==null)if(e=So(n),e===null)n=null;else if(t=e.tag,t===13){if(n=kA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Pf=n,null}function BA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SE()){case sv:return 1;case RA:return 4;case Cf:case xE:return 16;case LA:return 536870912;default:return 16}default:return 16}}var _r=null,ov=null,Od=null;function HA(){if(Od)return Od;var n,e=ov,t=e.length,s,i="value"in _r?_r.value:_r.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===i[r-s];s++);return Od=i.slice(n,1<s?1-s:void 0)}function jd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ad(){return!0}function _0(){return!1}function Nn(n){function e(t,s,i,r,a){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ad:_0,this.isPropagationStopped=_0,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),e}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lv=Nn(yc),ad=Be({},yc,{view:0,detail:0}),DE=Nn(ad),ag,og,Ec,Cp=Be({},ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ec&&(Ec&&n.type==="mousemove"?(ag=n.screenX-Ec.screenX,og=n.screenY-Ec.screenY):og=ag=0,Ec=n),ag)},movementY:function(n){return"movementY"in n?n.movementY:og}}),E0=Nn(Cp),FE=Be({},Cp,{dataTransfer:0}),OE=Nn(FE),jE=Be({},ad,{relatedTarget:0}),lg=Nn(jE),zE=Be({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),BE=Nn(zE),HE=Be({},yc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),UE=Nn(HE),$E=Be({},yc,{data:0}),C0=Nn($E),VE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XE(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=GE[n])?!!e[n]:!1}function cv(){return XE}var qE=Be({},ad,{key:function(n){if(n.key){var e=VE[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=jd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?WE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(n){return n.type==="keypress"?jd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?jd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),YE=Nn(qE),KE=Be({},Cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=Nn(KE),QE=Be({},ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),JE=Nn(QE),ZE=Be({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),e1=Nn(ZE),t1=Be({},Cp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),n1=Nn(t1),s1=[9,13,27,32],uv=Mi&&"CompositionEvent"in window,nu=null;Mi&&"documentMode"in document&&(nu=document.documentMode);var i1=Mi&&"TextEvent"in window&&!nu,UA=Mi&&(!uv||nu&&8<nu&&11>=nu),T0=" ",P0=!1;function $A(n,e){switch(n){case"keyup":return s1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Oo=!1;function r1(n,e){switch(n){case"compositionend":return VA(e);case"keypress":return e.which!==32?null:(P0=!0,T0);case"textInput":return n=e.data,n===T0&&P0?null:n;default:return null}}function a1(n,e){if(Oo)return n==="compositionend"||!uv&&$A(n,e)?(n=HA(),Od=ov=_r=null,Oo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UA&&e.locale!=="ko"?null:e.data;default:return null}}var o1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!o1[n.type]:e==="textarea"}function WA(n,e,t,s){xA(s),e=Nf(e,"onChange"),0<e.length&&(t=new lv("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var su=null,yu=null;function l1(n){nS(n,0)}function kp(n){var e=Bo(n);if(gA(e))return n}function c1(n,e){if(n==="change")return e}var GA=!1;if(Mi){var cg;if(Mi){var ug="oninput"in document;if(!ug){var R0=document.createElement("div");R0.setAttribute("oninput","return;"),ug=typeof R0.oninput=="function"}cg=ug}else cg=!1;GA=cg&&(!document.documentMode||9<document.documentMode)}function L0(){su&&(su.detachEvent("onpropertychange",XA),yu=su=null)}function XA(n){if(n.propertyName==="value"&&kp(yu)){var e=[];WA(e,yu,n,nv(n)),CA(l1,e)}}function u1(n,e,t){n==="focusin"?(L0(),su=e,yu=t,su.attachEvent("onpropertychange",XA)):n==="focusout"&&L0()}function h1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return kp(yu)}function d1(n,e){if(n==="click")return kp(e)}function f1(n,e){if(n==="input"||n==="change")return kp(e)}function p1(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var vs=typeof Object.is=="function"?Object.is:p1;function vu(n,e){if(vs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!Dg.call(e,i)||!vs(n[i],e[i]))return!1}return!0}function M0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function I0(n,e){var t=M0(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=M0(t)}}function qA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?qA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function YA(){for(var n=window,e=bf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=bf(n.document)}return e}function hv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function g1(n){var e=YA(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&qA(t.ownerDocument.documentElement,t)){if(s!==null&&hv(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=I0(t,r);var a=I0(t,s);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var m1=Mi&&"documentMode"in document&&11>=document.documentMode,jo=null,em=null,iu=null,tm=!1;function D0(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;tm||jo==null||jo!==bf(s)||(s=jo,"selectionStart"in s&&hv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),iu&&vu(iu,s)||(iu=s,s=Nf(em,"onSelect"),0<s.length&&(e=new lv("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=jo)))}function Sd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var zo={animationend:Sd("Animation","AnimationEnd"),animationiteration:Sd("Animation","AnimationIteration"),animationstart:Sd("Animation","AnimationStart"),transitionend:Sd("Transition","TransitionEnd")},hg={},KA={};Mi&&(KA=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Tp(n){if(hg[n])return hg[n];if(!zo[n])return n;var e=zo[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in KA)return hg[n]=e[t];return n}var QA=Tp("animationend"),JA=Tp("animationiteration"),ZA=Tp("animationstart"),eS=Tp("transitionend"),tS=new Map,F0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(n,e){tS.set(n,e),Ao(e,[n])}for(var dg=0;dg<F0.length;dg++){var fg=F0[dg],y1=fg.toLowerCase(),v1=fg[0].toUpperCase()+fg.slice(1);Ur(y1,"on"+v1)}Ur(QA,"onAnimationEnd");Ur(JA,"onAnimationIteration");Ur(ZA,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(eS,"onTransitionEnd");lc("onMouseEnter",["mouseout","mouseover"]);lc("onMouseLeave",["mouseout","mouseover"]);lc("onPointerEnter",["pointerout","pointerover"]);lc("onPointerLeave",["pointerout","pointerover"]);Ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fc));function O0(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,yE(s,e,void 0,n),n.currentTarget=null}function nS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&i.isPropagationStopped())break e;O0(i,o,u),r=c}else for(a=0;a<s.length;a++){if(o=s[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&i.isPropagationStopped())break e;O0(i,o,u),r=c}}}if(Ef)throw n=Kg,Ef=!1,Kg=null,n}function Te(n,e){var t=e[am];t===void 0&&(t=e[am]=new Set);var s=n+"__bubble";t.has(s)||(sS(e,n,2,!1),t.add(s))}function pg(n,e,t){var s=0;e&&(s|=4),sS(t,n,s,e)}var xd="_reactListening"+Math.random().toString(36).slice(2);function wu(n){if(!n[xd]){n[xd]=!0,uA.forEach(function(t){t!=="selectionchange"&&(w1.has(t)||pg(t,!1,n),pg(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[xd]||(e[xd]=!0,pg("selectionchange",!1,e))}}function sS(n,e,t,s){switch(BA(e)){case 1:var i=ME;break;case 4:i=IE;break;default:i=av}t=i.bind(null,e,t,n),i=void 0,!Yg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function gg(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=ta(o),a===null)return;if(c=a.tag,c===5||c===6){s=r=a;continue e}o=o.parentNode}}s=s.return}CA(function(){var u=r,h=nv(t),d=[];e:{var f=tS.get(n);if(f!==void 0){var p=lv,m=n;switch(n){case"keypress":if(jd(t)===0)break e;case"keydown":case"keyup":p=YE;break;case"focusin":m="focus",p=lg;break;case"focusout":m="blur",p=lg;break;case"beforeblur":case"afterblur":p=lg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=E0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=OE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=JE;break;case QA:case JA:case ZA:p=BE;break;case eS:p=e1;break;case"scroll":p=DE;break;case"wheel":p=n1;break;case"copy":case"cut":case"paste":p=UE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=k0}var A=(e&4)!==0,_=!A&&n==="scroll",v=A?f!==null?f+"Capture":null:f;A=[];for(var w=u,b;w!==null;){b=w;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,v!==null&&(E=fu(w,v),E!=null&&A.push(Au(w,E,b)))),_)break;w=w.return}0<A.length&&(f=new p(f,m,null,t,h),d.push({event:f,listeners:A}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==Xg&&(m=t.relatedTarget||t.fromElement)&&(ta(m)||m[Ii]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?ta(m):null,m!==null&&(_=So(m),m!==_||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(A=E0,E="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(A=k0,E="onPointerLeave",v="onPointerEnter",w="pointer"),_=p==null?f:Bo(p),b=m==null?f:Bo(m),f=new A(E,w+"leave",p,t,h),f.target=_,f.relatedTarget=b,E=null,ta(h)===u&&(A=new A(v,w+"enter",m,t,h),A.target=b,A.relatedTarget=_,E=A),_=E,p&&m)t:{for(A=p,v=m,w=0,b=A;b;b=ko(b))w++;for(b=0,E=v;E;E=ko(E))b++;for(;0<w-b;)A=ko(A),w--;for(;0<b-w;)v=ko(v),b--;for(;w--;){if(A===v||v!==null&&A===v.alternate)break t;A=ko(A),v=ko(v)}A=null}else A=null;p!==null&&j0(d,f,p,A,!1),m!==null&&_!==null&&j0(d,_,m,A,!0)}}e:{if(f=u?Bo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=c1;else if(N0(f))if(GA)C=f1;else{C=h1;var T=u1}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=d1);if(C&&(C=C(n,u))){WA(d,C,t,h);break e}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Ug(f,"number",f.value)}switch(T=u?Bo(u):window,n){case"focusin":(N0(T)||T.contentEditable==="true")&&(jo=T,em=u,iu=null);break;case"focusout":iu=em=jo=null;break;case"mousedown":tm=!0;break;case"contextmenu":case"mouseup":case"dragend":tm=!1,D0(d,t,h);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":D0(d,t,h)}var k;if(uv)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Oo?$A(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(UA&&t.locale!=="ko"&&(Oo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Oo&&(k=HA()):(_r=h,ov="value"in _r?_r.value:_r.textContent,Oo=!0)),T=Nf(u,P),0<T.length&&(P=new C0(P,n,null,t,h),d.push({event:P,listeners:T}),k?P.data=k:(k=VA(t),k!==null&&(P.data=k)))),(k=i1?r1(n,t):a1(n,t))&&(u=Nf(u,"onBeforeInput"),0<u.length&&(h=new C0("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=k))}nS(d,e)})}function Au(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Nf(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=fu(n,t),r!=null&&s.unshift(Au(n,r,i)),r=fu(n,e),r!=null&&s.push(Au(n,r,i))),n=n.return}return s}function ko(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function j0(n,e,t,s,i){for(var r=e._reactName,a=[];t!==null&&t!==s;){var o=t,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,i?(c=fu(t,r),c!=null&&a.unshift(Au(t,c,o))):i||(c=fu(t,r),c!=null&&a.push(Au(t,c,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var A1=/\r\n?/g,S1=/\u0000|\uFFFD/g;function z0(n){return(typeof n=="string"?n:""+n).replace(A1,`
`).replace(S1,"")}function bd(n,e,t){if(e=z0(e),z0(n)!==e&&t)throw Error(L(425))}function Rf(){}var nm=null,sm=null;function im(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rm=typeof setTimeout=="function"?setTimeout:void 0,x1=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,b1=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(n){return B0.resolve(null).then(n).catch(_1)}:rm;function _1(n){setTimeout(function(){throw n})}function mg(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),mu(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);mu(e)}function Nr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function H0(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var vc=Math.random().toString(36).slice(2),Ws="__reactFiber$"+vc,Su="__reactProps$"+vc,Ii="__reactContainer$"+vc,am="__reactEvents$"+vc,E1="__reactListeners$"+vc,C1="__reactHandles$"+vc;function ta(n){var e=n[Ws];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ii]||t[Ws]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=H0(n);n!==null;){if(t=n[Ws])return t;n=H0(n)}return e}n=t,t=n.parentNode}return null}function od(n){return n=n[Ws]||n[Ii],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Bo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(L(33))}function Pp(n){return n[Su]||null}var om=[],Ho=-1;function $r(n){return{current:n}}function Ne(n){0>Ho||(n.current=om[Ho],om[Ho]=null,Ho--)}function ke(n,e){Ho++,om[Ho]=n.current,n.current=e}var jr={},Ft=$r(jr),an=$r(!1),uo=jr;function cc(n,e){var t=n.type.contextTypes;if(!t)return jr;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function on(n){return n=n.childContextTypes,n!=null}function Lf(){Ne(an),Ne(Ft)}function U0(n,e,t){if(Ft.current!==jr)throw Error(L(168));ke(Ft,e),ke(an,t)}function iS(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(L(108,uE(n)||"Unknown",i));return Be({},t,s)}function Mf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||jr,uo=Ft.current,ke(Ft,n),ke(an,an.current),!0}function $0(n,e,t){var s=n.stateNode;if(!s)throw Error(L(169));t?(n=iS(n,e,uo),s.__reactInternalMemoizedMergedChildContext=n,Ne(an),Ne(Ft),ke(Ft,n)):Ne(an),ke(an,t)}var ti=null,Np=!1,yg=!1;function rS(n){ti===null?ti=[n]:ti.push(n)}function k1(n){Np=!0,rS(n)}function Vr(){if(!yg&&ti!==null){yg=!0;var n=0,e=Ae;try{var t=ti;for(Ae=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}ti=null,Np=!1}catch(i){throw ti!==null&&(ti=ti.slice(n+1)),NA(sv,Vr),i}finally{Ae=e,yg=!1}}return null}var Uo=[],$o=0,If=null,Df=0,Hn=[],Un=0,ho=null,Ti=1,Pi="";function qr(n,e){Uo[$o++]=Df,Uo[$o++]=If,If=n,Df=e}function aS(n,e,t){Hn[Un++]=Ti,Hn[Un++]=Pi,Hn[Un++]=ho,ho=n;var s=Ti;n=Pi;var i=32-ms(s)-1;s&=~(1<<i),t+=1;var r=32-ms(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Ti=1<<32-ms(e)+i|t<<i|s,Pi=r+n}else Ti=1<<r|t<<i|s,Pi=n}function dv(n){n.return!==null&&(qr(n,1),aS(n,1,0))}function fv(n){for(;n===If;)If=Uo[--$o],Uo[$o]=null,Df=Uo[--$o],Uo[$o]=null;for(;n===ho;)ho=Hn[--Un],Hn[Un]=null,Pi=Hn[--Un],Hn[Un]=null,Ti=Hn[--Un],Hn[Un]=null}var Cn=null,En=null,Ie=!1,ps=null;function oS(n,e){var t=Wn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function V0(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Cn=n,En=Nr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Cn=n,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ho!==null?{id:Ti,overflow:Pi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Wn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Cn=n,En=null,!0):!1;default:return!1}}function lm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function cm(n){if(Ie){var e=En;if(e){var t=e;if(!V0(n,e)){if(lm(n))throw Error(L(418));e=Nr(t.nextSibling);var s=Cn;e&&V0(n,e)?oS(s,t):(n.flags=n.flags&-4097|2,Ie=!1,Cn=n)}}else{if(lm(n))throw Error(L(418));n.flags=n.flags&-4097|2,Ie=!1,Cn=n}}}function W0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Cn=n}function _d(n){if(n!==Cn)return!1;if(!Ie)return W0(n),Ie=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!im(n.type,n.memoizedProps)),e&&(e=En)){if(lm(n))throw lS(),Error(L(418));for(;e;)oS(n,e),e=Nr(e.nextSibling)}if(W0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(L(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){En=Nr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}En=null}}else En=Cn?Nr(n.stateNode.nextSibling):null;return!0}function lS(){for(var n=En;n;)n=Nr(n.nextSibling)}function uc(){En=Cn=null,Ie=!1}function pv(n){ps===null?ps=[n]:ps.push(n)}var T1=Bi.ReactCurrentBatchConfig;function Cc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(L(309));var s=t.stateNode}if(!s)throw Error(L(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=i.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(L(284));if(!t._owner)throw Error(L(290,n))}return n}function Ed(n,e){throw n=Object.prototype.toString.call(e),Error(L(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function G0(n){var e=n._init;return e(n._payload)}function cS(n){function e(v,w){if(n){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function t(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function s(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Ir(v,w),v.index=0,v.sibling=null,v}function r(v,w,b){return v.index=b,n?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,w,b,E){return w===null||w.tag!==6?(w=_g(b,v.mode,E),w.return=v,w):(w=i(w,b),w.return=v,w)}function c(v,w,b,E){var C=b.type;return C===Fo?h(v,w,b.props.children,E,b.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$i&&G0(C)===w.type)?(E=i(w,b.props),E.ref=Cc(v,w,b),E.return=v,E):(E=Wd(b.type,b.key,b.props,null,v.mode,E),E.ref=Cc(v,w,b),E.return=v,E)}function u(v,w,b,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Eg(b,v.mode,E),w.return=v,w):(w=i(w,b.children||[]),w.return=v,w)}function h(v,w,b,E,C){return w===null||w.tag!==7?(w=co(b,v.mode,E,C),w.return=v,w):(w=i(w,b),w.return=v,w)}function d(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=_g(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pd:return b=Wd(w.type,w.key,w.props,null,v.mode,b),b.ref=Cc(v,null,w),b.return=v,b;case Do:return w=Eg(w,v.mode,b),w.return=v,w;case $i:var E=w._init;return d(v,E(w._payload),b)}if(Ic(w)||Sc(w))return w=co(w,v.mode,b,null),w.return=v,w;Ed(v,w)}return null}function f(v,w,b,E){var C=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:o(v,w,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pd:return b.key===C?c(v,w,b,E):null;case Do:return b.key===C?u(v,w,b,E):null;case $i:return C=b._init,f(v,w,C(b._payload),E)}if(Ic(b)||Sc(b))return C!==null?null:h(v,w,b,E,null);Ed(v,b)}return null}function p(v,w,b,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(b)||null,o(w,v,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case pd:return v=v.get(E.key===null?b:E.key)||null,c(w,v,E,C);case Do:return v=v.get(E.key===null?b:E.key)||null,u(w,v,E,C);case $i:var T=E._init;return p(v,w,b,T(E._payload),C)}if(Ic(E)||Sc(E))return v=v.get(b)||null,h(w,v,E,C,null);Ed(w,E)}return null}function m(v,w,b,E){for(var C=null,T=null,k=w,P=w=0,M=null;k!==null&&P<b.length;P++){k.index>P?(M=k,k=null):M=k.sibling;var D=f(v,k,b[P],E);if(D===null){k===null&&(k=M);break}n&&k&&D.alternate===null&&e(v,k),w=r(D,w,P),T===null?C=D:T.sibling=D,T=D,k=M}if(P===b.length)return t(v,k),Ie&&qr(v,P),C;if(k===null){for(;P<b.length;P++)k=d(v,b[P],E),k!==null&&(w=r(k,w,P),T===null?C=k:T.sibling=k,T=k);return Ie&&qr(v,P),C}for(k=s(v,k);P<b.length;P++)M=p(k,v,P,b[P],E),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?P:M.key),w=r(M,w,P),T===null?C=M:T.sibling=M,T=M);return n&&k.forEach(function(O){return e(v,O)}),Ie&&qr(v,P),C}function A(v,w,b,E){var C=Sc(b);if(typeof C!="function")throw Error(L(150));if(b=C.call(b),b==null)throw Error(L(151));for(var T=C=null,k=w,P=w=0,M=null,D=b.next();k!==null&&!D.done;P++,D=b.next()){k.index>P?(M=k,k=null):M=k.sibling;var O=f(v,k,D.value,E);if(O===null){k===null&&(k=M);break}n&&k&&O.alternate===null&&e(v,k),w=r(O,w,P),T===null?C=O:T.sibling=O,T=O,k=M}if(D.done)return t(v,k),Ie&&qr(v,P),C;if(k===null){for(;!D.done;P++,D=b.next())D=d(v,D.value,E),D!==null&&(w=r(D,w,P),T===null?C=D:T.sibling=D,T=D);return Ie&&qr(v,P),C}for(k=s(v,k);!D.done;P++,D=b.next())D=p(k,v,P,D.value,E),D!==null&&(n&&D.alternate!==null&&k.delete(D.key===null?P:D.key),w=r(D,w,P),T===null?C=D:T.sibling=D,T=D);return n&&k.forEach(function(j){return e(v,j)}),Ie&&qr(v,P),C}function _(v,w,b,E){if(typeof b=="object"&&b!==null&&b.type===Fo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pd:e:{for(var C=b.key,T=w;T!==null;){if(T.key===C){if(C=b.type,C===Fo){if(T.tag===7){t(v,T.sibling),w=i(T,b.props.children),w.return=v,v=w;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===$i&&G0(C)===T.type){t(v,T.sibling),w=i(T,b.props),w.ref=Cc(v,T,b),w.return=v,v=w;break e}t(v,T);break}else e(v,T);T=T.sibling}b.type===Fo?(w=co(b.props.children,v.mode,E,b.key),w.return=v,v=w):(E=Wd(b.type,b.key,b.props,null,v.mode,E),E.ref=Cc(v,w,b),E.return=v,v=E)}return a(v);case Do:e:{for(T=b.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){t(v,w.sibling),w=i(w,b.children||[]),w.return=v,v=w;break e}else{t(v,w);break}else e(v,w);w=w.sibling}w=Eg(b,v.mode,E),w.return=v,v=w}return a(v);case $i:return T=b._init,_(v,w,T(b._payload),E)}if(Ic(b))return m(v,w,b,E);if(Sc(b))return A(v,w,b,E);Ed(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(t(v,w.sibling),w=i(w,b),w.return=v,v=w):(t(v,w),w=_g(b,v.mode,E),w.return=v,v=w),a(v)):t(v,w)}return _}var hc=cS(!0),uS=cS(!1),Ff=$r(null),Of=null,Vo=null,gv=null;function mv(){gv=Vo=Of=null}function yv(n){var e=Ff.current;Ne(Ff),n._currentValue=e}function um(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Zo(n,e){Of=n,gv=Vo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(rn=!0),n.firstContext=null)}function Yn(n){var e=n._currentValue;if(gv!==n)if(n={context:n,memoizedValue:e,next:null},Vo===null){if(Of===null)throw Error(L(308));Vo=n,Of.dependencies={lanes:0,firstContext:n}}else Vo=Vo.next=n;return e}var na=null;function vv(n){na===null?na=[n]:na.push(n)}function hS(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,vv(e)):(t.next=i.next,i.next=t),e.interleaved=t,Di(n,s)}function Di(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Vi=!1;function wv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ni(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Rr(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,he&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Di(n,t)}return i=s.interleaved,i===null?(e.next=e,vv(s)):(e.next=i.next,i.next=e),s.interleaved=e,Di(n,t)}function zd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,iv(n,t)}}function X0(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function jf(n,e,t,s){var i=n.updateQueue;Vi=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;a=0,h=u=c=null,o=r;do{var f=o.lane,p=o.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,A=o;switch(f=e,p=t,A.tag){case 1:if(m=A.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=A.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Be({},d,f);break e;case 2:Vi=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);po|=a,n.lanes=a,n.memoizedState=d}}function q0(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(L(191,i));i.call(s)}}}var ld={},Xs=$r(ld),xu=$r(ld),bu=$r(ld);function sa(n){if(n===ld)throw Error(L(174));return n}function Av(n,e){switch(ke(bu,e),ke(xu,n),ke(Xs,ld),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Vg(e,n)}Ne(Xs),ke(Xs,e)}function dc(){Ne(Xs),Ne(xu),Ne(bu)}function fS(n){sa(bu.current);var e=sa(Xs.current),t=Vg(e,n.type);e!==t&&(ke(xu,n),ke(Xs,t))}function Sv(n){xu.current===n&&(Ne(Xs),Ne(xu))}var Oe=$r(0);function zf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vg=[];function xv(){for(var n=0;n<vg.length;n++)vg[n]._workInProgressVersionPrimary=null;vg.length=0}var Bd=Bi.ReactCurrentDispatcher,wg=Bi.ReactCurrentBatchConfig,fo=0,ze=null,nt=null,ht=null,Bf=!1,ru=!1,_u=0,P1=0;function _t(){throw Error(L(321))}function bv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!vs(n[t],e[t]))return!1;return!0}function _v(n,e,t,s,i,r){if(fo=r,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bd.current=n===null||n.memoizedState===null?M1:I1,n=t(s,i),ru){r=0;do{if(ru=!1,_u=0,25<=r)throw Error(L(301));r+=1,ht=nt=null,e.updateQueue=null,Bd.current=D1,n=t(s,i)}while(ru)}if(Bd.current=Hf,e=nt!==null&&nt.next!==null,fo=0,ht=nt=ze=null,Bf=!1,e)throw Error(L(300));return n}function Ev(){var n=_u!==0;return _u=0,n}function ks(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?ze.memoizedState=ht=n:ht=ht.next=n,ht}function Kn(){if(nt===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var e=ht===null?ze.memoizedState:ht.next;if(e!==null)ht=e,nt=n;else{if(n===null)throw Error(L(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ht===null?ze.memoizedState=ht=n:ht=ht.next=n}return ht}function Eu(n,e){return typeof e=="function"?e(n):e}function Ag(n){var e=Kn(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=n;var s=nt,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var o=a=null,c=null,u=r;do{var h=u.lane;if((fo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=s):c=c.next=d,ze.lanes|=h,po|=h}u=u.next}while(u!==null&&u!==r);c===null?a=s:c.next=o,vs(s,e.memoizedState)||(rn=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,ze.lanes|=r,po|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Sg(n){var e=Kn(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do r=n(r,a.action),a=a.next;while(a!==i);vs(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function pS(){}function gS(n,e){var t=ze,s=Kn(),i=e(),r=!vs(s.memoizedState,i);if(r&&(s.memoizedState=i,rn=!0),s=s.queue,Cv(vS.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||ht!==null&&ht.memoizedState.tag&1){if(t.flags|=2048,Cu(9,yS.bind(null,t,s,i,e),void 0,null),dt===null)throw Error(L(349));fo&30||mS(t,e,i)}return i}function mS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function yS(n,e,t,s){e.value=t,e.getSnapshot=s,wS(e)&&AS(n)}function vS(n,e,t){return t(function(){wS(e)&&AS(n)})}function wS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!vs(n,t)}catch{return!0}}function AS(n){var e=Di(n,1);e!==null&&ys(e,n,1,-1)}function Y0(n){var e=ks();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eu,lastRenderedState:n},e.queue=n,n=n.dispatch=L1.bind(null,ze,n),[e.memoizedState,n]}function Cu(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function SS(){return Kn().memoizedState}function Hd(n,e,t,s){var i=ks();ze.flags|=n,i.memoizedState=Cu(1|e,t,void 0,s===void 0?null:s)}function Rp(n,e,t,s){var i=Kn();s=s===void 0?null:s;var r=void 0;if(nt!==null){var a=nt.memoizedState;if(r=a.destroy,s!==null&&bv(s,a.deps)){i.memoizedState=Cu(e,t,r,s);return}}ze.flags|=n,i.memoizedState=Cu(1|e,t,r,s)}function K0(n,e){return Hd(8390656,8,n,e)}function Cv(n,e){return Rp(2048,8,n,e)}function xS(n,e){return Rp(4,2,n,e)}function bS(n,e){return Rp(4,4,n,e)}function _S(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ES(n,e,t){return t=t!=null?t.concat([n]):null,Rp(4,4,_S.bind(null,e,n),t)}function kv(){}function CS(n,e){var t=Kn();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function kS(n,e){var t=Kn();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&bv(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function TS(n,e,t){return fo&21?(vs(t,e)||(t=MA(),ze.lanes|=t,po|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=t)}function N1(n,e){var t=Ae;Ae=t!==0&&4>t?t:4,n(!0);var s=wg.transition;wg.transition={};try{n(!1),e()}finally{Ae=t,wg.transition=s}}function PS(){return Kn().memoizedState}function R1(n,e,t){var s=Mr(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},NS(n))RS(e,t);else if(t=hS(n,e,t,s),t!==null){var i=Vt();ys(t,n,s,i),LS(t,e,s)}}function L1(n,e,t){var s=Mr(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(NS(n))RS(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(i.hasEagerState=!0,i.eagerState=o,vs(o,a)){var c=e.interleaved;c===null?(i.next=i,vv(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=hS(n,e,i,s),t!==null&&(i=Vt(),ys(t,n,s,i),LS(t,e,s))}}function NS(n){var e=n.alternate;return n===ze||e!==null&&e===ze}function RS(n,e){ru=Bf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function LS(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,iv(n,t)}}var Hf={readContext:Yn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},M1={readContext:Yn,useCallback:function(n,e){return ks().memoizedState=[n,e===void 0?null:e],n},useContext:Yn,useEffect:K0,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Hd(4194308,4,_S.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Hd(4194308,4,n,e)},useInsertionEffect:function(n,e){return Hd(4,2,n,e)},useMemo:function(n,e){var t=ks();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ks();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=R1.bind(null,ze,n),[s.memoizedState,n]},useRef:function(n){var e=ks();return n={current:n},e.memoizedState=n},useState:Y0,useDebugValue:kv,useDeferredValue:function(n){return ks().memoizedState=n},useTransition:function(){var n=Y0(!1),e=n[0];return n=N1.bind(null,n[1]),ks().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=ze,i=ks();if(Ie){if(t===void 0)throw Error(L(407));t=t()}else{if(t=e(),dt===null)throw Error(L(349));fo&30||mS(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,K0(vS.bind(null,s,r,n),[n]),s.flags|=2048,Cu(9,yS.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=ks(),e=dt.identifierPrefix;if(Ie){var t=Pi,s=Ti;t=(s&~(1<<32-ms(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=_u++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=P1++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},I1={readContext:Yn,useCallback:CS,useContext:Yn,useEffect:Cv,useImperativeHandle:ES,useInsertionEffect:xS,useLayoutEffect:bS,useMemo:kS,useReducer:Ag,useRef:SS,useState:function(){return Ag(Eu)},useDebugValue:kv,useDeferredValue:function(n){var e=Kn();return TS(e,nt.memoizedState,n)},useTransition:function(){var n=Ag(Eu)[0],e=Kn().memoizedState;return[n,e]},useMutableSource:pS,useSyncExternalStore:gS,useId:PS,unstable_isNewReconciler:!1},D1={readContext:Yn,useCallback:CS,useContext:Yn,useEffect:Cv,useImperativeHandle:ES,useInsertionEffect:xS,useLayoutEffect:bS,useMemo:kS,useReducer:Sg,useRef:SS,useState:function(){return Sg(Eu)},useDebugValue:kv,useDeferredValue:function(n){var e=Kn();return nt===null?e.memoizedState=n:TS(e,nt.memoizedState,n)},useTransition:function(){var n=Sg(Eu)[0],e=Kn().memoizedState;return[n,e]},useMutableSource:pS,useSyncExternalStore:gS,useId:PS,unstable_isNewReconciler:!1};function Zn(n,e){if(n&&n.defaultProps){e=Be({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function hm(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Be({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Lp={isMounted:function(n){return(n=n._reactInternals)?So(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Vt(),i=Mr(n),r=Ni(s,i);r.payload=e,t!=null&&(r.callback=t),e=Rr(n,r,i),e!==null&&(ys(e,n,i,s),zd(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Vt(),i=Mr(n),r=Ni(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Rr(n,r,i),e!==null&&(ys(e,n,i,s),zd(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Vt(),s=Mr(n),i=Ni(t,s);i.tag=2,e!=null&&(i.callback=e),e=Rr(n,i,s),e!==null&&(ys(e,n,s,t),zd(e,n,s))}};function Q0(n,e,t,s,i,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!vu(t,s)||!vu(i,r):!0}function MS(n,e,t){var s=!1,i=jr,r=e.contextType;return typeof r=="object"&&r!==null?r=Yn(r):(i=on(e)?uo:Ft.current,s=e.contextTypes,r=(s=s!=null)?cc(n,i):jr),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lp,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function J0(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Lp.enqueueReplaceState(e,e.state,null)}function dm(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},wv(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=Yn(r):(r=on(e)?uo:Ft.current,i.context=cc(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(hm(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lp.enqueueReplaceState(i,i.state,null),jf(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function fc(n,e){try{var t="",s=e;do t+=cE(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function xg(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function fm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var F1=typeof WeakMap=="function"?WeakMap:Map;function IS(n,e,t){t=Ni(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){$f||($f=!0,bm=s),fm(n,e)},t}function DS(n,e,t){t=Ni(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){fm(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){fm(n,e),typeof s!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function Z0(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new F1;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=K1.bind(null,n,e,t),e.then(n,n))}function ew(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function tw(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ni(-1,1),e.tag=2,Rr(t,e,1))),t.lanes|=1),n)}var O1=Bi.ReactCurrentOwner,rn=!1;function $t(n,e,t,s){e.child=n===null?uS(e,null,t,s):hc(e,n.child,t,s)}function nw(n,e,t,s,i){t=t.render;var r=e.ref;return Zo(e,i),s=_v(n,e,t,s,r,i),t=Ev(),n!==null&&!rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fi(n,e,i)):(Ie&&t&&dv(e),e.flags|=1,$t(n,e,s,i),e.child)}function sw(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!Dv(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,FS(n,e,r,s,i)):(n=Wd(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:vu,t(a,s)&&n.ref===e.ref)return Fi(n,e,i)}return e.flags|=1,n=Ir(r,s),n.ref=e.ref,n.return=e,e.child=n}function FS(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(vu(r,s)&&n.ref===e.ref)if(rn=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(rn=!0);else return e.lanes=n.lanes,Fi(n,e,i)}return pm(n,e,t,s,i)}function OS(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Go,xn),xn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ke(Go,xn),xn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,ke(Go,xn),xn|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,ke(Go,xn),xn|=s;return $t(n,e,i,t),e.child}function jS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function pm(n,e,t,s,i){var r=on(t)?uo:Ft.current;return r=cc(e,r),Zo(e,i),t=_v(n,e,t,s,r,i),s=Ev(),n!==null&&!rn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fi(n,e,i)):(Ie&&s&&dv(e),e.flags|=1,$t(n,e,t,i),e.child)}function iw(n,e,t,s,i){if(on(t)){var r=!0;Mf(e)}else r=!1;if(Zo(e,i),e.stateNode===null)Ud(n,e),MS(e,t,s),dm(e,t,s,i),s=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Yn(u):(u=on(t)?uo:Ft.current,u=cc(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||c!==u)&&J0(e,a,s,u),Vi=!1;var f=e.memoizedState;a.state=f,jf(e,s,a,i),c=e.memoizedState,o!==s||f!==c||an.current||Vi?(typeof h=="function"&&(hm(e,t,h,s),c=e.memoizedState),(o=Vi||Q0(e,t,o,s,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=u,s=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,dS(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:Zn(e.type,o),a.props=u,d=e.pendingProps,f=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=Yn(c):(c=on(t)?uo:Ft.current,c=cc(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==c)&&J0(e,a,s,c),Vi=!1,f=e.memoizedState,a.state=f,jf(e,s,a,i);var m=e.memoizedState;o!==d||f!==m||an.current||Vi?(typeof p=="function"&&(hm(e,t,p,s),m=e.memoizedState),(u=Vi||Q0(e,t,u,s,f,m,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,m,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),a.props=s,a.state=m,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return gm(n,e,t,s,r,i)}function gm(n,e,t,s,i,r){jS(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return i&&$0(e,t,!1),Fi(n,e,r);s=e.stateNode,O1.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=hc(e,n.child,null,r),e.child=hc(e,null,o,r)):$t(n,e,o,r),e.memoizedState=s.state,i&&$0(e,t,!0),e.child}function zS(n){var e=n.stateNode;e.pendingContext?U0(n,e.pendingContext,e.pendingContext!==e.context):e.context&&U0(n,e.context,!1),Av(n,e.containerInfo)}function rw(n,e,t,s,i){return uc(),pv(i),e.flags|=256,$t(n,e,t,s),e.child}var mm={dehydrated:null,treeContext:null,retryLane:0};function ym(n){return{baseLanes:n,cachePool:null,transitions:null}}function BS(n,e,t){var s=e.pendingProps,i=Oe.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ke(Oe,i&1),n===null)return cm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,r?(s=e.mode,r=e.child,a={mode:"hidden",children:a},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Dp(a,s,0,null),n=co(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=ym(t),e.memoizedState=mm,n):Tv(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return j1(n,e,a,s,o,i,t);if(r){r=s.fallback,a=e.mode,i=n.child,o=i.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Ir(i,c),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?r=Ir(o,r):(r=co(r,a,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,a=n.child.memoizedState,a=a===null?ym(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=mm,s}return r=n.child,n=r.sibling,s=Ir(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function Tv(n,e){return e=Dp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Cd(n,e,t,s){return s!==null&&pv(s),hc(e,n.child,null,t),n=Tv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function j1(n,e,t,s,i,r,a){if(t)return e.flags&256?(e.flags&=-257,s=xg(Error(L(422))),Cd(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Dp({mode:"visible",children:s.children},i,0,null),r=co(r,i,a,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&hc(e,n.child,null,a),e.child.memoizedState=ym(a),e.memoizedState=mm,r);if(!(e.mode&1))return Cd(n,e,a,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,r=Error(L(419)),s=xg(r,s,void 0),Cd(n,e,a,s)}if(o=(a&n.childLanes)!==0,rn||o){if(s=dt,s!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Di(n,i),ys(s,n,i,-1))}return Iv(),s=xg(Error(L(421))),Cd(n,e,a,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Q1.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,En=Nr(i.nextSibling),Cn=e,Ie=!0,ps=null,n!==null&&(Hn[Un++]=Ti,Hn[Un++]=Pi,Hn[Un++]=ho,Ti=n.id,Pi=n.overflow,ho=e),e=Tv(e,s.children),e.flags|=4096,e)}function aw(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),um(n.return,e,t)}function bg(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function HS(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if($t(n,e,s.children,t),s=Oe.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&aw(n,t,e);else if(n.tag===19)aw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(ke(Oe,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&zf(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),bg(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&zf(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}bg(e,!0,t,null,r);break;case"together":bg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ud(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Fi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),po|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(L(153));if(e.child!==null){for(n=e.child,t=Ir(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ir(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function z1(n,e,t){switch(e.tag){case 3:zS(e),uc();break;case 5:fS(e);break;case 1:on(e.type)&&Mf(e);break;case 4:Av(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;ke(Ff,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ke(Oe,Oe.current&1),e.flags|=128,null):t&e.child.childLanes?BS(n,e,t):(ke(Oe,Oe.current&1),n=Fi(n,e,t),n!==null?n.sibling:null);ke(Oe,Oe.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return HS(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(Oe,Oe.current),s)break;return null;case 22:case 23:return e.lanes=0,OS(n,e,t)}return Fi(n,e,t)}var US,vm,$S,VS;US=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};vm=function(){};$S=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,sa(Xs.current);var r=null;switch(t){case"input":i=Bg(n,i),s=Bg(n,s),r=[];break;case"select":i=Be({},i,{value:void 0}),s=Be({},s,{value:void 0}),r=[];break;case"textarea":i=$g(n,i),s=$g(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Rf)}Wg(t,s);var a;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hu.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(o=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Te("scroll",n),r||o===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};VS=function(n,e,t,s){t!==s&&(e.flags|=4)};function kc(n,e){if(!Ie)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Et(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function B1(n,e,t){var s=e.pendingProps;switch(fv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return on(e.type)&&Lf(),Et(e),null;case 3:return s=e.stateNode,dc(),Ne(an),Ne(Ft),xv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(_d(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ps!==null&&(Cm(ps),ps=null))),vm(n,e),Et(e),null;case 5:Sv(e);var i=sa(bu.current);if(t=e.type,n!==null&&e.stateNode!=null)$S(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(L(166));return Et(e),null}if(n=sa(Xs.current),_d(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[Ws]=e,s[Su]=r,n=(e.mode&1)!==0,t){case"dialog":Te("cancel",s),Te("close",s);break;case"iframe":case"object":case"embed":Te("load",s);break;case"video":case"audio":for(i=0;i<Fc.length;i++)Te(Fc[i],s);break;case"source":Te("error",s);break;case"img":case"image":case"link":Te("error",s),Te("load",s);break;case"details":Te("toggle",s);break;case"input":g0(s,r),Te("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Te("invalid",s);break;case"textarea":y0(s,r),Te("invalid",s)}Wg(t,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?s.textContent!==o&&(r.suppressHydrationWarning!==!0&&bd(s.textContent,o,n),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&bd(s.textContent,o,n),i=["children",""+o]):hu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Te("scroll",s)}switch(t){case"input":gd(s),m0(s,r,!0);break;case"textarea":gd(s),v0(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Rf)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=vA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[Ws]=e,n[Su]=s,US(n,e,!1,!1),e.stateNode=n;e:{switch(a=Gg(t,s),t){case"dialog":Te("cancel",n),Te("close",n),i=s;break;case"iframe":case"object":case"embed":Te("load",n),i=s;break;case"video":case"audio":for(i=0;i<Fc.length;i++)Te(Fc[i],n);i=s;break;case"source":Te("error",n),i=s;break;case"img":case"image":case"link":Te("error",n),Te("load",n),i=s;break;case"details":Te("toggle",n),i=s;break;case"input":g0(n,s),i=Bg(n,s),Te("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=Be({},s,{value:void 0}),Te("invalid",n);break;case"textarea":y0(n,s),i=$g(n,s),Te("invalid",n);break;default:i=s}Wg(t,i),o=i;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?SA(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&wA(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&du(n,c):typeof c=="number"&&du(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(hu.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Te("scroll",n):c!=null&&Jy(n,r,c,a))}switch(t){case"input":gd(n),m0(n,s,!1);break;case"textarea":gd(n),v0(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Or(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?Yo(n,!!s.multiple,r,!1):s.defaultValue!=null&&Yo(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Rf)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(n&&e.stateNode!=null)VS(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(L(166));if(t=sa(bu.current),sa(Xs.current),_d(e)){if(s=e.stateNode,t=e.memoizedProps,s[Ws]=e,(r=s.nodeValue!==t)&&(n=Cn,n!==null))switch(n.tag){case 3:bd(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&bd(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Ws]=e,e.stateNode=s}return Et(e),null;case 13:if(Ne(Oe),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ie&&En!==null&&e.mode&1&&!(e.flags&128))lS(),uc(),e.flags|=98560,r=!1;else if(r=_d(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(L(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[Ws]=e}else uc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),r=!1}else ps!==null&&(Cm(ps),ps=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Oe.current&1?st===0&&(st=3):Iv())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return dc(),vm(n,e),n===null&&wu(e.stateNode.containerInfo),Et(e),null;case 10:return yv(e.type._context),Et(e),null;case 17:return on(e.type)&&Lf(),Et(e),null;case 19:if(Ne(Oe),r=e.memoizedState,r===null)return Et(e),null;if(s=(e.flags&128)!==0,a=r.rendering,a===null)if(s)kc(r,!1);else{if(st!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=zf(n),a!==null){for(e.flags|=128,kc(r,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ke(Oe,Oe.current&1|2),e.child}n=n.sibling}r.tail!==null&&We()>pc&&(e.flags|=128,s=!0,kc(r,!1),e.lanes=4194304)}else{if(!s)if(n=zf(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),kc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Ie)return Et(e),null}else 2*We()-r.renderingStartTime>pc&&t!==1073741824&&(e.flags|=128,s=!0,kc(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=We(),e.sibling=null,t=Oe.current,ke(Oe,s?t&1|2:t&1),e):(Et(e),null);case 22:case 23:return Mv(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?xn&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function H1(n,e){switch(fv(e),e.tag){case 1:return on(e.type)&&Lf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return dc(),Ne(an),Ne(Ft),xv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Sv(e),null;case 13:if(Ne(Oe),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(L(340));uc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ne(Oe),null;case 4:return dc(),null;case 10:return yv(e.type._context),null;case 22:case 23:return Mv(),null;case 24:return null;default:return null}}var kd=!1,It=!1,U1=typeof WeakSet=="function"?WeakSet:Set,U=null;function Wo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Ue(n,e,s)}else t.current=null}function wm(n,e,t){try{t()}catch(s){Ue(n,e,s)}}var ow=!1;function $1(n,e){if(nm=Tf,n=YA(),hv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||i!==0&&d.nodeType!==3||(o=a+i),d!==r||s!==0&&d.nodeType!==3||(c=a+s),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===i&&(o=a),f===r&&++h===s&&(c=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(sm={focusedElem:n,selectionRange:t},Tf=!1,U=e;U!==null;)if(e=U,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,U=n;else for(;U!==null;){e=U;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var A=m.memoizedProps,_=m.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?A:Zn(e.type,A),_);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){Ue(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}return m=ow,ow=!1,m}function au(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&wm(e,t,r)}i=i.next}while(i!==s)}}function Mp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function Am(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function WS(n){var e=n.alternate;e!==null&&(n.alternate=null,WS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ws],delete e[Su],delete e[am],delete e[E1],delete e[C1])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function GS(n){return n.tag===5||n.tag===3||n.tag===4}function lw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||GS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sm(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Rf));else if(s!==4&&(n=n.child,n!==null))for(Sm(n,e,t),n=n.sibling;n!==null;)Sm(n,e,t),n=n.sibling}function xm(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(xm(n,e,t),n=n.sibling;n!==null;)xm(n,e,t),n=n.sibling}var At=null,fs=!1;function Hi(n,e,t){for(t=t.child;t!==null;)XS(n,e,t),t=t.sibling}function XS(n,e,t){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Ep,t)}catch{}switch(t.tag){case 5:It||Wo(t,e);case 6:var s=At,i=fs;At=null,Hi(n,e,t),At=s,fs=i,At!==null&&(fs?(n=At,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):At.removeChild(t.stateNode));break;case 18:At!==null&&(fs?(n=At,t=t.stateNode,n.nodeType===8?mg(n.parentNode,t):n.nodeType===1&&mg(n,t),mu(n)):mg(At,t.stateNode));break;case 4:s=At,i=fs,At=t.stateNode.containerInfo,fs=!0,Hi(n,e,t),At=s,fs=i;break;case 0:case 11:case 14:case 15:if(!It&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&wm(t,e,a),i=i.next}while(i!==s)}Hi(n,e,t);break;case 1:if(!It&&(Wo(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(o){Ue(t,e,o)}Hi(n,e,t);break;case 21:Hi(n,e,t);break;case 22:t.mode&1?(It=(s=It)||t.memoizedState!==null,Hi(n,e,t),It=s):Hi(n,e,t);break;default:Hi(n,e,t)}}function cw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new U1),e.forEach(function(s){var i=J1.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function Qn(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:At=o.stateNode,fs=!1;break e;case 3:At=o.stateNode.containerInfo,fs=!0;break e;case 4:At=o.stateNode.containerInfo,fs=!0;break e}o=o.return}if(At===null)throw Error(L(160));XS(r,a,i),At=null,fs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ue(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qS(e,n),e=e.sibling}function qS(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Qn(e,n),bs(n),s&4){try{au(3,n,n.return),Mp(3,n)}catch(A){Ue(n,n.return,A)}try{au(5,n,n.return)}catch(A){Ue(n,n.return,A)}}break;case 1:Qn(e,n),bs(n),s&512&&t!==null&&Wo(t,t.return);break;case 5:if(Qn(e,n),bs(n),s&512&&t!==null&&Wo(t,t.return),n.flags&32){var i=n.stateNode;try{du(i,"")}catch(A){Ue(n,n.return,A)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&mA(i,r),Gg(o,a);var u=Gg(o,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?SA(i,d):h==="dangerouslySetInnerHTML"?wA(i,d):h==="children"?du(i,d):Jy(i,h,d,u)}switch(o){case"input":Hg(i,r);break;case"textarea":yA(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Yo(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Yo(i,!!r.multiple,r.defaultValue,!0):Yo(i,!!r.multiple,r.multiple?[]:"",!1))}i[Su]=r}catch(A){Ue(n,n.return,A)}}break;case 6:if(Qn(e,n),bs(n),s&4){if(n.stateNode===null)throw Error(L(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(A){Ue(n,n.return,A)}}break;case 3:if(Qn(e,n),bs(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{mu(e.containerInfo)}catch(A){Ue(n,n.return,A)}break;case 4:Qn(e,n),bs(n);break;case 13:Qn(e,n),bs(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Rv=We())),s&4&&cw(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(It=(u=It)||h,Qn(e,n),It=u):Qn(e,n),bs(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(U=n,h=n.child;h!==null;){for(d=U=h;U!==null;){switch(f=U,p=f.child,f.tag){case 0:case 11:case 14:case 15:au(4,f,f.return);break;case 1:Wo(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(A){Ue(s,t,A)}}break;case 5:Wo(f,f.return);break;case 22:if(f.memoizedState!==null){hw(d);continue}}p!==null?(p.return=f,U=p):hw(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=AA("display",a))}catch(A){Ue(n,n.return,A)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(A){Ue(n,n.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qn(e,n),bs(n),s&4&&cw(n);break;case 21:break;default:Qn(e,n),bs(n)}}function bs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(GS(t)){var s=t;break e}t=t.return}throw Error(L(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(du(i,""),s.flags&=-33);var r=lw(n);xm(n,r,i);break;case 3:case 4:var a=s.stateNode.containerInfo,o=lw(n);Sm(n,o,a);break;default:throw Error(L(161))}}catch(c){Ue(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function V1(n,e,t){U=n,YS(n)}function YS(n,e,t){for(var s=(n.mode&1)!==0;U!==null;){var i=U,r=i.child;if(i.tag===22&&s){var a=i.memoizedState!==null||kd;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||It;o=kd;var u=It;if(kd=a,(It=c)&&!u)for(U=i;U!==null;)a=U,c=a.child,a.tag===22&&a.memoizedState!==null?dw(i):c!==null?(c.return=a,U=c):dw(i);for(;r!==null;)U=r,YS(r),r=r.sibling;U=i,kd=o,It=u}uw(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,U=r):uw(n)}}function uw(n){for(;U!==null;){var e=U;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Mp(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!It)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Zn(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&q0(e,r,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}q0(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&mu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}It||e.flags&512&&Am(e)}catch(f){Ue(e,e.return,f)}}if(e===n){U=null;break}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}}function hw(n){for(;U!==null;){var e=U;if(e===n){U=null;break}var t=e.sibling;if(t!==null){t.return=e.return,U=t;break}U=e.return}}function dw(n){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Mp(4,e)}catch(c){Ue(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){Ue(e,i,c)}}var r=e.return;try{Am(e)}catch(c){Ue(e,r,c)}break;case 5:var a=e.return;try{Am(e)}catch(c){Ue(e,a,c)}}}catch(c){Ue(e,e.return,c)}if(e===n){U=null;break}var o=e.sibling;if(o!==null){o.return=e.return,U=o;break}U=e.return}}var W1=Math.ceil,Uf=Bi.ReactCurrentDispatcher,Pv=Bi.ReactCurrentOwner,Xn=Bi.ReactCurrentBatchConfig,he=0,dt=null,qe=null,xt=0,xn=0,Go=$r(0),st=0,ku=null,po=0,Ip=0,Nv=0,ou=null,sn=null,Rv=0,pc=1/0,Js=null,$f=!1,bm=null,Lr=null,Td=!1,Er=null,Vf=0,lu=0,_m=null,$d=-1,Vd=0;function Vt(){return he&6?We():$d!==-1?$d:$d=We()}function Mr(n){return n.mode&1?he&2&&xt!==0?xt&-xt:T1.transition!==null?(Vd===0&&(Vd=MA()),Vd):(n=Ae,n!==0||(n=window.event,n=n===void 0?16:BA(n.type)),n):1}function ys(n,e,t,s){if(50<lu)throw lu=0,_m=null,Error(L(185));rd(n,t,s),(!(he&2)||n!==dt)&&(n===dt&&(!(he&2)&&(Ip|=t),st===4&&Gi(n,xt)),ln(n,s),t===1&&he===0&&!(e.mode&1)&&(pc=We()+500,Np&&Vr()))}function ln(n,e){var t=n.callbackNode;TE(n,e);var s=kf(n,n===dt?xt:0);if(s===0)t!==null&&S0(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&S0(t),e===1)n.tag===0?k1(fw.bind(null,n)):rS(fw.bind(null,n)),b1(function(){!(he&6)&&Vr()}),t=null;else{switch(IA(s)){case 1:t=sv;break;case 4:t=RA;break;case 16:t=Cf;break;case 536870912:t=LA;break;default:t=Cf}t=sx(t,KS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function KS(n,e){if($d=-1,Vd=0,he&6)throw Error(L(327));var t=n.callbackNode;if(el()&&n.callbackNode!==t)return null;var s=kf(n,n===dt?xt:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Wf(n,s);else{e=s;var i=he;he|=2;var r=JS();(dt!==n||xt!==e)&&(Js=null,pc=We()+500,lo(n,e));do try{q1();break}catch(o){QS(n,o)}while(!0);mv(),Uf.current=r,he=i,qe!==null?e=0:(dt=null,xt=0,e=st)}if(e!==0){if(e===2&&(i=Qg(n),i!==0&&(s=i,e=Em(n,i))),e===1)throw t=ku,lo(n,0),Gi(n,s),ln(n,We()),t;if(e===6)Gi(n,s);else{if(i=n.current.alternate,!(s&30)&&!G1(i)&&(e=Wf(n,s),e===2&&(r=Qg(n),r!==0&&(s=r,e=Em(n,r))),e===1))throw t=ku,lo(n,0),Gi(n,s),ln(n,We()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(L(345));case 2:Yr(n,sn,Js);break;case 3:if(Gi(n,s),(s&130023424)===s&&(e=Rv+500-We(),10<e)){if(kf(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Vt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=rm(Yr.bind(null,n,sn,Js),e);break}Yr(n,sn,Js);break;case 4:if(Gi(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var a=31-ms(s);r=1<<a,a=e[a],a>i&&(i=a),s&=~r}if(s=i,s=We()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*W1(s/1960))-s,10<s){n.timeoutHandle=rm(Yr.bind(null,n,sn,Js),s);break}Yr(n,sn,Js);break;case 5:Yr(n,sn,Js);break;default:throw Error(L(329))}}}return ln(n,We()),n.callbackNode===t?KS.bind(null,n):null}function Em(n,e){var t=ou;return n.current.memoizedState.isDehydrated&&(lo(n,e).flags|=256),n=Wf(n,e),n!==2&&(e=sn,sn=t,e!==null&&Cm(e)),n}function Cm(n){sn===null?sn=n:sn.push.apply(sn,n)}function G1(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!vs(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gi(n,e){for(e&=~Nv,e&=~Ip,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ms(e),s=1<<t;n[t]=-1,e&=~s}}function fw(n){if(he&6)throw Error(L(327));el();var e=kf(n,0);if(!(e&1))return ln(n,We()),null;var t=Wf(n,e);if(n.tag!==0&&t===2){var s=Qg(n);s!==0&&(e=s,t=Em(n,s))}if(t===1)throw t=ku,lo(n,0),Gi(n,e),ln(n,We()),t;if(t===6)throw Error(L(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Yr(n,sn,Js),ln(n,We()),null}function Lv(n,e){var t=he;he|=1;try{return n(e)}finally{he=t,he===0&&(pc=We()+500,Np&&Vr())}}function go(n){Er!==null&&Er.tag===0&&!(he&6)&&el();var e=he;he|=1;var t=Xn.transition,s=Ae;try{if(Xn.transition=null,Ae=1,n)return n()}finally{Ae=s,Xn.transition=t,he=e,!(he&6)&&Vr()}}function Mv(){xn=Go.current,Ne(Go)}function lo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,x1(t)),qe!==null)for(t=qe.return;t!==null;){var s=t;switch(fv(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Lf();break;case 3:dc(),Ne(an),Ne(Ft),xv();break;case 5:Sv(s);break;case 4:dc();break;case 13:Ne(Oe);break;case 19:Ne(Oe);break;case 10:yv(s.type._context);break;case 22:case 23:Mv()}t=t.return}if(dt=n,qe=n=Ir(n.current,null),xt=xn=e,st=0,ku=null,Nv=Ip=po=0,sn=ou=null,na!==null){for(e=0;e<na.length;e++)if(t=na[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var a=r.next;r.next=i,s.next=a}t.pending=s}na=null}return n}function QS(n,e){do{var t=qe;try{if(mv(),Bd.current=Hf,Bf){for(var s=ze.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Bf=!1}if(fo=0,ht=nt=ze=null,ru=!1,_u=0,Pv.current=null,t===null||t.return===null){st=1,ku=e,qe=null;break}e:{var r=n,a=t.return,o=t,c=e;if(e=xt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ew(a);if(p!==null){p.flags&=-257,tw(p,a,o,r,e),p.mode&1&&Z0(r,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var A=new Set;A.add(c),e.updateQueue=A}else m.add(c);break e}else{if(!(e&1)){Z0(r,u,e),Iv();break e}c=Error(L(426))}}else if(Ie&&o.mode&1){var _=ew(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),tw(_,a,o,r,e),pv(fc(c,o));break e}}r=c=fc(c,o),st!==4&&(st=2),ou===null?ou=[r]:ou.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=IS(r,c,e);X0(r,v);break e;case 1:o=c;var w=r.type,b=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Lr===null||!Lr.has(b)))){r.flags|=65536,e&=-e,r.lanes|=e;var E=DS(r,o,e);X0(r,E);break e}}r=r.return}while(r!==null)}ex(t)}catch(C){e=C,qe===t&&t!==null&&(qe=t=t.return);continue}break}while(!0)}function JS(){var n=Uf.current;return Uf.current=Hf,n===null?Hf:n}function Iv(){(st===0||st===3||st===2)&&(st=4),dt===null||!(po&268435455)&&!(Ip&268435455)||Gi(dt,xt)}function Wf(n,e){var t=he;he|=2;var s=JS();(dt!==n||xt!==e)&&(Js=null,lo(n,e));do try{X1();break}catch(i){QS(n,i)}while(!0);if(mv(),he=t,Uf.current=s,qe!==null)throw Error(L(261));return dt=null,xt=0,st}function X1(){for(;qe!==null;)ZS(qe)}function q1(){for(;qe!==null&&!wE();)ZS(qe)}function ZS(n){var e=nx(n.alternate,n,xn);n.memoizedProps=n.pendingProps,e===null?ex(n):qe=e,Pv.current=null}function ex(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=H1(t,e),t!==null){t.flags&=32767,qe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{st=6,qe=null;return}}else if(t=B1(t,e,xn),t!==null){qe=t;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=n}while(e!==null);st===0&&(st=5)}function Yr(n,e,t){var s=Ae,i=Xn.transition;try{Xn.transition=null,Ae=1,Y1(n,e,t,s)}finally{Xn.transition=i,Ae=s}return null}function Y1(n,e,t,s){do el();while(Er!==null);if(he&6)throw Error(L(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(L(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(PE(n,r),n===dt&&(qe=dt=null,xt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Td||(Td=!0,sx(Cf,function(){return el(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Xn.transition,Xn.transition=null;var a=Ae;Ae=1;var o=he;he|=4,Pv.current=null,$1(n,t),qS(t,n),g1(sm),Tf=!!nm,sm=nm=null,n.current=t,V1(t),AE(),he=o,Ae=a,Xn.transition=r}else n.current=t;if(Td&&(Td=!1,Er=n,Vf=i),r=n.pendingLanes,r===0&&(Lr=null),bE(t.stateNode),ln(n,We()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if($f)throw $f=!1,n=bm,bm=null,n;return Vf&1&&n.tag!==0&&el(),r=n.pendingLanes,r&1?n===_m?lu++:(lu=0,_m=n):lu=0,Vr(),null}function el(){if(Er!==null){var n=IA(Vf),e=Xn.transition,t=Ae;try{if(Xn.transition=null,Ae=16>n?16:n,Er===null)var s=!1;else{if(n=Er,Er=null,Vf=0,he&6)throw Error(L(331));var i=he;for(he|=4,U=n.current;U!==null;){var r=U,a=r.child;if(U.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(U=u;U!==null;){var h=U;switch(h.tag){case 0:case 11:case 15:au(8,h,r)}var d=h.child;if(d!==null)d.return=h,U=d;else for(;U!==null;){h=U;var f=h.sibling,p=h.return;if(WS(h),h===u){U=null;break}if(f!==null){f.return=p,U=f;break}U=p}}}var m=r.alternate;if(m!==null){var A=m.child;if(A!==null){m.child=null;do{var _=A.sibling;A.sibling=null,A=_}while(A!==null)}}U=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,U=a;else e:for(;U!==null;){if(r=U,r.flags&2048)switch(r.tag){case 0:case 11:case 15:au(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,U=v;break e}U=r.return}}var w=n.current;for(U=w;U!==null;){a=U;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,U=b;else e:for(a=w;U!==null;){if(o=U,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Mp(9,o)}}catch(C){Ue(o,o.return,C)}if(o===a){U=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,U=E;break e}U=o.return}}if(he=i,Vr(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Ep,n)}catch{}s=!0}return s}finally{Ae=t,Xn.transition=e}}return!1}function pw(n,e,t){e=fc(t,e),e=IS(n,e,1),n=Rr(n,e,1),e=Vt(),n!==null&&(rd(n,1,e),ln(n,e))}function Ue(n,e,t){if(n.tag===3)pw(n,n,t);else for(;e!==null;){if(e.tag===3){pw(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Lr===null||!Lr.has(s))){n=fc(t,n),n=DS(e,n,1),e=Rr(e,n,1),n=Vt(),e!==null&&(rd(e,1,n),ln(e,n));break}}e=e.return}}function K1(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Vt(),n.pingedLanes|=n.suspendedLanes&t,dt===n&&(xt&t)===t&&(st===4||st===3&&(xt&130023424)===xt&&500>We()-Rv?lo(n,0):Nv|=t),ln(n,e)}function tx(n,e){e===0&&(n.mode&1?(e=vd,vd<<=1,!(vd&130023424)&&(vd=4194304)):e=1);var t=Vt();n=Di(n,e),n!==null&&(rd(n,e,t),ln(n,t))}function Q1(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),tx(n,t)}function J1(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(L(314))}s!==null&&s.delete(e),tx(n,t)}var nx;nx=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||an.current)rn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return rn=!1,z1(n,e,t);rn=!!(n.flags&131072)}else rn=!1,Ie&&e.flags&1048576&&aS(e,Df,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ud(n,e),n=e.pendingProps;var i=cc(e,Ft.current);Zo(e,t),i=_v(null,e,s,n,i,t);var r=Ev();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(s)?(r=!0,Mf(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wv(e),i.updater=Lp,e.stateNode=i,i._reactInternals=e,dm(e,s,n,t),e=gm(null,e,s,!0,r,t)):(e.tag=0,Ie&&r&&dv(e),$t(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Ud(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=eC(s),n=Zn(s,n),i){case 0:e=pm(null,e,s,n,t);break e;case 1:e=iw(null,e,s,n,t);break e;case 11:e=nw(null,e,s,n,t);break e;case 14:e=sw(null,e,s,Zn(s.type,n),t);break e}throw Error(L(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zn(s,i),pm(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zn(s,i),iw(n,e,s,i,t);case 3:e:{if(zS(e),n===null)throw Error(L(387));s=e.pendingProps,r=e.memoizedState,i=r.element,dS(n,e),jf(e,s,null,t);var a=e.memoizedState;if(s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=fc(Error(L(423)),e),e=rw(n,e,s,t,i);break e}else if(s!==i){i=fc(Error(L(424)),e),e=rw(n,e,s,t,i);break e}else for(En=Nr(e.stateNode.containerInfo.firstChild),Cn=e,Ie=!0,ps=null,t=uS(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(uc(),s===i){e=Fi(n,e,t);break e}$t(n,e,s,t)}e=e.child}return e;case 5:return fS(e),n===null&&cm(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,a=i.children,im(s,i)?a=null:r!==null&&im(s,r)&&(e.flags|=32),jS(n,e),$t(n,e,a,t),e.child;case 6:return n===null&&cm(e),null;case 13:return BS(n,e,t);case 4:return Av(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=hc(e,null,s,t):$t(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zn(s,i),nw(n,e,s,i,t);case 7:return $t(n,e,e.pendingProps,t),e.child;case 8:return $t(n,e,e.pendingProps.children,t),e.child;case 12:return $t(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,a=i.value,ke(Ff,s._currentValue),s._currentValue=a,r!==null)if(vs(r.value,a)){if(r.children===i.children&&!an.current){e=Fi(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=Ni(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),um(r.return,t,e),o.lanes|=t;break}c=c.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(L(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),um(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}$t(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Zo(e,t),i=Yn(i),s=s(i),e.flags|=1,$t(n,e,s,t),e.child;case 14:return s=e.type,i=Zn(s,e.pendingProps),i=Zn(s.type,i),sw(n,e,s,i,t);case 15:return FS(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Zn(s,i),Ud(n,e),e.tag=1,on(s)?(n=!0,Mf(e)):n=!1,Zo(e,t),MS(e,s,i),dm(e,s,i,t),gm(null,e,s,!0,n,t);case 19:return HS(n,e,t);case 22:return OS(n,e,t)}throw Error(L(156,e.tag))};function sx(n,e){return NA(n,e)}function Z1(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(n,e,t,s){return new Z1(n,e,t,s)}function Dv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function eC(n){if(typeof n=="function")return Dv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ev)return 11;if(n===tv)return 14}return 2}function Ir(n,e){var t=n.alternate;return t===null?(t=Wn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Wd(n,e,t,s,i,r){var a=2;if(s=n,typeof n=="function")Dv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Fo:return co(t.children,i,r,e);case Zy:a=8,i|=8;break;case Fg:return n=Wn(12,t,e,i|2),n.elementType=Fg,n.lanes=r,n;case Og:return n=Wn(13,t,e,i),n.elementType=Og,n.lanes=r,n;case jg:return n=Wn(19,t,e,i),n.elementType=jg,n.lanes=r,n;case fA:return Dp(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case hA:a=10;break e;case dA:a=9;break e;case ev:a=11;break e;case tv:a=14;break e;case $i:a=16,s=null;break e}throw Error(L(130,n==null?n:typeof n,""))}return e=Wn(a,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function co(n,e,t,s){return n=Wn(7,n,s,e),n.lanes=t,n}function Dp(n,e,t,s){return n=Wn(22,n,s,e),n.elementType=fA,n.lanes=t,n.stateNode={isHidden:!1},n}function _g(n,e,t){return n=Wn(6,n,null,e),n.lanes=t,n}function Eg(n,e,t){return e=Wn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function tC(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rg(0),this.expirationTimes=rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rg(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fv(n,e,t,s,i,r,a,o,c){return n=new tC(n,e,t,o,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Wn(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},wv(r),n}function nC(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function ix(n){if(!n)return jr;n=n._reactInternals;e:{if(So(n)!==n||n.tag!==1)throw Error(L(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(n.tag===1){var t=n.type;if(on(t))return iS(n,t,e)}return e}function rx(n,e,t,s,i,r,a,o,c){return n=Fv(t,s,!0,n,i,r,a,o,c),n.context=ix(null),t=n.current,s=Vt(),i=Mr(t),r=Ni(s,i),r.callback=e??null,Rr(t,r,i),n.current.lanes=i,rd(n,i,s),ln(n,s),n}function Fp(n,e,t,s){var i=e.current,r=Vt(),a=Mr(i);return t=ix(t),e.context===null?e.context=t:e.pendingContext=t,e=Ni(r,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Rr(i,e,a),n!==null&&(ys(n,i,a,r),zd(n,i,a)),a}function Gf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function gw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ov(n,e){gw(n,e),(n=n.alternate)&&gw(n,e)}function sC(){return null}var ax=typeof reportError=="function"?reportError:function(n){console.error(n)};function jv(n){this._internalRoot=n}Op.prototype.render=jv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(L(409));Fp(n,e,null,null)};Op.prototype.unmount=jv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;go(function(){Fp(null,n,null,null)}),e[Ii]=null}};function Op(n){this._internalRoot=n}Op.prototype.unstable_scheduleHydration=function(n){if(n){var e=OA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Wi.length&&e!==0&&e<Wi[t].priority;t++);Wi.splice(t,0,n),t===0&&zA(n)}};function zv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function jp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function mw(){}function iC(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=Gf(a);r.call(u)}}var a=rx(e,s,n,0,null,!1,!1,"",mw);return n._reactRootContainer=a,n[Ii]=a.current,wu(n.nodeType===8?n.parentNode:n),go(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var u=Gf(c);o.call(u)}}var c=Fv(n,0,!1,null,null,!1,!1,"",mw);return n._reactRootContainer=c,n[Ii]=c.current,wu(n.nodeType===8?n.parentNode:n),go(function(){Fp(e,c,t,s)}),c}function zp(n,e,t,s,i){var r=t._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var o=i;i=function(){var c=Gf(a);o.call(c)}}Fp(e,a,n,i)}else a=iC(t,e,n,i,s);return Gf(a)}DA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Dc(e.pendingLanes);t!==0&&(iv(e,t|1),ln(e,We()),!(he&6)&&(pc=We()+500,Vr()))}break;case 13:go(function(){var s=Di(n,1);if(s!==null){var i=Vt();ys(s,n,1,i)}}),Ov(n,1)}};rv=function(n){if(n.tag===13){var e=Di(n,134217728);if(e!==null){var t=Vt();ys(e,n,134217728,t)}Ov(n,134217728)}};FA=function(n){if(n.tag===13){var e=Mr(n),t=Di(n,e);if(t!==null){var s=Vt();ys(t,n,e,s)}Ov(n,e)}};OA=function(){return Ae};jA=function(n,e){var t=Ae;try{return Ae=n,e()}finally{Ae=t}};qg=function(n,e,t){switch(e){case"input":if(Hg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=Pp(s);if(!i)throw Error(L(90));gA(s),Hg(s,i)}}}break;case"textarea":yA(n,t);break;case"select":e=t.value,e!=null&&Yo(n,!!t.multiple,e,!1)}};_A=Lv;EA=go;var rC={usingClientEntryPoint:!1,Events:[od,Bo,Pp,xA,bA,Lv]},Tc={findFiberByHostInstance:ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aC={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=TA(n),n===null?null:n.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||sC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{Ep=Pd.inject(aC),Gs=Pd}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rC;Pn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(e))throw Error(L(200));return nC(n,e,null,t)};Pn.createRoot=function(n,e){if(!zv(n))throw Error(L(299));var t=!1,s="",i=ax;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fv(n,1,!1,null,null,t,!1,s,i),n[Ii]=e.current,wu(n.nodeType===8?n.parentNode:n),new jv(e)};Pn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(L(188)):(n=Object.keys(n).join(","),Error(L(268,n)));return n=TA(e),n=n===null?null:n.stateNode,n};Pn.flushSync=function(n){return go(n)};Pn.hydrate=function(n,e,t){if(!jp(e))throw Error(L(200));return zp(null,n,e,!0,t)};Pn.hydrateRoot=function(n,e,t){if(!zv(n))throw Error(L(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",a=ax;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=rx(e,null,n,1,t??null,i,!1,r,a),n[Ii]=e.current,wu(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Op(e)};Pn.render=function(n,e,t){if(!jp(e))throw Error(L(200));return zp(null,n,e,!1,t)};Pn.unmountComponentAtNode=function(n){if(!jp(n))throw Error(L(40));return n._reactRootContainer?(go(function(){zp(null,null,n,!1,function(){n._reactRootContainer=null,n[Ii]=null})}),!0):!1};Pn.unstable_batchedUpdates=Lv;Pn.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!jp(t))throw Error(L(200));if(n==null||n._reactInternals===void 0)throw Error(L(38));return zp(n,e,t,!1,s)};Pn.version="18.3.1-next-f1338f8080-20240426";function ox(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ox)}catch(n){console.error(n)}}ox(),oA.exports=Pn;var oC=oA.exports,lx,yw=oC;lx=yw.createRoot,yw.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Tu.apply(this,arguments)}var Cr;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Cr||(Cr={}));const vw="popstate";function lC(n){n===void 0&&(n={});function e(i,r){let{pathname:a="/",search:o="",hash:c=""}=xo(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),km("",{pathname:a,search:o,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){let a=i.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof r=="string"?r:Xf(r))}function s(i,r){Bp(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(r)+")")}return uC(e,t,s,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Bp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cC(){return Math.random().toString(36).substr(2,8)}function ww(n,e){return{usr:n.state,key:n.key,idx:e}}function km(n,e,t,s){return t===void 0&&(t=null),Tu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?xo(e):e,{state:t,key:e&&e.key||s||cC()})}function Xf(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function xo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function uC(n,e,t,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,a=i.history,o=Cr.Pop,c=null,u=h();u==null&&(u=0,a.replaceState(Tu({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function d(){o=Cr.Pop;let _=h(),v=_==null?null:_-u;u=_,c&&c({action:o,location:A.location,delta:v})}function f(_,v){o=Cr.Push;let w=km(A.location,_,v);t&&t(w,_),u=h()+1;let b=ww(w,u),E=A.createHref(w);try{a.pushState(b,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(E)}r&&c&&c({action:o,location:A.location,delta:1})}function p(_,v){o=Cr.Replace;let w=km(A.location,_,v);t&&t(w,_),u=h();let b=ww(w,u),E=A.createHref(w);a.replaceState(b,"",E),r&&c&&c({action:o,location:A.location,delta:0})}function m(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof _=="string"?_:Xf(_);return w=w.replace(/ $/,"%20"),Ke(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let A={get action(){return o},get location(){return n(i,a)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(vw,d),c=_,()=>{i.removeEventListener(vw,d),c=null}},createHref(_){return e(i,_)},createURL:m,encodeLocation(_){let v=m(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(_){return a.go(_)}};return A}var Aw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Aw||(Aw={}));function hC(n,e,t){return t===void 0&&(t="/"),dC(n,e,t)}function dC(n,e,t,s){let i=typeof e=="string"?xo(e):e,r=Bv(i.pathname||"/",t);if(r==null)return null;let a=cx(n);fC(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=EC(r);o=xC(a[c],u)}return o}function cx(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let i=(r,a,o)=>{let c={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Dr([s,c.relativePath]),h=t.concat(c);r.children&&r.children.length>0&&(Ke(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cx(r.children,e,h,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:AC(u,r.index),routesMeta:h})};return n.forEach((r,a)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))i(r,a);else for(let c of ux(r.path))i(r,a,c)}),e}function ux(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let a=ux(s.join("/")),o=[];return o.push(...a.map(c=>c===""?r:[r,c].join("/"))),i&&o.push(...a),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function fC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:SC(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const pC=/^:[\w-]+$/,gC=3,mC=2,yC=1,vC=10,wC=-2,Sw=n=>n==="*";function AC(n,e){let t=n.split("/"),s=t.length;return t.some(Sw)&&(s+=wC),e&&(s+=mC),t.filter(i=>!Sw(i)).reduce((i,r)=>i+(pC.test(r)?gC:r===""?yC:vC),s)}function SC(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function xC(n,e,t){let{routesMeta:s}=n,i={},r="/",a=[];for(let o=0;o<s.length;++o){let c=s[o],u=o===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=bC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Dr([r,d.pathname]),pathnameBase:NC(Dr([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Dr([r,d.pathnameBase]))}return a}function bC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=_C(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],a=r.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:s.reduce((u,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let A=o[d]||"";a=r.slice(0,r.length-A.length).replace(/(.)\/+$/,"$1")}const m=o[d];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:a,pattern:n}}function _C(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Bp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function EC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Bv(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const CC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kC=n=>CC.test(n);function TC(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?xo(n):n,r;if(t)if(kC(t))r=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Bp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?r=xw(t.substring(1),"/"):r=xw(t,e)}else r=e;return{pathname:r,search:RC(s),hash:LC(i)}}function xw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Cg(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hx(n,e){let t=PC(n);return e?t.map((s,i)=>i===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function dx(n,e,t,s){s===void 0&&(s=!1);let i;typeof n=="string"?i=xo(n):(i=Tu({},n),Ke(!i.pathname||!i.pathname.includes("?"),Cg("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),Cg("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),Cg("#","search","hash",i)));let r=n===""||i.pathname==="",a=r?"/":i.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let c=TC(i,o),u=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Dr=n=>n.join("/").replace(/\/\/+/g,"/"),NC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),RC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function MC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const fx=["post","put","patch","delete"];new Set(fx);const IC=["get",...fx];new Set(IC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Pu.apply(this,arguments)}const Hv=N.createContext(null),DC=N.createContext(null),bo=N.createContext(null),Hp=N.createContext(null),Wr=N.createContext({outlet:null,matches:[],isDataRoute:!1}),px=N.createContext(null);function FC(n,e){let{relative:t}=e===void 0?{}:e;cd()||Ke(!1);let{basename:s,navigator:i}=N.useContext(bo),{hash:r,pathname:a,search:o}=mx(n,{relative:t}),c=a;return s!=="/"&&(c=a==="/"?s:Dr([s,a])),i.createHref({pathname:c,search:o,hash:r})}function cd(){return N.useContext(Hp)!=null}function Up(){return cd()||Ke(!1),N.useContext(Hp).location}function gx(n){N.useContext(bo).static||N.useLayoutEffect(n)}function OC(){let{isDataRoute:n}=N.useContext(Wr);return n?QC():jC()}function jC(){cd()||Ke(!1);let n=N.useContext(Hv),{basename:e,future:t,navigator:s}=N.useContext(bo),{matches:i}=N.useContext(Wr),{pathname:r}=Up(),a=JSON.stringify(hx(i,t.v7_relativeSplatPath)),o=N.useRef(!1);return gx(()=>{o.current=!0}),N.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){s.go(u);return}let d=dx(u,JSON.parse(a),r,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Dr([e,d.pathname])),(h.replace?s.replace:s.push)(d,h.state,h)},[e,s,a,r,n])}function zC(){let{matches:n}=N.useContext(Wr),e=n[n.length-1];return e?e.params:{}}function mx(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=N.useContext(bo),{matches:i}=N.useContext(Wr),{pathname:r}=Up(),a=JSON.stringify(hx(i,s.v7_relativeSplatPath));return N.useMemo(()=>dx(n,JSON.parse(a),r,t==="path"),[n,a,r,t])}function BC(n,e){return HC(n,e)}function HC(n,e,t,s){cd()||Ke(!1);let{navigator:i}=N.useContext(bo),{matches:r}=N.useContext(Wr),a=r[r.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Up(),h;if(e){var d;let _=typeof e=="string"?xo(e):e;c==="/"||(d=_.pathname)!=null&&d.startsWith(c)||Ke(!1),h=_}else h=u;let f=h.pathname||"/",p=f;if(c!=="/"){let _=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let m=hC(n,{pathname:p}),A=GC(m&&m.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Dr([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Dr([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),r,t,s);return e&&A?N.createElement(Hp.Provider,{value:{location:Pu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Cr.Pop}},A):A}function UC(){let n=KC(),e=MC(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:i},t):null,null)}const $C=N.createElement(UC,null);class VC extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(Wr.Provider,{value:this.props.routeContext},N.createElement(px.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WC(n){let{routeContext:e,match:t,children:s}=n,i=N.useContext(Hv);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Wr.Provider,{value:e},s)}function GC(n,e,t,s){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let h=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);h>=0||Ke(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(t&&s&&s.v7_partialHydration)for(let h=0;h<a.length;h++){let d=a[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:p}=t,m=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,d,f)=>{let p,m=!1,A=null,_=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,A=d.route.errorElement||$C,c&&(u<0&&f===0?(JC("route-fallback"),m=!0,_=null):u===f&&(m=!0,_=d.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,f+1)),w=()=>{let b;return p?b=A:m?b=_:d.route.Component?b=N.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,N.createElement(WC,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:b})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?N.createElement(VC,{location:t.location,revalidation:t.revalidation,component:A,error:p,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var yx=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(yx||{}),vx=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(vx||{});function XC(n){let e=N.useContext(Hv);return e||Ke(!1),e}function qC(n){let e=N.useContext(DC);return e||Ke(!1),e}function YC(n){let e=N.useContext(Wr);return e||Ke(!1),e}function wx(n){let e=YC(),t=e.matches[e.matches.length-1];return t.route.id||Ke(!1),t.route.id}function KC(){var n;let e=N.useContext(px),t=qC(),s=wx();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function QC(){let{router:n}=XC(yx.UseNavigateStable),e=wx(vx.UseNavigateStable),t=N.useRef(!1);return gx(()=>{t.current=!0}),N.useCallback(function(i,r){r===void 0&&(r={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Pu({fromRouteId:e},r)))},[n,e])}const bw={};function JC(n,e,t){bw[n]||(bw[n]=!0)}function ZC(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Oc(n){Ke(!1)}function ek(n){let{basename:e="/",children:t=null,location:s,navigationType:i=Cr.Pop,navigator:r,static:a=!1,future:o}=n;cd()&&Ke(!1);let c=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:r,static:a,future:Pu({v7_relativeSplatPath:!1},o)}),[c,o,r,a]);typeof s=="string"&&(s=xo(s));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=s,A=N.useMemo(()=>{let _=Bv(h,c);return _==null?null:{location:{pathname:_,search:d,hash:f,state:p,key:m},navigationType:i}},[c,h,d,f,p,m,i]);return A==null?null:N.createElement(bo.Provider,{value:u},N.createElement(Hp.Provider,{children:t,value:A}))}function tk(n){let{children:e,location:t}=n;return BC(Tm(e),t)}new Promise(()=>{});function Tm(n,e){e===void 0&&(e=[]);let t=[];return N.Children.forEach(n,(s,i)=>{if(!N.isValidElement(s))return;let r=[...e,i];if(s.type===N.Fragment){t.push.apply(t,Tm(s.props.children,r));return}s.type!==Oc&&Ke(!1),!s.props.index||!s.props.children||Ke(!1);let a={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Tm(s.props.children,r)),t.push(a)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pm(){return Pm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Pm.apply(this,arguments)}function nk(n,e){if(n==null)return{};var t={},s=Object.keys(n),i,r;for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function sk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ik(n,e){return n.button===0&&(!e||e==="_self")&&!sk(n)}const rk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ak="6";try{window.__reactRouterVersion=ak}catch{}const ok="startTransition",_w=K_[ok];function lk(n){let{basename:e,children:t,future:s,window:i}=n,r=N.useRef();r.current==null&&(r.current=lC({window:i,v5Compat:!0}));let a=r.current,[o,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},h=N.useCallback(d=>{u&&_w?_w(()=>c(d)):c(d)},[c,u]);return N.useLayoutEffect(()=>a.listen(h),[a,h]),N.useEffect(()=>ZC(s),[s]),N.createElement(ek,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:s})}const ck=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oi=N.forwardRef(function(e,t){let{onClick:s,relative:i,reloadDocument:r,replace:a,state:o,target:c,to:u,preventScrollReset:h,viewTransition:d}=e,f=nk(e,rk),{basename:p}=N.useContext(bo),m,A=!1;if(typeof u=="string"&&uk.test(u)&&(m=u,ck))try{let b=new URL(window.location.href),E=u.startsWith("//")?new URL(b.protocol+u):new URL(u),C=Bv(E.pathname,p);E.origin===b.origin&&C!=null?u=C+E.search+E.hash:A=!0}catch{}let _=FC(u,{relative:i}),v=hk(u,{replace:a,state:o,target:c,preventScrollReset:h,relative:i,viewTransition:d});function w(b){s&&s(b),b.defaultPrevented||v(b)}return N.createElement("a",Pm({},f,{href:m||_,onClick:A||r?s:w,ref:t,target:c}))});var Ew;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ew||(Ew={}));var Cw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Cw||(Cw={}));function hk(n,e){let{target:t,replace:s,state:i,preventScrollReset:r,relative:a,viewTransition:o}=e===void 0?{}:e,c=OC(),u=Up(),h=mx(n,{relative:a});return N.useCallback(d=>{if(ik(d,t)){d.preventDefault();let f=s!==void 0?s:Xf(u)===Xf(h);c(n,{replace:f,state:i,preventScrollReset:r,relative:a,viewTransition:o})}},[u,c,h,s,i,t,n,r,a,o])}function dk(){return y.jsxs("div",{className:"landing",children:[y.jsxs("section",{className:"landing-hero",children:[y.jsxs("div",{className:"hero-copy",children:[y.jsx("p",{className:"eyebrow",children:"Literature Desk"}),y.jsx("h1",{children:"Write research notes the way you think  not the way databases demand"}),y.jsx("p",{className:"muted",children:"Instead of manually filling out forms, Literature Desk lets you paste raw notes or citations while AI extracts the structure you need and helps you explore connections across your work."}),y.jsx("div",{className:"cta-row",children:y.jsx(Oi,{to:"/tool",className:"primary-cta",children:"Open the tool"})})]}),y.jsxs("div",{className:"hero-visual",children:[y.jsxs("div",{className:"hero-card",children:[y.jsxs("div",{className:"hero-card-top",children:[y.jsx("span",{className:"pill",children:"Live extraction"}),y.jsx("span",{className:"pill",children:"Local AI"})]}),y.jsx("h2",{children:"Paste anything, get structured metadata."}),y.jsx("p",{className:"muted",children:"Turn abstracts, citations, and raw notes into a sortable literature index in seconds."}),y.jsxs("div",{className:"hero-metrics",children:[y.jsxs("div",{children:[y.jsx("h3",{children:"Free-form"}),y.jsx("span",{className:"muted",children:"Write naturally"})]}),y.jsxs("div",{children:[y.jsx("h3",{children:"Local-first"}),y.jsx("span",{className:"muted",children:"Private + offline"})]})]})]}),y.jsxs("div",{className:"hero-orbit","aria-hidden":"true",children:[y.jsx("span",{className:"orbit-dot"}),y.jsx("span",{className:"orbit-dot"}),y.jsx("span",{className:"orbit-dot"})]})]})]}),y.jsxs("section",{className:"landing-features",children:[y.jsxs("div",{className:"snapshots-header",children:[y.jsx("h2",{children:"Features"}),y.jsx("p",{className:"muted",children:"Purpose-built for literature reviews that stay focused and connected."})]}),y.jsxs("div",{className:"features-grid",children:[y.jsxs("article",{className:"feature-card",children:[y.jsx("h3",{children:"Free-form research notes"}),y.jsx("p",{className:"muted",children:"Write or paste notes, abstracts, or citations without worrying about structure."})]}),y.jsxs("article",{className:"feature-card",children:[y.jsx("h3",{children:"Automatic metadata extraction"}),y.jsx("p",{className:"muted",children:"AI extracts key details like authors, publication year, and links to build a live literature index."})]}),y.jsxs("article",{className:"feature-card",children:[y.jsx("h3",{children:"Search and query across your notes"}),y.jsx("p",{className:"muted",children:"Ask questions across your entire archive to surface themes, patterns, and connections."})]}),y.jsxs("article",{className:"feature-card",children:[y.jsx("h3",{children:"Literature timeline with trend tracking"}),y.jsx("p",{className:"muted",children:"Ollama extracts key terms from your notes so you can visualise how topics and ideas evolve over time."})]}),y.jsxs("article",{className:"feature-card",children:[y.jsx("h3",{children:"Smart paper recommendations"}),y.jsx("p",{className:"muted",children:"Suggests the next paper to read by analysing citations from uploaded PDFs, your research scope, and what you've already covered."})]}),y.jsxs("article",{className:"feature-card",children:[y.jsx("h3",{children:"Local-first and private"}),y.jsx("p",{className:"muted",children:"Runs entirely on your machine using Ollama - no paid APIs, no data leaving your system."})]})]})]}),y.jsxs("section",{className:"landing-preview",id:"tool-preview",children:[y.jsxs("div",{className:"snapshots-header",children:[y.jsx("h2",{children:"Tool preview"}),y.jsx("p",{className:"muted",children:"Exact components, pre-filled with example entries."})]}),y.jsx("div",{className:"landing-tool-preview",children:y.jsxs("div",{className:"grid-layout",children:[y.jsxs("div",{className:"column left-column",children:[y.jsxs("section",{className:"card note-card preview-card",children:[y.jsx("h2",{children:"New Research Note"}),y.jsx("p",{className:"muted",children:"Paste your raw note, abstract, or citation. The AI will extract the core details and log it for you."}),y.jsxs("form",{className:"note-form",onSubmit:n=>n.preventDefault(),children:[y.jsx("textarea",{defaultValue:`Nguyen et al. (2021) show that mixed-modality prompts improved recall in screening tasks.
Key variables: dataset size, prompt length, reviewer fatigue. DOI: 10.1234/example`,rows:8,readOnly:!0}),y.jsx("div",{className:"note-actions",children:y.jsx("button",{type:"button",disabled:!0,children:"Extract & Save"})})]}),y.jsx("div",{className:"preview-overlay",children:y.jsx("p",{children:"Free-form research notes so you can capture ideas first and structure them later."})})]}),y.jsxs("section",{className:"card note-card preview-card",children:[y.jsx("h2",{children:"Literature Query"}),y.jsx("p",{className:"muted",children:"Ask questions about your saved notes. Ollama will answer using only your local database."}),y.jsxs("form",{className:"note-form",onSubmit:n=>n.preventDefault(),children:[y.jsx("textarea",{defaultValue:"What themes repeat across the last three vision-language papers?",rows:5,readOnly:!0}),y.jsxs("div",{className:"note-actions",children:[y.jsx("button",{type:"button",disabled:!0,children:"Ask"}),y.jsx("button",{type:"button",className:"clear-button",disabled:!0,children:"Clear answer"})]})]}),y.jsx("div",{className:"answer-box",children:"Methods emphasize prompt tuning, multi-view retrieval, and reducing review fatigue via auto-tagging."}),y.jsx("div",{className:"preview-overlay",children:y.jsx("p",{children:"Search and query across your notes to surface themes, patterns, and connections."})})]})]}),y.jsxs("div",{className:"column right-column",children:[y.jsxs("section",{className:"card note-card preview-card",children:[y.jsx("h2",{children:"Research Scope"}),y.jsx("p",{className:"muted",children:"Define the boundaries of your review so notes stay aligned with your research question."}),y.jsxs("div",{className:"scope-tags",children:[y.jsx("span",{className:"keyword-chip",children:"vision-language"}),y.jsx("span",{className:"keyword-chip",children:"screening UX"}),y.jsx("span",{className:"keyword-chip",children:"metadata triage"}),y.jsx("span",{className:"keyword-chip",children:"2021-2024"})]}),y.jsx("textarea",{defaultValue:"Focus on HCI + ML tools that reduce reviewer fatigue during systematic screening. Exclude clinical-only datasets.",rows:4,readOnly:!0}),y.jsx("div",{className:"preview-overlay",children:y.jsx("p",{children:"Set the guardrails for your review so every note stays on scope."})})]}),y.jsxs("section",{className:"card notepad-card preview-card",children:[y.jsx("div",{className:"table-header",children:y.jsx("h2",{children:"Notepad"})}),y.jsx("textarea",{className:"notepad-textarea",defaultValue:`- Build the screening rubric
- Ask advisor about dataset access
- Compare citation counts`,rows:6,readOnly:!0}),y.jsx("div",{className:"preview-overlay",children:y.jsx("p",{children:"Track quick tasks and follow-ups while you read."})})]}),y.jsxs("section",{className:"card table-card preview-card",children:[y.jsxs("div",{className:"table-header",children:[y.jsx("h2",{children:"Literature Index"}),y.jsx("div",{className:"table-actions",children:y.jsxs("div",{className:"count-group",children:[y.jsx("span",{className:"count",children:"3 papers"}),y.jsx("button",{type:"button",className:"add-button",disabled:!0,children:"+"})]})})]}),y.jsx("div",{className:"table-wrap",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"checkbox-cell",children:y.jsx("input",{type:"checkbox",checked:!0,readOnly:!0})}),y.jsx("th",{children:"Code"}),y.jsx("th",{children:"Author"}),y.jsx("th",{children:"Title"}),y.jsx("th",{children:"Link"}),y.jsx("th",{children:"Published"}),y.jsx("th",{children:"Citations"})]})}),y.jsx("tbody",{children:[{id:1,code:"N21",author:"Nguyen",title:"Prompting for Recall",published:"2021",citations:184},{id:2,code:"K22",author:"Keller",title:"Screening Workflows",published:"2022",citations:92},{id:3,code:"M23",author:"Moss",title:"Metadata Triage",published:"2023",citations:41}].map(n=>y.jsxs("tr",{children:[y.jsx("td",{className:"checkbox-cell",children:y.jsx("input",{type:"checkbox",checked:!0,readOnly:!0})}),y.jsx("td",{className:"code-cell",children:n.code}),y.jsx("td",{children:n.author}),y.jsx("td",{children:n.title}),y.jsx("td",{children:y.jsx("span",{className:"ghost-link",children:"Open"})}),y.jsx("td",{children:n.published}),y.jsx("td",{children:n.citations})]},n.id))})]})}),y.jsx("div",{className:"preview-overlay",children:y.jsx("p",{children:"Automatic metadata extraction builds a live literature index for fast reference."})})]})]}),y.jsxs("section",{className:"card timeline-card full-width preview-card",children:[y.jsx("h2",{children:"Literature Timeline"}),y.jsx("p",{className:"muted",children:"A quick, visual sweep of your notes by date."}),y.jsx("div",{className:"timeline-track",children:[{id:1,year:"2021",code:"N21",title:"Prompting for Recall",keywords:["prompting","screening"]},{id:2,year:"2022",code:"K22",title:"Screening Workflows",keywords:["workflow","triage"]},{id:3,year:"2023",code:"M23",title:"Metadata Triage",keywords:["metadata","tags"]}].map(n=>y.jsxs("div",{className:"timeline-item",children:[y.jsx("div",{className:"timeline-dot"}),y.jsxs("div",{className:"timeline-meta",children:[y.jsx("span",{className:"timeline-year",children:n.year}),y.jsx("span",{className:"timeline-code",children:n.code})]}),y.jsx("div",{className:"timeline-title",children:n.title}),y.jsx("div",{className:"timeline-keywords",children:n.keywords.map(e=>y.jsx("span",{className:"keyword-chip",children:e},e))})]},n.id))}),y.jsx("div",{className:"preview-overlay",children:y.jsx("p",{children:"Literature timeline with trend tracking to see how topics evolve over time."})})]}),y.jsxs("section",{className:"card detail-card preview-card full-width",children:[y.jsxs("div",{className:"detail-header",children:[y.jsxs("div",{children:[y.jsx("p",{className:"app-kicker",children:"Paper Detail"}),y.jsx("h2",{children:"Computing Machinery and Intelligence"})]}),y.jsxs("div",{className:"detail-header-actions",children:[y.jsx("button",{type:"button",className:"edit-toggle",disabled:!0,children:"End edit"}),y.jsx("span",{className:"ghost-link",children:"Back to dashboard"})]})]}),y.jsxs("dl",{className:"detail-list",children:[y.jsxs("div",{children:[y.jsx("dt",{children:"Author"}),y.jsx("dd",{children:y.jsx("input",{className:"detail-input",value:"Alan M. Turing",readOnly:!0})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Published"}),y.jsx("dd",{children:y.jsx("input",{className:"detail-input",value:"1950",readOnly:!0})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Citations"}),y.jsx("dd",{children:y.jsx("input",{className:"detail-input",value:"12000",readOnly:!0})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Link"}),y.jsx("dd",{children:y.jsx("input",{className:"detail-input",value:"https://doi.org/10.1093/mind/LIX.236.433",readOnly:!0})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Title"}),y.jsx("dd",{children:y.jsx("input",{className:"detail-input",value:"Computing Machinery and Intelligence",readOnly:!0})})]})]}),y.jsxs("div",{className:"detail-actions",children:[y.jsx("button",{type:"button",disabled:!0,children:"Save changes"}),y.jsx("span",{className:"muted",children:"Saved."})]}),y.jsxs("div",{className:"pdf-block",children:[y.jsx("h3",{children:"Paper PDF"}),y.jsxs("div",{className:"pdf-actions",children:[y.jsx("input",{type:"file",accept:"application/pdf",disabled:!0}),y.jsx("span",{className:"ghost-link",children:"Open PDF"}),y.jsx("span",{className:"muted",children:"turing1950.pdf"}),y.jsx("button",{type:"button",className:"ghost-link",disabled:!0,children:"Remove"})]})]}),y.jsxs("div",{className:"notes-block",children:[y.jsx("h3",{children:"Original Note"}),y.jsx("textarea",{className:"detail-input detail-textarea",value:`proposes the imitation game as a test for machine intelligence
focuses on behavioral criteria over internal mechanism
addresses objections: theological, consciousness, mathematical limits
predicts machines could pass with 30% success by 2000`,rows:4,readOnly:!0}),y.jsx("div",{className:"references-block",children:y.jsx("button",{type:"button",className:"ghost-link",disabled:!0,children:"Display references"})})]}),y.jsx("div",{className:"preview-overlay",children:y.jsx("p",{children:"Edit individual papers to refine metadata, notes, and links as your review evolves."})})]})]})})]}),y.jsxs("section",{className:"landing-cta",children:[y.jsxs("div",{children:[y.jsx("h2",{children:"Ready to build your literature desk?"}),y.jsx("p",{className:"muted",children:"Start with a note, add a paper manually, or query your archive in minutes."})]}),y.jsx(Oi,{to:"/tool",className:"primary-cta",children:"Launch the tool"})]})]})}var cu={};cu.d=(n,e)=>{for(var t in e)cu.o(e,t)&&!cu.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};cu.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var Q=globalThis.pdfjsLib={};cu.d(Q,{AbortException:()=>zr,AnnotationEditorLayer:()=>jy,AnnotationEditorParamsType:()=>ce,AnnotationEditorType:()=>te,AnnotationEditorUIManager:()=>yo,AnnotationLayer:()=>oP,AnnotationMode:()=>Xi,ColorPicker:()=>Zf,DOMSVGFactory:()=>Kv,DrawLayer:()=>Hy,FeatureTest:()=>Wt,GlobalWorkerOptions:()=>ki,ImageKind:()=>Gd,InvalidPDFException:()=>Rm,MissingPDFException:()=>Nu,OPS:()=>es,OutputScale:()=>Mm,PDFDataRangeTransport:()=>Sb,PDFDateString:()=>Gv,PDFWorker:()=>nl,PasswordResponses:()=>mk,PermissionFlag:()=>gk,PixelsPerInch:()=>Br,RenderingCancelledException:()=>Vv,TextLayer:()=>Ru,TouchManager:()=>Qf,UnexpectedResponseException:()=>qf,Util:()=>G,VerbosityLevel:()=>$p,XfaLayer:()=>bb,build:()=>HT,createValidAbsoluteUrl:()=>Ak,fetchData:()=>Xp,getDocument:()=>LT,getFilenameFromUrl:()=>Pk,getPdfFilenameFromUrl:()=>Nk,getXfaPageViewport:()=>Rk,isDataScheme:()=>qp,isPdfFile:()=>Wv,noContextMenu:()=>ws,normalizeUnicode:()=>Ck,setLayerDimensions:()=>mo,shadow:()=>ae,stopEvent:()=>_n,version:()=>BT});const Dt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Ax=[1,0,0,1,0,0],Nm=[.001,0,0,.001,0,0],fk=1e7,kg=1.35,Sn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Xi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pk="pdfjs_internal_editor_",te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},gk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ct={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Gd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Pc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},$p={ERRORS:0,WARNINGS:1,INFOS:5},es={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},mk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vp=$p.WARNINGS;function yk(n){Number.isInteger(n)&&(Vp=n)}function vk(){return Vp}function Wp(n){Vp>=$p.INFOS&&console.log(`Info: ${n}`)}function ne(n){Vp>=$p.WARNINGS&&console.log(`Warning: ${n}`)}function be(n){throw new Error(n)}function Ye(n,e){n||be(e)}function wk(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ak(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Ek(n)}catch{}}const s=e?new URL(n,e):new URL(n);if(wk(s))return s}catch{}return null}function ae(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Gr=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class kw extends Gr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Tg extends Gr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Rm extends Gr{constructor(e){super(e,"InvalidPDFException")}}class Nu extends Gr{constructor(e){super(e,"MissingPDFException")}}class qf extends Gr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Sk extends Gr{constructor(e){super(e,"FormatError")}}class zr extends Gr{constructor(e){super(e,"AbortException")}}function Sx(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&be("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),a=n.subarray(i,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Gp(n){typeof n!="string"&&be("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function xk(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Uv(n){const e=Object.create(null);for(const[t,s]of n)e[t]=s;return e}function bk(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function _k(){try{return new Function(""),!0}catch{return!1}}class Wt{static get isLittleEndian(){return ae(this,"isLittleEndian",bk())}static get isEvalSupported(){return ae(this,"isEvalSupported",_k())}static get isOffscreenCanvasSupported(){return ae(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ae(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ae(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ae(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ae(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Pg=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ri,Xd,Lm;class G{static makeHexColor(e,t,s){return`#${Pg[e]}${Pg[t]}${Pg[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[s,i]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[i,r]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],i[0],r[0],a[0]),Math.min(s[1],i[1],r[1],a[1]),Math.max(s[0],i[0],r[0],a[0]),Math.max(s[1],i[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(s+a)/2,c=Math.sqrt((s+a)**2-4*(s*a-r*i))/2,u=o+c||1,h=o-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[s,r,i,a]}static bezierBoundingBox(e,t,s,i,r,a,o,c,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],x(this,Ri,Lm).call(this,e,s,r,o,t,i,a,c,3*(-e+3*(s-r)+o),6*(e-2*s+r),3*(s-e),u),x(this,Ri,Lm).call(this,e,s,r,o,t,i,a,c,3*(-t+3*(i-a)+c),6*(t-2*i+a),3*(i-t),u),u}}Ri=new WeakSet,Xd=function(e,t,s,i,r,a,o,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*e+3*u*t)+3*f*s)+p*i,A=d*(d*(d*r+3*u*a)+3*f*o)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],A),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],A)},Lm=function(e,t,s,i,r,a,o,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&x(this,Ri,Xd).call(this,e,t,s,i,r,a,o,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),A=2*u;x(this,Ri,Xd).call(this,e,t,s,i,r,a,o,c,(-h+m)/A,f),x(this,Ri,Xd).call(this,e,t,s,i,r,a,o,c,(-h-m)/A,f)},S(G,Ri);function Ek(n){return decodeURIComponent(escape(n))}let Ng=null,Tw=null;function Ck(n){return Ng||(Ng=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Tw=new Map([["","t"]])),n.replaceAll(Ng,(e,t,s)=>t?t.normalize("NFKC"):Tw.get(s))}function kk(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),Sx(n)}const $v="pdfjs_internal_id_";function Tk(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(Sx(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const Ys="http://www.w3.org/2000/svg",Zr=class Zr{};q(Zr,"CSS",96),q(Zr,"PDF",72),q(Zr,"PDF_TO_CSS_UNITS",Zr.CSS/Zr.PDF);let Br=Zr;async function Xp(n,e="text"){if(jc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class ud{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=a,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let m,A,_,v;h===0?(m=Math.abs(u-e[1])*s+r,A=Math.abs(c-e[0])*s+a,_=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(m=Math.abs(c-e[0])*s+r,A=Math.abs(u-e[1])*s+a,_=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[h*s,d*s,f*s,p*s,m-h*s*c-f*s*u,A-d*s*c-p*s*u],this.width=_,this.height=v}get rawDims(){const{userUnit:e,viewBox:t}=this,s=t.map(i=>i*e);return ae(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new ud({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return G.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=G.applyTransform([e[0],e[1]],this.transform),s=G.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return G.applyInverseTransform([e,t],this.transform)}}class Vv extends Gr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function qp(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Wv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Pk(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Nk(n,e="document.pdf"){if(typeof n!="string")return e;if(qp(n))return ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class Pw{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&ne(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ne(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function jc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function ws(n){n.preventDefault()}function _n(n){n.preventDefault(),n.stopPropagation()}var Mu;class Gv{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,Mu)||g(this,Mu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,Mu).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,o+=d):u==="+"&&(a-=h,o-=d),new Date(Date.UTC(s,i,r,a,o,c))}}Mu=new WeakMap,S(Gv,Mu);function Rk(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new ud({viewBox:r,userUnit:1,scale:e,rotation:t})}function Xv(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ne(`Not a valid color format: "${n}"`),[0,0,0])}function Lk(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Xv(s))}e.remove()}function Le(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform();return[e,t,s,i,r,a]}function _s(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform().invertSelf();return[e,t,s,i,r,a]}function mo(n,e,t=!1,s=!0){if(e instanceof ud){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:a}=n,o=Wt.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Mm{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var qi,ia,ts,ra,Iu,Du,rp,xx,Gt,bx,_x,qd,Ex,Dm;const Zs=class Zs{constructor(e){S(this,Gt);S(this,qi,null);S(this,ia,null);S(this,ts);S(this,ra,null);S(this,Iu,null);g(this,ts,e),l(Zs,Du)||g(Zs,Du,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=g(this,qi,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,ts)._uiManager._signal;e.addEventListener("contextmenu",ws,{signal:t}),e.addEventListener("pointerdown",x(Zs,rp,xx),{signal:t});const s=g(this,ra,document.createElement("div"));s.className="buttons",e.append(s);const i=l(this,ts).toolbarPosition;if(i){const{style:r}=e,a=l(this,ts)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,Gt,Ex).call(this),e}get div(){return l(this,qi)}hide(){var e;l(this,qi).classList.add("hidden"),(e=l(this,ia))==null||e.hideDropdown()}show(){var e;l(this,qi).classList.remove("hidden"),(e=l(this,Iu))==null||e.shown()}async addAltText(e){const t=await e.render();x(this,Gt,qd).call(this,t),l(this,ra).prepend(t,l(this,Gt,Dm)),g(this,Iu,e)}addColorPicker(e){g(this,ia,e);const t=e.renderButton();x(this,Gt,qd).call(this,t),l(this,ra).prepend(t,l(this,Gt,Dm))}remove(){var e;l(this,qi).remove(),(e=l(this,ia))==null||e.destroy(),g(this,ia,null)}};qi=new WeakMap,ia=new WeakMap,ts=new WeakMap,ra=new WeakMap,Iu=new WeakMap,Du=new WeakMap,rp=new WeakSet,xx=function(e){e.stopPropagation()},Gt=new WeakSet,bx=function(e){l(this,ts)._focusEventsAllowed=!1,_n(e)},_x=function(e){l(this,ts)._focusEventsAllowed=!0,_n(e)},qd=function(e){const t=l(this,ts)._uiManager._signal;e.addEventListener("focusin",x(this,Gt,bx).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",x(this,Gt,_x).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ws,{signal:t})},Ex=function(){const{editorType:e,_uiManager:t}=l(this,ts),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",l(Zs,Du)[e]),x(this,Gt,qd).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),l(this,ra).append(s)},Dm=function(){const e=document.createElement("div");return e.className="divider",e},S(Zs,rp),S(Zs,Du,null);let Im=Zs;var Fu,aa,oa,Hr,Cx,kx,Tx;class Mk{constructor(e){S(this,Hr);S(this,Fu,null);S(this,aa,null);S(this,oa);g(this,oa,e)}show(e,t,s){const[i,r]=x(this,Hr,kx).call(this,t,s),{style:a}=l(this,aa)||g(this,aa,x(this,Hr,Cx).call(this));e.append(l(this,aa)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,aa).remove()}}Fu=new WeakMap,aa=new WeakMap,oa=new WeakMap,Hr=new WeakSet,Cx=function(){const e=g(this,aa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ws,{signal:l(this,oa)._signal});const t=g(this,Fu,document.createElement("div"));return t.className="buttons",e.append(t),x(this,Hr,Tx).call(this),e},kx=function(e,t){let s=0,i=0;for(const r of e){const a=r.y+r.height;if(a<s)continue;const o=r.x+(t?r.width:0);if(a>s){i=o,s=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,s]},Tx=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,oa)._signal;e.addEventListener("contextmenu",ws,{signal:s}),e.addEventListener("click",()=>{l(this,oa).highlightSelection("floating_button")},{signal:s}),l(this,Fu).append(e)};function Yf(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var ap;class Ik{constructor(){S(this,ap,0)}get id(){return`${pk}${Ot(this,ap)._++}`}}ap=new WeakMap;var sl,Ou,Pt,il,Yd;const Zv=class Zv{constructor(){S(this,il);S(this,sl,kk());S(this,Ou,0);S(this,Pt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ae(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return x(this,il,Yd).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return x(this,il,Yd).call(this,e,e)}async getFromBlob(e,t){const s=await t;return x(this,il,Yd).call(this,e,s)}async getFromId(e){l(this,Pt)||g(this,Pt,new Map);const t=l(this,Pt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Pt)||g(this,Pt,new Map);let s=l(this,Pt).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${l(this,sl)}_${Ot(this,Ou)._++}`,refCounter:1,isSvg:!1},l(this,Pt).set(e,s),l(this,Pt).set(s.id,s),s}getSvgUrl(e){const t=l(this,Pt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;l(this,Pt)||g(this,Pt,new Map);const t=l(this,Pt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,sl)}_`)}};sl=new WeakMap,Ou=new WeakMap,Pt=new WeakMap,il=new WeakSet,Yd=async function(e,t){l(this,Pt)||g(this,Pt,new Map);let s=l(this,Pt).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,sl)}_${Ot(this,Ou)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Xp(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=Zv._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((u,h)=>{o.onload=()=>{s.bitmap=o,s.isSvg=!0,u()},a.onload=async()=>{const d=s.svgUrl=a.result;o.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){ne(i),s=null}return l(this,Pt).set(e,s),s&&l(this,Pt).set(s.id,s),s};let Fm=Zv;var $e,Yi,ju,De;class Dk{constructor(e=128){S(this,$e,[]);S(this,Yi,!1);S(this,ju);S(this,De,-1);g(this,ju,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),l(this,Yi))return;const c={cmd:e,undo:t,post:s,type:r};if(l(this,De)===-1){l(this,$e).length>0&&(l(this,$e).length=0),g(this,De,0),l(this,$e).push(c);return}if(a&&l(this,$e)[l(this,De)].type===r){o&&(c.undo=l(this,$e)[l(this,De)].undo),l(this,$e)[l(this,De)]=c;return}const u=l(this,De)+1;u===l(this,ju)?l(this,$e).splice(0,1):(g(this,De,u),u<l(this,$e).length&&l(this,$e).splice(u)),l(this,$e).push(c)}undo(){if(l(this,De)===-1)return;g(this,Yi,!0);const{undo:e,post:t}=l(this,$e)[l(this,De)];e(),t==null||t(),g(this,Yi,!1),g(this,De,l(this,De)-1)}redo(){if(l(this,De)<l(this,$e).length-1){g(this,De,l(this,De)+1),g(this,Yi,!0);const{cmd:e,post:t}=l(this,$e)[l(this,De)];e(),t==null||t(),g(this,Yi,!1)}}hasSomethingToUndo(){return l(this,De)!==-1}hasSomethingToRedo(){return l(this,De)<l(this,$e).length-1}cleanType(e){if(l(this,De)!==-1){for(let t=l(this,De);t>=0;t--)if(l(this,$e)[t].type!==e){l(this,$e).splice(t+1,l(this,De)-t),g(this,De,t);return}l(this,$e).length=0,g(this,De,-1)}}destroy(){g(this,$e,null)}}$e=new WeakMap,Yi=new WeakMap,ju=new WeakMap,De=new WeakMap;var op,Px;class hd{constructor(e){S(this,op);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Wt.platform;for(const[s,i,r={}]of e)for(const a of s){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(x(this,op,Px).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:o=null}}=s;o&&!o(e,t)||(i.bind(e,...a,t)(),r||_n(t))}}op=new WeakSet,Px=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const lp=class lp{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Lk(e),ae(this,"_colors",e)}convert(e){const t=Xv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,a)=>r===t[a]))return lp._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?G.makeHexColor(...t):e}};q(lp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Om=lp;var rl,cn,et,gt,al,ni,ol,In,Ki,la,ll,ca,Ts,ns,ua,zu,Bu,cl,Hu,Ps,Qi,ul,Ji,Ns,cp,Zi,Uu,er,ha,$u,Vu,rt,ve,si,da,Wu,Gu,tr,Rs,ii,Xu,Dn,F,Kd,jm,Nx,Rx,Qd,Lx,Mx,Ix,zm,Dx,Bm,Hm,Fx,jt,Ks,Ox,jx,Um,zx,zc,$m;const Xo=class Xo{constructor(e,t,s,i,r,a,o,c,u,h,d,f,p){S(this,F);S(this,rl,new AbortController);S(this,cn,null);S(this,et,new Map);S(this,gt,new Map);S(this,al,null);S(this,ni,null);S(this,ol,null);S(this,In,new Dk);S(this,Ki,null);S(this,la,null);S(this,ll,0);S(this,ca,new Set);S(this,Ts,null);S(this,ns,null);S(this,ua,new Set);q(this,"_editorUndoBar",null);S(this,zu,!1);S(this,Bu,!1);S(this,cl,!1);S(this,Hu,null);S(this,Ps,null);S(this,Qi,null);S(this,ul,null);S(this,Ji,!1);S(this,Ns,null);S(this,cp,new Ik);S(this,Zi,!1);S(this,Uu,!1);S(this,er,null);S(this,ha,null);S(this,$u,null);S(this,Vu,null);S(this,rt,te.NONE);S(this,ve,new Set);S(this,si,null);S(this,da,null);S(this,Wu,null);S(this,Gu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,tr,[0,0]);S(this,Rs,null);S(this,ii,null);S(this,Xu,null);S(this,Dn,null);const m=this._signal=l(this,rl).signal;g(this,ii,e),g(this,Xu,t),g(this,al,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:m}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),i._on("setpreference",this.onSetPreference.bind(this),{signal:m}),i._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:m}),x(this,F,Lx).call(this),x(this,F,Fx).call(this),x(this,F,zm).call(this),g(this,ni,r.annotationStorage),g(this,Hu,r.filterFactory),g(this,da,a),g(this,ul,o||null),g(this,zu,c),g(this,Bu,u),g(this,cl,h),g(this,Vu,d||null),this.viewParameters={realScale:Br.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=Xo.prototype,t=a=>l(a,ii).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ae(this,"_keyboardManager",new hd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,ii).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,ii).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r;(e=l(this,Dn))==null||e.resolve(),g(this,Dn,null),(t=l(this,rl))==null||t.abort(),g(this,rl,null),this._signal=null;for(const a of l(this,gt).values())a.destroy();l(this,gt).clear(),l(this,et).clear(),l(this,ua).clear(),g(this,cn,null),l(this,ve).clear(),l(this,In).destroy(),(s=l(this,al))==null||s.destroy(),(i=l(this,Ns))==null||i.hide(),g(this,Ns,null),l(this,Ps)&&(clearTimeout(l(this,Ps)),g(this,Ps,null)),l(this,Rs)&&(clearTimeout(l(this,Rs)),g(this,Rs,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Vu)}get useNewAltTextFlow(){return l(this,Bu)}get useNewAltTextWhenAddingImage(){return l(this,cl)}get hcmFilter(){return ae(this,"hcmFilter",l(this,da)?l(this,Hu).addHCMFilter(l(this,da).foreground,l(this,da).background):"none")}get direction(){return ae(this,"direction",getComputedStyle(l(this,ii)).direction)}get highlightColors(){return ae(this,"highlightColors",l(this,ul)?new Map(l(this,ul).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ae(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,la,e)}setMainHighlightColorPicker(e){g(this,$u,e)}editAltText(e,t=!1){var s;(s=l(this,al))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":g(this,cl,t);break}}onPageChanging({pageNumber:e}){g(this,ll,e-1)}focusMainContainer(){l(this,ii).focus()}findParent(e,t){for(const s of l(this,gt).values()){const{x:i,y:r,width:a,height:o}=s.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=r&&t<=r+o)return s}return null}disableUserSelect(e=!1){l(this,Xu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,ua).add(e)}removeShouldRescale(e){l(this,ua).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Br.PDF_TO_CSS_UNITS;for(const s of l(this,ua))s.onScaleChanging();(t=l(this,la))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a}=t,o=t.toString(),u=x(this,F,Kd).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=x(this,F,jm).call(this,u),f=l(this,rt)===te.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(te.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,ni)&&!l(this,ni).has(e.id)&&l(this,ni).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Ji)&&(g(this,Ji,!1),x(this,F,Qd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,ve))if(t.div.contains(e)){g(this,ha,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,ha))return;const[e,t]=l(this,ha);g(this,ha,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){x(this,F,zm).call(this),x(this,F,Bm).call(this)}removeEditListeners(){x(this,F,Dx).call(this),x(this,F,Hm).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of l(this,ns))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of l(this,ns))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=l(this,cn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of l(this,ve)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of l(this,ns))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){ne(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const a=()=>{for(const c of r)x(this,F,Um).call(this,c);x(this,F,$m).call(this,r)},o=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){ne(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,rt)!==te.NONE&&!this.isEditorHandlingKeyboard&&Xo._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ji)&&(g(this,Ji,!1),x(this,F,Qd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(x(this,F,Mx).call(this),x(this,F,Bm).call(this),x(this,F,jt).call(this,{isEditing:l(this,rt)!==te.NONE,isEmpty:x(this,F,zc).call(this),hasSomethingToUndo:l(this,In).hasSomethingToUndo(),hasSomethingToRedo:l(this,In).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,F,Ix).call(this),x(this,F,Hm).call(this),x(this,F,jt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,ns)){g(this,ns,e);for(const t of l(this,ns))x(this,F,Ks).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,cp).id}get currentLayer(){return l(this,gt).get(l(this,ll))}getLayer(e){return l(this,gt).get(e)}get currentPageIndex(){return l(this,ll)}addLayer(e){l(this,gt).set(e.pageIndex,e),l(this,Zi)?e.enable():e.disable()}removeLayer(e){l(this,gt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){var i;if(l(this,rt)!==e&&!(l(this,Dn)&&(await l(this,Dn).promise,!l(this,Dn)))){if(g(this,Dn,Promise.withResolvers()),g(this,rt,e),e===te.NONE){this.setEditingState(!1),x(this,F,jx).call(this),(i=this._editorUndoBar)==null||i.hide(),l(this,Dn).resolve();return}this.setEditingState(!0),await x(this,F,Ox).call(this),this.unselectAll();for(const r of l(this,gt).values())r.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),l(this,Dn).resolve();return}for(const r of l(this,et).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,Dn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,rt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(l(this,ns)){switch(e){case ce.CREATE:this.currentLayer.addNewEditor();return;case ce.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,$u))==null||s.updateColor(t);break;case ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Wu)||g(this,Wu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of l(this,ve))i.updateParams(e,t);for(const i of l(this,ns))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const a of l(this,et).values())a.editorType===e&&a.show(t);(((r=l(this,Wu))==null?void 0:r.get(ce.HIGHLIGHT_SHOW_ALL))??!0)!==t&&x(this,F,Ks).call(this,[[ce.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Uu)!==e){g(this,Uu,e);for(const t of l(this,gt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of l(this,et).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return l(this,et).get(e)}addEditor(e){l(this,et).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,Ps)&&clearTimeout(l(this,Ps)),g(this,Ps,setTimeout(()=>{this.focusMainContainer(),g(this,Ps,null)},0))),l(this,et).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,ca).has(e.annotationElementId))&&((t=l(this,ni))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,ca).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,ca).has(e)}removeDeletedAnnotationElement(e){l(this,ca).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,cn)!==e&&(g(this,cn,e),e&&x(this,F,Ks).call(this,e.propertiesToUpdate))}updateUI(e){l(this,F,zx)===e&&x(this,F,Ks).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){x(this,F,Ks).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,ve).has(e)){l(this,ve).delete(e),e.unselect(),x(this,F,jt).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ve).add(e),e.select(),x(this,F,Ks).call(this,e.propertiesToUpdate),x(this,F,jt).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=l(this,la))==null||t.commitOrRemove();for(const s of l(this,ve))s!==e&&s.unselect();l(this,ve).clear(),l(this,ve).add(e),e.select(),x(this,F,Ks).call(this,e.propertiesToUpdate),x(this,F,jt).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,ve).has(e)}get firstSelectedEditor(){return l(this,ve).values().next().value}unselect(e){e.unselect(),l(this,ve).delete(e),x(this,F,jt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ve).size!==0}get isEnterHandled(){return l(this,ve).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,In).undo(),x(this,F,jt).call(this,{hasSomethingToUndo:l(this,In).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,F,zc).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,In).redo(),x(this,F,jt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,In).hasSomethingToRedo(),isEmpty:x(this,F,zc).call(this)})}addCommands(e){l(this,In).add(e),x(this,F,jt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,F,zc).call(this)})}cleanUndoStack(e){l(this,In).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,ve)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)x(this,F,Um).call(this,a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,cn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,cn)||this.hasSelection}selectAll(){for(const e of l(this,ve))e.commit();x(this,F,$m).call(this,l(this,et).values())}unselectAll(){var e;if(!(l(this,cn)&&(l(this,cn).commitOrRemove(),l(this,rt)!==te.NONE))&&!((e=l(this,la))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,ve))t.unselect();l(this,ve).clear(),x(this,F,jt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,tr)[0]+=e,l(this,tr)[1]+=t;const[i,r]=l(this,tr),a=[...l(this,ve)],o=1e3;l(this,Rs)&&clearTimeout(l(this,Rs)),g(this,Rs,setTimeout(()=>{g(this,Rs,null),l(this,tr)[0]=l(this,tr)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,et).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of a)l(this,et).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,Ts,new Map);for(const e of l(this,ve))l(this,Ts).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ts))return!1;this.disableUserSelect(!1);const e=l(this,Ts);g(this,Ts,null);let t=!1;for(const[{x:i,y:r,pageIndex:a},o]of e)o.newX=i,o.newY=r,o.newPageIndex=a,t||(t=i!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const s=(i,r,a,o)=>{if(l(this,et).has(i.id)){const c=l(this,gt).get(o);c?i._setParentAndPosition(c,r,a):(i.pageIndex=o,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:o}]of e)s(i,r,a,o)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:o}]of e)s(i,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Ts))for(const s of l(this,Ts).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,ve).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,cn)===e}getActive(){return l(this,cn)}getMode(){return l(this,rt)}get imageManager(){return ae(this,"imageManager",new Fm)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,d,f)=>({x:(h-i)/a,y:1-(u+d-s)/r,width:f/a,height:d/r});break;case"180":o=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/a,width:d/r,height:f/a});break;case"270":o=(u,h,d,f)=>({x:1-(h+f-i)/a,y:(u-s)/r,width:f/a,height:d/r});break;default:o=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/a,width:d/r,height:f/a});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:A}of d.getClientRects())m===0||A===0||c.push(o(f,p,m,A))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,ol)||g(this,ol,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,ol))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=l(this,ol))==null?void 0:i.get(e.data.id);if(!t)return;const s=l(this,ni).getRawValue(t);s&&(l(this,rt)===te.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};rl=new WeakMap,cn=new WeakMap,et=new WeakMap,gt=new WeakMap,al=new WeakMap,ni=new WeakMap,ol=new WeakMap,In=new WeakMap,Ki=new WeakMap,la=new WeakMap,ll=new WeakMap,ca=new WeakMap,Ts=new WeakMap,ns=new WeakMap,ua=new WeakMap,zu=new WeakMap,Bu=new WeakMap,cl=new WeakMap,Hu=new WeakMap,Ps=new WeakMap,Qi=new WeakMap,ul=new WeakMap,Ji=new WeakMap,Ns=new WeakMap,cp=new WeakMap,Zi=new WeakMap,Uu=new WeakMap,er=new WeakMap,ha=new WeakMap,$u=new WeakMap,Vu=new WeakMap,rt=new WeakMap,ve=new WeakMap,si=new WeakMap,da=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,tr=new WeakMap,Rs=new WeakMap,ii=new WeakMap,Xu=new WeakMap,Dn=new WeakMap,F=new WeakSet,Kd=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},jm=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of l(this,gt).values())if(s.hasTextLayer(e))return s;return null},Nx=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=x(this,F,Kd).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(l(this,Ns)||g(this,Ns,new Mk(this)),l(this,Ns).show(s,i,this.direction==="ltr"))},Rx=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){l(this,si)&&((r=l(this,Ns))==null||r.hide(),g(this,si,null),x(this,F,jt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,si))return;const i=x(this,F,Kd).call(this,e).closest(".textLayer");if(!i){l(this,si)&&((a=l(this,Ns))==null||a.hide(),g(this,si,null),x(this,F,jt).call(this,{hasSelectedText:!1}));return}if((o=l(this,Ns))==null||o.hide(),g(this,si,t),x(this,F,jt).call(this,{hasSelectedText:!0}),!(l(this,rt)!==te.HIGHLIGHT&&l(this,rt)!==te.NONE)&&(l(this,rt)===te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,Ji,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,rt)===te.HIGHLIGHT?x(this,F,jm).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&x(this,F,Qd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Qd=function(e=""){l(this,rt)===te.HIGHLIGHT?this.highlightSelection(e):l(this,zu)&&x(this,F,Nx).call(this)},Lx=function(){document.addEventListener("selectionchange",x(this,F,Rx).bind(this),{signal:this._signal})},Mx=function(){if(l(this,Qi))return;g(this,Qi,new AbortController);const e=this.combinedSignal(l(this,Qi));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Ix=function(){var e;(e=l(this,Qi))==null||e.abort(),g(this,Qi,null)},zm=function(){if(l(this,er))return;g(this,er,new AbortController);const e=this.combinedSignal(l(this,er));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Dx=function(){var e;(e=l(this,er))==null||e.abort(),g(this,er,null)},Bm=function(){if(l(this,Ki))return;g(this,Ki,new AbortController);const e=this.combinedSignal(l(this,Ki));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Hm=function(){var e;(e=l(this,Ki))==null||e.abort(),g(this,Ki,null)},Fx=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},jt=function(e){Object.entries(e).some(([s,i])=>l(this,Gu)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Gu),e)}),l(this,rt)===te.HIGHLIGHT&&e.hasSelectedEditor===!1&&x(this,F,Ks).call(this,[[ce.HIGHLIGHT_FREE,!0]]))},Ks=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Ox=async function(){if(!l(this,Zi)){g(this,Zi,!0);const e=[];for(const t of l(this,gt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,et).values())t.enable()}},jx=function(){if(this.unselectAll(),l(this,Zi)){g(this,Zi,!1);for(const e of l(this,gt).values())e.disable();for(const e of l(this,et).values())e.disable()}},Um=function(e){const t=l(this,gt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},zx=function(){let e=null;for(e of l(this,ve));return e},zc=function(){if(l(this,et).size===0)return!0;if(l(this,et).size===1)for(const e of l(this,et).values())return e.isEmpty();return!1},$m=function(e){for(const t of l(this,ve))t.unselect();l(this,ve).clear();for(const t of e)t.isEmpty()||(l(this,ve).add(t),t.select());x(this,F,jt).call(this,{hasSelectedEditor:this.hasSelection})},q(Xo,"TRANSLATE_SMALL",1),q(Xo,"TRANSLATE_BIG",10);let yo=Xo;var at,Ls,ss,hl,Ms,un,dl,Is,Zt,ri,fa,Ds,nr,gs,Bc,Jd;const zt=class zt{constructor(e){S(this,gs);S(this,at,null);S(this,Ls,!1);S(this,ss,null);S(this,hl,null);S(this,Ms,null);S(this,un,null);S(this,dl,!1);S(this,Is,null);S(this,Zt,null);S(this,ri,null);S(this,fa,null);S(this,Ds,!1);g(this,Zt,e),g(this,Ds,e._uiManager.useNewAltTextFlow),l(zt,nr)||g(zt,nr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){zt._l10n??(zt._l10n=e)}async render(){const e=g(this,ss,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=g(this,hl,document.createElement("span"));e.append(t),l(this,Ds)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(zt,nr).missing),t.setAttribute("data-l10n-id",l(zt,nr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,Zt)._uiManager._signal;e.addEventListener("contextmenu",ws,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),l(this,Zt)._uiManager.editAltText(l(this,Zt)),l(this,Ds)&&l(this,Zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,gs,Bc)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(g(this,dl,!0),i(r))},{signal:s}),await x(this,gs,Jd).call(this),e}finish(){l(this,ss)&&(l(this,ss).focus({focusVisible:l(this,dl)}),g(this,dl,!1))}isEmpty(){return l(this,Ds)?l(this,at)===null:!l(this,at)&&!l(this,Ls)}hasData(){return l(this,Ds)?l(this,at)!==null||!!l(this,ri):this.isEmpty()}get guessedText(){return l(this,ri)}async setGuessedText(e){l(this,at)===null&&(g(this,ri,e),g(this,fa,await zt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),x(this,gs,Jd).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Ds)||l(this,at)){(t=l(this,Is))==null||t.remove(),g(this,Is,null);return}if(!l(this,Is)){const s=g(this,Is,document.createElement("div"));s.className="noAltTextBadge",l(this,Zt).div.append(s)}l(this,Is).classList.toggle("hidden",!e)}serialize(e){let t=l(this,at);return!e&&l(this,ri)===t&&(t=l(this,fa)),{altText:t,decorative:l(this,Ls),guessedText:l(this,ri),textWithDisclaimer:l(this,fa)}}get data(){return{altText:l(this,at),decorative:l(this,Ls)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(g(this,ri,s),g(this,fa,i)),!(l(this,at)===e&&l(this,Ls)===t)&&(r||(g(this,at,e),g(this,Ls,t)),x(this,gs,Jd).call(this))}toggle(e=!1){l(this,ss)&&(!e&&l(this,un)&&(clearTimeout(l(this,un)),g(this,un,null)),l(this,ss).disabled=!e)}shown(){l(this,Zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,gs,Bc)}})}destroy(){var e,t;(e=l(this,ss))==null||e.remove(),g(this,ss,null),g(this,hl,null),g(this,Ms,null),(t=l(this,Is))==null||t.remove(),g(this,Is,null)}};at=new WeakMap,Ls=new WeakMap,ss=new WeakMap,hl=new WeakMap,Ms=new WeakMap,un=new WeakMap,dl=new WeakMap,Is=new WeakMap,Zt=new WeakMap,ri=new WeakMap,fa=new WeakMap,Ds=new WeakMap,nr=new WeakMap,gs=new WeakSet,Bc=function(){return l(this,at)&&"added"||l(this,at)===null&&this.guessedText&&"review"||"missing"},Jd=async function(){var i,r,a;const e=l(this,ss);if(!e)return;if(l(this,Ds)){if(e.classList.toggle("done",!!l(this,at)),e.setAttribute("data-l10n-id",l(zt,nr)[l(this,gs,Bc)]),(i=l(this,hl))==null||i.setAttribute("data-l10n-id",l(zt,nr)[`${l(this,gs,Bc)}-label`]),!l(this,at)){(r=l(this,Ms))==null||r.remove();return}}else{if(!l(this,at)&&!l(this,Ls)){e.classList.remove("done"),(a=l(this,Ms))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Ms);if(!t){g(this,Ms,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Zt).id}`;const o=100,c=l(this,Zt)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,un)),g(this,un,null)},{once:!0}),e.addEventListener("mouseenter",()=>{g(this,un,setTimeout(()=>{g(this,un,null),l(this,Ms).classList.add("show"),l(this,Zt)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,un)&&(clearTimeout(l(this,un)),g(this,un,null)),(u=l(this,Ms))==null||u.classList.remove("show")},{signal:c})}l(this,Ls)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,at)),t.parentNode||e.append(t);const s=l(this,Zt).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},S(zt,nr,null),q(zt,"_l10n",null);let Kf=zt;var qu,pa,Yu,Ku,Qu,Ju,Zu,fl,ai,ga,sr,ji,Bx,Hx,Vm;const e0=class e0{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:a=null,signal:o}){S(this,ji);S(this,qu);S(this,pa,!1);S(this,Yu,null);S(this,Ku);S(this,Qu);S(this,Ju);S(this,Zu);S(this,fl);S(this,ai,null);S(this,ga);S(this,sr,null);g(this,qu,e),g(this,Yu,s),g(this,Ku,t),g(this,Qu,i),g(this,Ju,r),g(this,Zu,a),g(this,ga,new AbortController),g(this,fl,AbortSignal.any([o,l(this,ga).signal])),e.addEventListener("touchstart",x(this,ji,Bx).bind(this),{passive:!1,signal:l(this,fl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ae(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=l(this,ga))==null||e.abort(),g(this,ga,null)}};qu=new WeakMap,pa=new WeakMap,Yu=new WeakMap,Ku=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,fl=new WeakMap,ai=new WeakMap,ga=new WeakMap,sr=new WeakMap,ji=new WeakSet,Bx=function(e){var i,r,a;if((i=l(this,Ku))!=null&&i.call(this)||e.touches.length<2)return;if(!l(this,sr)){g(this,sr,new AbortController);const o=AbortSignal.any([l(this,fl),l(this,sr).signal]),c=l(this,qu),u={signal:o,passive:!1};c.addEventListener("touchmove",x(this,ji,Hx).bind(this),u),c.addEventListener("touchend",x(this,ji,Vm).bind(this),u),c.addEventListener("touchcancel",x(this,ji,Vm).bind(this),u),(r=l(this,Qu))==null||r.call(this)}if(_n(e),e.touches.length!==2||(a=l(this,Yu))!=null&&a.call(this)){g(this,ai,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),g(this,ai,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},Hx=function(e){var E;if(!l(this,ai)||e.touches.length!==2)return;let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:a,screenY:o}=s,c=l(this,ai),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,m=f-h,A=a-i,_=o-r,v=Math.hypot(A,_)||1,w=Math.hypot(p,m)||1;if(!l(this,pa)&&Math.abs(w-v)<=e0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=a,c.touch1Y=o,e.preventDefault(),!l(this,pa)){g(this,pa,!0);return}const b=[(i+a)/2,(r+o)/2];(E=l(this,Ju))==null||E.call(this,b,w,v)},Vm=function(e){var t;l(this,sr).abort(),g(this,sr,null),(t=l(this,Zu))==null||t.call(this),l(this,ai)&&(e.preventDefault(),g(this,ai,null),g(this,pa,!1))};let Qf=e0;var ma,is,Pe,pl,ir,eh,ya,mt,va,oi,rr,th,wa,hn,nh,Aa,li,Fs,gl,ml,Fn,Sa,sh,up,Y,Wm,ih,Gm,Zd,Ux,$x,Xm,ef,qm,Vx,Wx,Gx,Ym,Xx,Km,qx,Yx,Kx,Qm,Hc;const se=class se{constructor(e){S(this,Y);S(this,ma,null);S(this,is,null);S(this,Pe,null);S(this,pl,!1);S(this,ir,null);S(this,eh,"");S(this,ya,!1);S(this,mt,null);S(this,va,null);S(this,oi,null);S(this,rr,null);S(this,th,"");S(this,wa,!1);S(this,hn,null);S(this,nh,!1);S(this,Aa,!1);S(this,li,!1);S(this,Fs,null);S(this,gl,0);S(this,ml,0);S(this,Fn,null);S(this,Sa,null);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);S(this,sh,!1);S(this,up,se._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=se.prototype._resizeWithKeyboard,t=yo.TRANSLATE_SMALL,s=yo.TRANSLATE_BIG;return ae(this,"_resizerKeyboardManager",new hd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],se.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ae(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Fk({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(se._l10n??(se._l10n=e),se._l10nResizer||(se._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),se._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);se._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){be("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,sh)}set _isDraggable(e){var t;g(this,sh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,up)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):x(this,Y,Hc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,wa)?g(this,wa,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,a]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/a,this.fixAndSetPosition()}translate(e,t){x(this,Y,Wm).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,hn)||g(this,hn,[this.x,this.y,this.width,this.height]),x(this,Y,Wm).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,hn)||g(this,hn,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,u]=this.getBaseTranslation();a+=c,o+=u;const{style:h}=s;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,hn)&&(l(this,hn)[0]!==this.x||l(this,hn)[1]!==this.y)}get _hasBeenResized(){return!!l(this,hn)&&(l(this,hn)[2]!==this.width||l(this,hn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=se,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:a,width:o,height:c}=this;if(o*=s,c*=i,r*=s,a*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(s-o,r)),a=Math.max(0,Math.min(i-c,a));break;case 90:r=Math.max(0,Math.min(s-c,r)),a=Math.min(i,Math.max(o,a));break;case 180:r=Math.min(s,Math.max(o,r)),a=Math.min(i,Math.max(c,a));break;case 270:r=Math.min(s,Math.max(c,r)),a=Math.max(0,Math.min(i-o,a));break}this.x=r/=s,this.y=a/=i;const[u,h]=this.getBaseTranslation();r+=u,a+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return x(s=se,ih,Gm).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return x(s=se,ih,Gm).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,l(this,ya)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!l(this,ya)&&t.endsWith("%");if(i&&r)return;const[a,o]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!l(this,ya)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,Pe))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,Aa)?this._editToolbar:(this._editToolbar=new Im(this),this.div.append(this._editToolbar.render()),l(this,Pe)&&await this._editToolbar.addAltText(l(this,Pe)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Pe))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Pe)||(Kf.initialize(se._l10n),g(this,Pe,new Kf(this)),l(this,ma)&&(l(this,Pe).data=l(this,ma),g(this,ma,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Pe))==null?void 0:e.data}set altTextData(e){l(this,Pe)&&(l(this,Pe).data=e)}get guessedAltText(){var e;return(e=l(this,Pe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Pe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Pe))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Pe)&&!l(this,Pe).isEmpty()}hasAltTextData(){var e;return((e=l(this,Pe))==null?void 0:e.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,pl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,Y,Km).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Yf(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Sa)||g(this,Sa,new Qf({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(this,Y,Vx).bind(this),onPinching:x(this,Y,Wx).bind(this),onPinchEnd:x(this,Y,Gx).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(e){const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(g(this,wa,!0),this._isDraggable){x(this,Y,Xx).call(this,e);return}x(this,Y,Ym).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Fs)&&clearTimeout(l(this,Fs)),g(this,Fs,setTimeout(()=>{var e;g(this,Fs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,f=this.y*a,p=this.width*r,m=this.height*a;switch(s){case 0:return[d+u+o,a-f-h-m+c,d+u+p+o,a-f-h+c];case 90:return[d+h+o,a-f+u+c,d+h+m+o,a-f+u+p+c];case 180:return[d-u-p+o,a-f+h+c,d-u+o,a-f+h+m+c];case 270:return[d-h-m+o,a-f-u-p+c,d-h+o,a-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,a]=e,o=r-s,c=a-i;switch(this.rotation){case 0:return[s,t-a,o,c];case 90:return[s,t-i,c,o];case 180:return[r,t-i,o,c];case 270:return[r,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){g(this,Aa,!0)}disableEditMode(){g(this,Aa,!1)}isInEditMode(){return l(this,Aa)}shouldGetKeyboardEvents(){return l(this,li)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&i>0&&e<r&&s>0}rebuild(){x(this,Y,Km).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){be("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});i.rotation=e.rotation,g(i,ma,e.accessibilityData);const[r,a]=i.pageDimensions,[o,c,u,h]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/r,i.y=c/a,i.width=u/r,i.height=h/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,rr))==null||e.abort(),g(this,rr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Fs)&&(clearTimeout(l(this,Fs)),g(this,Fs,null)),x(this,Y,Hc).call(this),this.removeEditToolbar(),l(this,Fn)){for(const s of l(this,Fn).values())clearTimeout(s);g(this,Fn,null)}this.parent=null,(t=l(this,Sa))==null||t.destroy(),g(this,Sa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,Y,Ux).call(this),l(this,mt).classList.remove("hidden"),Yf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),g(this,oi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,mt).children;if(!l(this,is)){g(this,is,Array.from(t));const a=x(this,Y,qx).bind(this),o=x(this,Y,Yx).bind(this),c=this._uiManager._signal;for(const u of l(this,is)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",x(this,Y,Kx).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",se._l10nResizer[h])}}const s=l(this,is)[0];let i=0;for(const a of t){if(a===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,is).length/4);if(r!==i){if(r<i)for(let o=0;o<i-r;o++)l(this,mt).append(l(this,mt).firstChild);else if(r>i)for(let o=0;o<r-i;o++)l(this,mt).firstChild.before(l(this,mt).lastChild);let a=0;for(const o of t){const u=l(this,is)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",se._l10nResizer[u])}}x(this,Y,Qm).call(this,0),g(this,li,!0),l(this,mt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,li)&&x(this,Y,qm).call(this,l(this,th),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(this,Y,Hc).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=l(this,Pe))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,i,r;(e=l(this,mt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=l(this,Pe))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,nh)}set isEditing(e){g(this,nh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){g(this,ya,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Fn)||g(this,Fn,new Map);const{action:s}=e;let i=l(this,Fn).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),l(this,Fn).delete(s),l(this,Fn).size===0&&g(this,Fn,null)},se._telemetryTimeout),l(this,Fn).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),g(this,pl,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,pl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ma=new WeakMap,is=new WeakMap,Pe=new WeakMap,pl=new WeakMap,ir=new WeakMap,eh=new WeakMap,ya=new WeakMap,mt=new WeakMap,va=new WeakMap,oi=new WeakMap,rr=new WeakMap,th=new WeakMap,wa=new WeakMap,hn=new WeakMap,nh=new WeakMap,Aa=new WeakMap,li=new WeakMap,Fs=new WeakMap,gl=new WeakMap,ml=new WeakMap,Fn=new WeakMap,Sa=new WeakMap,sh=new WeakMap,up=new WeakMap,Y=new WeakSet,Wm=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ih=new WeakSet,Gm=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Zd=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},Ux=function(){if(l(this,mt))return;g(this,mt,document.createElement("div")),l(this,mt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");l(this,mt).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",x(this,Y,$x).bind(this,s),{signal:t}),i.addEventListener("contextmenu",ws,{signal:t}),i.tabIndex=-1}this.div.prepend(l(this,mt))},$x=function(e,t){var h;t.preventDefault();const{isMac:s}=Wt.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=l(this,Pe))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,g(this,va,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,Y,qm).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",_n,{passive:!1,signal:a}),window.addEventListener("contextmenu",ws,{signal:a}),g(this,oi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=l(this,Pe))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=c,x(this,Y,ef).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},Xm=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[r,a]=this.parentDimensions;this.setDims(r*s,a*i),this.fixAndSetPosition(),this._onResized()},ef=function(){if(!l(this,oi))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=l(this,oi);g(this,oi,null);const r=this.x,a=this.y,o=this.width,c=this.height;r===e&&a===t&&o===s&&c===i||this.addCommands({cmd:x(this,Y,Xm).bind(this,r,a,o,c),undo:x(this,Y,Xm).bind(this,e,t,s,i),mustExec:!0})},qm=function(e,t){const[s,i]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,u=se.MIN_SIZE/s,h=se.MIN_SIZE/i,d=x(this,Y,Zd).call(this,this.rotation),f=(z,X)=>[d[0]*z+d[2]*X,d[1]*z+d[3]*X],p=x(this,Y,Zd).call(this,360-this.rotation),m=(z,X)=>[p[0]*z+p[2]*X,p[1]*z+p[3]*X];let A,_,v=!1,w=!1;switch(e){case"topLeft":v=!0,A=(z,X)=>[0,0],_=(z,X)=>[z,X];break;case"topMiddle":A=(z,X)=>[z/2,0],_=(z,X)=>[z/2,X];break;case"topRight":v=!0,A=(z,X)=>[z,0],_=(z,X)=>[0,X];break;case"middleRight":w=!0,A=(z,X)=>[z,X/2],_=(z,X)=>[0,X/2];break;case"bottomRight":v=!0,A=(z,X)=>[z,X],_=(z,X)=>[0,0];break;case"bottomMiddle":A=(z,X)=>[z/2,X],_=(z,X)=>[z/2,0];break;case"bottomLeft":v=!0,A=(z,X)=>[0,X],_=(z,X)=>[z,0];break;case"middleLeft":w=!0,A=(z,X)=>[0,X/2],_=(z,X)=>[z,X/2];break}const b=A(o,c),E=_(o,c);let C=f(...E);const T=se._round(r+C[0]),k=se._round(a+C[1]);let P=1,M=1,D,O;if(t.fromKeyboard)({deltaX:D,deltaY:O}=t);else{const{screenX:z,screenY:X}=t,[I,V]=l(this,va);[D,O]=this.screenToPageTranslation(z-I,X-V),l(this,va)[0]=z,l(this,va)[1]=X}if([D,O]=m(D/s,O/i),v){const z=Math.hypot(o,c);P=M=Math.max(Math.min(Math.hypot(E[0]-b[0]-D,E[1]-b[1]-O)/z,1/o,1/c),u/o,h/c)}else w?P=Math.max(u,Math.min(1,Math.abs(E[0]-b[0]-D)))/o:M=Math.max(h,Math.min(1,Math.abs(E[1]-b[1]-O)))/c;const j=se._round(o*P),ee=se._round(c*M);C=f(..._(j,ee));const J=T-C[0],me=k-C[1];l(this,hn)||g(this,hn,[this.x,this.y,this.width,this.height]),this.width=j,this.height=ee,this.x=J,this.y=me,this.setDims(s*j,i*ee),this.fixAndSetPosition(),this._onResizing()},Vx=function(){var e;g(this,oi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,Pe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Wx=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const a=x(this,Y,Zd).call(this,this.rotation),o=(T,k)=>[a[0]*T+a[2]*k,a[1]*T+a[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,m=se.MIN_SIZE/c,A=se.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),m/f,A/p);const _=se._round(f*r),v=se._round(p*r);if(_===f&&v===p)return;l(this,hn)||g(this,hn,[h,d,f,p]);const w=o(f/2,p/2),b=se._round(h+w[0]),E=se._round(d+w[1]),C=o(_/2,v/2);this.x=b-C[0],this.y=E-C[1],this.width=_,this.height=v,this.setDims(c*_,u*v),this.fixAndSetPosition(),this._onResizing()},Gx=function(){var e;(e=l(this,Pe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),x(this,Y,ef).call(this)},Ym=function(e){const{isMac:t}=Wt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Xx=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:r},o=u=>{i.abort(),g(this,ir,null),g(this,wa,!1),this._uiManager.endDragSession()||x(this,Y,Ym).call(this,u),s&&this._onStopDragging()};t&&(g(this,gl,e.clientX),g(this,ml,e.clientY),g(this,ir,e.pointerId),g(this,eh,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==l(this,ir)){_n(u);return}const[p,m]=this.screenToPageTranslation(h-l(this,gl),d-l(this,ml));g(this,gl,h),g(this,ml,d),this._uiManager.dragSelectedEditors(p,m)},a),window.addEventListener("touchmove",_n,a),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,eh)&&(l(this,Sa)||u.isPrimary)&&o(u),_n(u)},a));const c=u=>{if(!l(this,ir)||l(this,ir)===u.pointerId){o(u);return}_n(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Km=function(){if(l(this,rr)||!this.div)return;g(this,rr,new AbortController);const e=this._uiManager.combinedSignal(l(this,rr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},qx=function(e){se._resizerKeyboardManager.exec(this,e)},Yx=function(e){var t;l(this,li)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,mt)&&x(this,Y,Hc).call(this)},Kx=function(e){g(this,th,l(this,li)?e:"")},Qm=function(e){if(l(this,is))for(const t of l(this,is))t.tabIndex=e},Hc=function(){g(this,li,!1),x(this,Y,Qm).call(this,-1),x(this,Y,ef).call(this)},S(se,ih),q(se,"_l10n",null),q(se,"_l10nResizer",null),q(se,"_borderLineWidth",-1),q(se,"_colorManager",new Om),q(se,"_zIndex",1),q(se,"_telemetryTimeout",1e3);let je=se;class Fk extends je{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Nw=3285377520,Mn=4294901760,Es=65535;class Qx{constructor(e){this.h1=e?e&4294967295:Nw,this.h2=e?e&4294967295:Nw}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let A=0,_=e.length;A<_;A++){const v=e.charCodeAt(A);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Es,m=f&Es;for(let A=0;A<i;A++)A&1?(o=a[A],o=o*d&Mn|o*p&Es,o=o<<15|o>>>17,o=o*f&Mn|o*m&Es,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[A],c=c*d&Mn|c*p&Es,c=c<<15|c>>>17,c=c*f&Mn|c*m&Es,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,r){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*d&Mn|o*p&Es,o=o<<15|o>>>17,o=o*f&Mn|o*m&Es,i&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Mn|e*36045&Es,t=t*4283543511&Mn|((t<<16|e>>>16)*2950163797&Mn)>>>16,e^=t>>>1,e=e*444984403&Mn|e*60499&Es,t=t*3301882366&Mn|((t<<16|e>>>16)*3120437893&Mn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Jm=Object.freeze({map:null,hash:"",transfer:void 0});var xa,ba,ot,hp,Jx;class qv{constructor(){S(this,hp);S(this,xa,!1);S(this,ba,null);S(this,ot,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=l(this,ot).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return l(this,ot).get(e)}remove(e){if(l(this,ot).delete(e),l(this,ot).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,ot).values())if(t instanceof je)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=l(this,ot).get(e);let i=!1;if(s!==void 0)for(const[r,a]of Object.entries(t))s[r]!==a&&(i=!0,s[r]=a);else i=!0,l(this,ot).set(e,t);i&&x(this,hp,Jx).call(this),t instanceof je&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,ot).has(e)}getAll(){return l(this,ot).size>0?Uv(l(this,ot)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return l(this,ot).size}resetModified(){l(this,xa)&&(g(this,xa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Zx(this)}get serializable(){if(l(this,ot).size===0)return Jm;const e=new Map,t=new Qx,s=[],i=Object.create(null);let r=!1;for(const[a,o]of l(this,ot)){const c=o instanceof je?o.serialize(!1,i):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Jm}get editorStats(){let e=null;const t=new Map;for(const s of l(this,ot).values()){if(!(s instanceof je))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,c]of Object.entries(i)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){g(this,ba,null)}get modifiedIds(){if(l(this,ba))return l(this,ba);const e=[];for(const t of l(this,ot).values())!(t instanceof je)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return g(this,ba,{ids:new Set(e),hash:e.join(",")})}}xa=new WeakMap,ba=new WeakMap,ot=new WeakMap,hp=new WeakSet,Jx=function(){l(this,xa)||(g(this,xa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var rh;class Zx extends qv{constructor(t){super();S(this,rh);const{map:s,hash:i,transfer:r}=t.serializable,a=structuredClone(s,r?{transfer:r}:null);g(this,rh,{map:a,hash:i,transfer:r})}get print(){be("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,rh)}get modifiedIds(){return ae(this,"modifiedIds",{ids:new Set,hash:""})}}rh=new WeakMap;var yl;class Ok{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,yl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,yl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,yl).has(e.loadedName))){if(Ye(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=e,a=new FontFace(s,i,r);this.addNativeFontFace(a);try{await a.load(),l(this,yl).add(s),t==null||t(e)}catch{ne(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}be("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw ne(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ae(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Dt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ae(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ye(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ae(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(E,C){return E.charCodeAt(C)<<24|E.charCodeAt(C+1)<<16|E.charCodeAt(C+2)<<8|E.charCodeAt(C+3)&255}function i(E,C,T,k){const P=E.substring(0,C),M=E.substring(C+T);return P+k+M}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function h(E,C){if(++u>30){ne("Load test font never loaded."),C();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,E,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,A=1482184792;let _=s(f,m);for(r=0,a=d.length-3;r<a;r+=4)_=_-A+s(d,r)|0;r<d.length&&(_=_-A+s(d+"XXX",r)|0),f=i(f,m,4,xk(_));const v=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(w);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const E of[e.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=E,b.append(C)}this._document.body.append(b),h(d,()=>{b.remove(),t.complete()})}}yl=new WeakMap;class jk{constructor(e,{disableFontFace:t=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Tk(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(a){ne(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}const Nd={DATA:1,ERROR:2},Xe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Rw(){}function Qt(n){if(n instanceof zr||n instanceof Rm||n instanceof Nu||n instanceof kw||n instanceof qf||n instanceof Tg)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||be('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new zr(n.message);case"InvalidPDFException":return new Rm(n.message);case"MissingPDFException":return new Nu(n.message);case"PasswordException":return new kw(n.message,n.code);case"UnexpectedResponseException":return new qf(n.message,n.status);case"UnknownErrorException":return new Tg(n.message,n.details)}return new Tg(n.message,n.toString())}var vl,qn,eb,tb,nb,tf;class Uc{constructor(e,t,s){S(this,qn);S(this,vl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",x(this,qn,eb).bind(this),{signal:l(this,vl).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:Xe.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ye(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:Xe.CANCEL,streamId:r,reason:Qt(u)}),h.promise}},s)}destroy(){var e;(e=l(this,vl))==null||e.abort(),g(this,vl,null)}}vl=new WeakMap,qn=new WeakSet,eb=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){x(this,qn,nb).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Nd.DATA)i.resolve(e.data);else if(e.callback===Nd.ERROR)i.reject(Qt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:s,targetName:i,callback:Nd.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:s,targetName:i,callback:Nd.ERROR,callbackId:e.callbackId,reason:Qt(a)})});return}if(e.streamId){x(this,qn,tb).call(this,e);return}t(e.data)},tb=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Xe.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Xe.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Ye(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Xe.ERROR,streamId:t,reason:Qt(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Xe.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Xe.START_COMPLETE,streamId:t,reason:Qt(u)})})},nb=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Xe.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Qt(e.reason));break;case Xe.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Qt(e.reason));break;case Xe.PULL:if(!o){r.postMessage({sourceName:s,targetName:i,stream:Xe.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Rw).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Xe.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Xe.PULL_COMPLETE,streamId:t,reason:Qt(u)})});break;case Xe.ENQUEUE:if(Ye(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Xe.CLOSE:if(Ye(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),x(this,qn,tf).call(this,a,t);break;case Xe.ERROR:Ye(a,"error should have stream controller"),a.controller.error(Qt(e.reason)),x(this,qn,tf).call(this,a,t);break;case Xe.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Qt(e.reason)),x(this,qn,tf).call(this,a,t);break;case Xe.CANCEL:if(!o)break;const c=Qt(e.reason);Promise.try(o.onCancel||Rw,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Xe.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Xe.CANCEL_COMPLETE,streamId:t,reason:Qt(u)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},tf=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var ah;class sb{constructor({enableHWA:e=!1}){S(this,ah,!1);g(this,ah,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,ah)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){be("Abstract method `_createCanvas` called.")}}ah=new WeakMap;class zk extends sb{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class ib{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){be("Abstract method `_fetch` called.")}}class rb extends ib{async _fetch(e){const t=await Xp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Gp(t)}}class ab{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var _a,wl,ci,ui,Nt,Ea,Ca,B,kt,$c,To,nf,Po,ob,Zm,No,Vc,Wc,ey,Gc;class Bk extends ab{constructor({docId:t,ownerDocument:s=globalThis.document}){super();S(this,B);S(this,_a);S(this,wl);S(this,ci);S(this,ui);S(this,Nt);S(this,Ea);S(this,Ca,0);g(this,ui,t),g(this,Nt,s)}addFilter(t){if(!t)return"none";let s=l(this,B,kt).get(t);if(s)return s;const[i,r,a]=x(this,B,nf).call(this,t),o=t.length===1?i:`${i}${r}${a}`;if(s=l(this,B,kt).get(o),s)return l(this,B,kt).set(t,s),s;const c=`g_${l(this,ui)}_transfer_map_${Ot(this,Ca)._++}`,u=x(this,B,Po).call(this,c);l(this,B,kt).set(t,u),l(this,B,kt).set(o,u);const h=x(this,B,No).call(this,c);return x(this,B,Wc).call(this,i,r,a,h),u}addHCMFilter(t,s){var m;const i=`${t}-${s}`,r="base";let a=l(this,B,$c).get(r);if((a==null?void 0:a.key)===i||(a?((m=a.filter)==null||m.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},l(this,B,$c).set(r,a)),!t||!s))return a.url;const o=x(this,B,Gc).call(this,t);t=G.makeHexColor(...o);const c=x(this,B,Gc).call(this,s);if(s=G.makeHexColor(...c),l(this,B,To).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const u=new Array(256);for(let A=0;A<=255;A++){const _=A/255;u[A]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,ui)}_hcm_filter`,f=a.filter=x(this,B,No).call(this,d);x(this,B,Wc).call(this,h,h,h,f),x(this,B,Zm).call(this,f);const p=(A,_)=>{const v=o[A]/255,w=c[A]/255,b=new Array(_+1);for(let E=0;E<=_;E++)b[E]=v+E/_*(w-v);return b.join(",")};return x(this,B,Wc).call(this,p(0,5),p(1,5),p(2,5),f),a.url=x(this,B,Po).call(this,d),a.url}addAlphaFilter(t){let s=l(this,B,kt).get(t);if(s)return s;const[i]=x(this,B,nf).call(this,[t]),r=`alpha_${i}`;if(s=l(this,B,kt).get(r),s)return l(this,B,kt).set(t,s),s;const a=`g_${l(this,ui)}_alpha_map_${Ot(this,Ca)._++}`,o=x(this,B,Po).call(this,a);l(this,B,kt).set(t,o),l(this,B,kt).set(r,o);const c=x(this,B,No).call(this,a);return x(this,B,ey).call(this,i,c),o}addLuminosityFilter(t){let s=l(this,B,kt).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=x(this,B,nf).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=l(this,B,kt).get(r),s)return l(this,B,kt).set(t,s),s;const a=`g_${l(this,ui)}_luminosity_map_${Ot(this,Ca)._++}`,o=x(this,B,Po).call(this,a);l(this,B,kt).set(t,o),l(this,B,kt).set(r,o);const c=x(this,B,No).call(this,a);return x(this,B,ob).call(this,c),t&&x(this,B,ey).call(this,i,c),o}addHighlightHCMFilter(t,s,i,r,a){var w;const o=`${s}-${i}-${r}-${a}`;let c=l(this,B,$c).get(t);if((c==null?void 0:c.key)===o||(c?((w=c.filter)==null||w.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,B,$c).set(t,c)),!s||!i))return c.url;const[u,h]=[s,i].map(x(this,B,Gc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,a].map(x(this,B,Gc).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,B,To).style.color="";const A=(b,E,C)=>{const T=new Array(256),k=(f-d)/C,P=b/255,M=(E-b)/(255*C);let D=0;for(let O=0;O<=C;O++){const j=Math.round(d+O*k),ee=P+O*M;for(let J=D;J<=j;J++)T[J]=ee;D=j+1}for(let O=D;O<256;O++)T[O]=T[D-1];return T.join(",")},_=`g_${l(this,ui)}_hcm_${t}_filter`,v=c.filter=x(this,B,No).call(this,_);return x(this,B,Zm).call(this,v),x(this,B,Wc).call(this,A(p[0],m[0],5),A(p[1],m[1],5),A(p[2],m[2],5),v),c.url=x(this,B,Po).call(this,_),c.url}destroy(t=!1){var s,i,r,a;t&&((s=l(this,Ea))!=null&&s.size)||((i=l(this,ci))==null||i.parentNode.parentNode.remove(),g(this,ci,null),(r=l(this,wl))==null||r.clear(),g(this,wl,null),(a=l(this,Ea))==null||a.clear(),g(this,Ea,null),g(this,Ca,0))}}_a=new WeakMap,wl=new WeakMap,ci=new WeakMap,ui=new WeakMap,Nt=new WeakMap,Ea=new WeakMap,Ca=new WeakMap,B=new WeakSet,kt=function(){return l(this,wl)||g(this,wl,new Map)},$c=function(){return l(this,Ea)||g(this,Ea,new Map)},To=function(){if(!l(this,ci)){const t=l(this,Nt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=l(this,Nt).createElementNS(Ys,"svg");i.setAttribute("width",0),i.setAttribute("height",0),g(this,ci,l(this,Nt).createElementNS(Ys,"defs")),t.append(i),i.append(l(this,ci)),l(this,Nt).body.append(t)}return l(this,ci)},nf=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=s[u]/255,o[u]=i[u]/255,c[u]=r[u]/255;return[a.join(","),o.join(","),c.join(",")]},Po=function(t){if(l(this,_a)===void 0){g(this,_a,"");const s=l(this,Nt).URL;s!==l(this,Nt).baseURI&&(qp(s)?ne('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,_a,s.split("#",1)[0]))}return`url(${l(this,_a)}#${t})`},ob=function(t){const s=l(this,Nt).createElementNS(Ys,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Zm=function(t){const s=l(this,Nt).createElementNS(Ys,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},No=function(t){const s=l(this,Nt).createElementNS(Ys,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),l(this,B,To).append(s),s},Vc=function(t,s,i){const r=l(this,Nt).createElementNS(Ys,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},Wc=function(t,s,i,r){const a=l(this,Nt).createElementNS(Ys,"feComponentTransfer");r.append(a),x(this,B,Vc).call(this,a,"feFuncR",t),x(this,B,Vc).call(this,a,"feFuncG",s),x(this,B,Vc).call(this,a,"feFuncB",i)},ey=function(t,s){const i=l(this,Nt).createElementNS(Ys,"feComponentTransfer");s.append(i),x(this,B,Vc).call(this,i,"feFuncA",t)},Gc=function(t){return l(this,B,To).style.color=t,Xv(getComputedStyle(l(this,B,To)).getPropertyValue("color"))};class lb{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){be("Abstract method `_fetch` called.")}}class cb extends lb{async _fetch(e){const t=await Xp(e,"arraybuffer");return new Uint8Array(t)}}Dt&&ne("Please use the `legacy` build in Node.js environments.");async function ub(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Hk extends ab{}class Uk extends sb{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class $k extends ib{async _fetch(e){return ub(e)}}class Vk extends lb{async _fetch(e){return ub(e)}}const Mt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ty(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class Yv{getPattern(){be("Abstract method `getPattern` called.")}}class Wk extends Yv{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===Mt.STROKE||i===Mt.FILL){const a=t.current.getClippedPathBoundingBox(i,Le(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),s=G.transform(s,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),ty(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else ty(e,this._bbox),r=this._createGradient(e);return r}}function Rg(n,e,t,s,i,r,a,o){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=a,a=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=a,a=o,o=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=a,a=f);const p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,A=(c[s]+e.offsetX)*e.scaleX,_=(c[s+1]+e.offsetY)*e.scaleY,v=(c[i]+e.offsetX)*e.scaleX,w=(c[i+1]+e.offsetY)*e.scaleY;if(m>=w)return;const b=u[r],E=u[r+1],C=u[r+2],T=u[a],k=u[a+1],P=u[a+2],M=u[o],D=u[o+1],O=u[o+2],j=Math.round(m),ee=Math.round(w);let J,me,z,X,I,V,K,oe;for(let ie=j;ie<=ee;ie++){if(ie<_){const ue=ie<m?0:(m-ie)/(m-_);J=p-(p-A)*ue,me=b-(b-T)*ue,z=E-(E-k)*ue,X=C-(C-P)*ue}else{let ue;ie>w?ue=1:_===w?ue=0:ue=(_-ie)/(_-w),J=A-(A-v)*ue,me=T-(T-M)*ue,z=k-(k-D)*ue,X=P-(P-O)*ue}let _e;ie<m?_e=0:ie>w?_e=1:_e=(m-ie)/(m-w),I=p-(p-v)*_e,V=b-(b-M)*_e,K=E-(E-D)*_e,oe=C-(C-O)*_e;const ft=Math.round(Math.min(J,I)),Rn=Math.round(Math.max(J,I));let Ee=d*ie+ft*4;for(let ue=ft;ue<=Rn;ue++)_e=(J-ue)/(J-I),_e<0?_e=0:_e>1&&(_e=1),h[Ee++]=me-(me-V)*_e|0,h[Ee++]=z-(z-K)*_e|0,h[Ee++]=X-(X-oe)*_e|0,h[Ee++]=255}}function Gk(n,e,t){const s=e.coords,i=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(s.length/o)-1,u=o-1;for(r=0;r<c;r++){let h=r*o;for(let d=0;d<u;d++,h++)Rg(n,t,s[h],s[h+1],s[h+o],i[h],i[h+1],i[h+o]),Rg(n,t,s[h+o+1],s[h+1],s[h+o],i[h+o+1],i[h+1],i[h+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)Rg(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class Xk extends Yv{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,m=h/f,A={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/m},_=d+2*2,v=f+2*2,w=s.getCanvas("mesh",_,v),b=w.context,E=b.createImageData(d,f);if(t){const T=E.data;for(let k=0,P=T.length;k<P;k+=4)T[k]=t[0],T[k+1]=t[1],T[k+2]=t[2],T[k+3]=255}for(const T of this._figures)Gk(E,T,A);return b.putImageData(E,2,2),{canvas:w.canvas,offsetX:o-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(e,t,s,i){ty(e,this._bbox);let r;if(i===Mt.SHADING)r=G.singularValueDecompose2dScale(Le(e));else if(r=G.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=G.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,i===Mt.SHADING?null:this._background,t.cachedCanvases);return i!==Mt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class qk extends Yv{getPattern(){return"hotpink"}}function Yk(n){switch(n[0]){case"RadialAxial":return new Wk(n);case"Mesh":return new Xk(n);case"Dummy":return new qk}throw new Error(`Unknown IR type: ${n[0]}`)}const Lw={COLORED:1,UNCOLORED:2},dp=class dp{constructor(e,t,s,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Wp("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],m=f-h,A=p-d,_=G.singularValueDecompose2dScale(this.matrix),v=G.singularValueDecompose2dScale(this.baseTransform),w=_[0]*v[0],b=_[1]*v[1];let E=m,C=A,T=!1,k=!1;const P=Math.ceil(c*w),M=Math.ceil(u*b),D=Math.ceil(m*w),O=Math.ceil(A*b);P>=D?E=c:T=!0,M>=O?C=u:k=!0;const j=this.getSizeAndScale(E,this.ctx.canvas.width,w),ee=this.getSizeAndScale(C,this.ctx.canvas.height,b),J=e.cachedCanvases.getCanvas("pattern",j.size,ee.size),me=J.context,z=o.createCanvasGraphics(me);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,i,a),me.translate(-j.scale*h,-ee.scale*d),z.transform(j.scale,0,0,ee.scale,0,0),me.save(),this.clipBbox(z,h,d,f,p),z.baseTransform=Le(z.ctx),z.executeOperatorList(s),z.endDrawing(),me.restore(),T||k){const X=J.canvas;T&&(E=c),k&&(C=u);const I=this.getSizeAndScale(E,this.ctx.canvas.width,w),V=this.getSizeAndScale(C,this.ctx.canvas.height,b),K=I.size,oe=V.size,ie=e.cachedCanvases.getCanvas("pattern-workaround",K,oe),_e=ie.context,ft=T?Math.floor(m/c):0,Rn=k?Math.floor(A/u):0;for(let Ee=0;Ee<=ft;Ee++)for(let ue=0;ue<=Rn;ue++)_e.drawImage(X,K*Ee,oe*ue,K,oe,0,0,K,oe);return{canvas:ie.canvas,scaleX:I.scale,scaleY:V.scale,offsetX:h,offsetY:d}}return{canvas:J.canvas,scaleX:j.scale,scaleY:ee.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,s){const i=Math.max(dp.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const a=i-t,o=r-s;e.ctx.rect(t,s,a,o),e.current.updateRectMinMax(Le(e.ctx),[t,s,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case Lw.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case Lw.UNCOLORED:const o=G.makeHexColor(s[0],s[1],s[2]);i.fillStyle=o,i.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new Sk(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,i){let r=s;i!==Mt.SHADING&&(r=G.transform(r,t.baseTransform),this.matrix&&(r=G.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};q(dp,"MAX_PATTERN_SIZE",3e3);let ny=dp;function Kk({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=Wt.isLittleEndian?4278190080:255,[c,u]=a?[r,o]:[o,r],h=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<i;m++){for(const _=e+h;e<_;e++){const v=e<f?n[e]:255;t[p++]=v&128?u:c,t[p++]=v&64?u:c,t[p++]=v&32?u:c,t[p++]=v&16?u:c,t[p++]=v&8?u:c,t[p++]=v&4?u:c,t[p++]=v&2?u:c,t[p++]=v&1?u:c}if(d===0)continue;const A=e<f?n[e++]:255;for(let _=0;_<d;_++)t[p++]=A&1<<7-_?u:c}return{srcPos:e,destPos:p}}const Mw=16,Iw=100,Qk=15,Dw=10,Fw=1e3,nn=16;function Jk(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(s,i){e.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){e.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,a,o,c){e.transform(s,i,r,a,o,c),this.__originalTransform(s,i,r,a,o,c)},n.setTransform=function(s,i,r,a,o,c){e.setTransform(s,i,r,a,o,c),this.__originalSetTransform(s,i,r,a,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){e.rotate(s),this.__originalRotate(s)},n.clip=function(s){e.clip(s),this.__originalClip(s)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,a,o){e.bezierCurveTo(t,s,i,r,a,o),this.__originalBezierCurveTo(t,s,i,r,a,o)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Zk{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Rd(n,e,t,s,i,r,a,o,c,u){const[h,d,f,p,m,A]=Le(n);if(d===0&&f===0){const w=a*h+m,b=Math.round(w),E=o*p+A,C=Math.round(E),T=(a+c)*h+m,k=Math.abs(Math.round(T)-b)||1,P=(o+u)*p+A,M=Math.abs(Math.round(P)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),b,C),n.drawImage(e,t,s,i,r,0,0,k,M),n.setTransform(h,d,f,p,m,A),[k,M]}if(h===0&&p===0){const w=o*f+m,b=Math.round(w),E=a*d+A,C=Math.round(E),T=(o+u)*f+m,k=Math.abs(Math.round(T)-b)||1,P=(a+c)*d+A,M=Math.abs(Math.round(P)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,b,C),n.drawImage(e,t,s,i,r,0,0,M,k),n.setTransform(h,d,f,p,m,A),[M,k]}n.drawImage(e,t,s,i,r,a,o,c,u);const _=Math.hypot(h,d),v=Math.hypot(f,p);return[_*c,v*u]}function eT(n){const{width:e,height:t}=n;if(e>Fw||t>Fw)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const v of n.data){let w=128;for(;w>0;)d[f++]=v&w?0:255,w>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[c]=2,++p),o=1;o<t;o++){f=o*h,u=o*r,d[f-h]!==d[f]&&(a[u]=d[f]?1:8,++p);let v=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)v=(v>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[v]&&(a[u+c]=i[v],++p),f++;if(d[f-h]!==d[f]&&(a[u+c]=d[f]?2:4,++p),p>s)return null}for(f=h*(t-1),u=o*r,d[f]!==0&&(a[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[u+c]=4,++p),p>s)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),A=new Path2D;for(o=0;p&&o<=t;o++){let v=o*r;const w=v+e;for(;v<w&&!a[v];)v++;if(v===w)continue;A.moveTo(v%r,o);const b=v;let E=a[v];do{const C=m[E];do v+=C;while(!a[v]);const T=a[v];T!==5&&T!==10?(E=T,a[v]=0):(E=T&51*E>>4,a[v]&=E>>2|E<<2),A.lineTo(v%r,v/r|0),a[v]||--p}while(b!==v);--o}return d=null,a=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(A),v.beginPath(),v.restore()}}class Ow{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ax,this.textMatrixScale=1,this.fontMatrix=Nm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ct.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=G.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=G.applyTransform(t,e),i=G.applyTransform(t.slice(2),e),r=G.applyTransform([t[0],t[3]],e),a=G.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],i[0],r[0],a[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],a[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],a[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],a[1])}updateScalingPathMinMax(e,t){G.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,i,r,a,o,c,u,h){const d=G.bezierBoundingBox(t,s,i,r,a,o,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Mt.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===Mt.STROKE){t||be("Stroke bounding box must include transform.");const i=G.singularValueDecompose2dScale(t),r=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=a,s[2]+=r,s[3]+=a}return s}updateClipFromPath(){const e=G.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Mt.FILL,t=null){return G.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function jw(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%nn,r=(t-i)/nn,a=i===0?r:r+1,o=n.createImageData(s,nn);let c=0,u;const h=e.data,d=o.data;let f,p,m,A;if(e.kind===Gd.GRAYSCALE_1BPP){const _=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),w=v.length,b=s+7>>3,E=4294967295,C=Wt.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<r?nn:i,u=0,p=0;p<m;p++){const T=_-c;let k=0;const P=T>b?s:T*8-7,M=P&-8;let D=0,O=0;for(;k<M;k+=8)O=h[c++],v[u++]=O&128?E:C,v[u++]=O&64?E:C,v[u++]=O&32?E:C,v[u++]=O&16?E:C,v[u++]=O&8?E:C,v[u++]=O&4?E:C,v[u++]=O&2?E:C,v[u++]=O&1?E:C;for(;k<P;k++)D===0&&(O=h[c++],D=128),v[u++]=O&D?E:C,D>>=1}for(;u<w;)v[u++]=0;n.putImageData(o,0,f*nn)}}else if(e.kind===Gd.RGBA_32BPP){for(p=0,A=s*nn*4,f=0;f<r;f++)d.set(h.subarray(c,c+A)),c+=A,n.putImageData(o,0,p),p+=nn;f<a&&(A=s*i*4,d.set(h.subarray(c,c+A)),n.putImageData(o,0,p))}else if(e.kind===Gd.RGB_24BPP)for(m=nn,A=s*m,f=0;f<a;f++){for(f>=r&&(m=i,A=s*m),u=0,p=A;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(o,0,f*nn)}else throw new Error(`bad image kind: ${e.kind}`)}function zw(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%nn,r=(t-i)/nn,a=i===0?r:r+1,o=n.createImageData(s,nn);let c=0;const u=e.data,h=o.data;for(let d=0;d<a;d++){const f=d<r?nn:i;({srcPos:c}=Kk({src:u,srcPos:c,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(o,0,d*nn)}}function Nc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Ld(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Dt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function Bw(n,e){if(e)return!0;const t=G.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Br.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const tT=["butt","round","square"],nT=["miter","round","bevel"],sT={},Hw={};var As,sy,iy,ry;const t0=class t0{constructor(e,t,s,i,r,{optionalContentConfig:a,markedContentStack:o=null},c,u){S(this,As);this.ctx=e,this.current=new Ow(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Zk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Le(this.compositeCtx))}this.ctx.save(),Ld(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Le(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,a=e.fnArray;let o=t||0;const c=r.length;if(c===o)return o;const u=c-o>Dw&&typeof s=="function",h=u?Date.now()+Qk:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,s),o;if(m=a[o],m!==es.dependency)this[m].apply(this,r[o]);else for(const A of r[o]){const _=A.startsWith("g_")?f:p;if(!_.has(A))return _.get(A,s),o}if(o++,o===c)return o;if(u&&++d>Dw){if(Date.now()>h)return s(),o;d=0}}}endDrawing(){x(this,As,sy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),x(this,As,iy).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=s,c=i,u="prescale1",h,d;for(;r>2&&o>1||a>2&&c>1;){let f=o,p=c;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,c,0,0,f,p),e=h.canvas,o=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,a=this.current.patternFill,o=Le(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const P=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),c=this._cachedBitmapsMap.get(P),c||(c=new Map,this._cachedBitmapsMap.set(P,c));const M=c.get(u);if(M&&!a){const D=Math.round(Math.min(o[0],o[2])+o[4]),O=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:M,offsetX:D,offsetY:O}}h=M}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),zw(d.context,e));let f=G.transform(o,[1/s,0,0,-1/i,0,0]);f=G.transform(f,[1,0,0,1,0,-i]);const[p,m,A,_]=G.getAxialAlignedBoundingBox([0,0,s,i],f),v=Math.round(A-p)||1,w=Math.round(_-m)||1,b=this.cachedCanvases.getCanvas("fillCanvas",v,w),E=b.context,C=p,T=m;E.translate(-C,-T),E.transform(...f),h||(h=this._scaleImage(d.canvas,_s(E)),h=h.img,c&&a&&c.set(u,h)),E.imageSmoothingEnabled=Bw(Le(E),e.interpolate),Rd(E,h,0,0,h.width,h.height,0,0,s,i),E.globalCompositeOperation="source-in";const k=G.transform(_s(E),[1,0,0,1,-C,-T]);return E.fillStyle=a?r.getPattern(t,this,k,Mt.FILL):r,E.fillRect(0,0,s,i),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,b.canvas)),{canvas:b.canvas,offsetX:Math.round(C),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=tT[e]}setLineJoin(e){this.ctx.lineJoin=nT[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Le(this.suspendedCtx)),Nc(this.suspendedCtx,r),Jk(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],a=i[1],o=i[2]-r,c=i[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,s,o,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,a,o,c,u,h,d){let f=e.canvas,p=c-h,m=u-d;if(a){const _=G.makeHexColor(...a);if(p<0||m<0||p+s>f.width||m+i>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",s,i),w=v.context;w.drawImage(f,-p,-m),w.globalCompositeOperation="destination-atop",w.fillStyle=_,w.fillRect(0,0,s,i),w.globalCompositeOperation="source-over",f=v.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,m,s,i),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=_,e.fillRect(p,m,s,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const A=new Path2D;A.rect(c,u,s,i),t.clip(A),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,s,i,c,u,s,i),t.restore()}save(){this.inSMaskMode?(Nc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Nc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,i,r,a){this.ctx.transform(e,t,s,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const i=this.ctx,r=this.current;let a=r.x,o=r.y,c,u;const h=Le(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?s.slice(0):null;for(let p=0,m=0,A=e.length;p<A;p++)switch(e[p]|0){case es.rectangle:a=t[m++],o=t[m++];const _=t[m++],v=t[m++],w=a+_,b=o+v;i.moveTo(a,o),_===0||v===0?i.lineTo(w,b):(i.lineTo(w,o),i.lineTo(w,b),i.lineTo(a,b)),d||r.updateRectMinMax(h,[a,o,w,b]),i.closePath();break;case es.moveTo:a=t[m++],o=t[m++],i.moveTo(a,o),d||r.updatePathMinMax(h,a,o);break;case es.lineTo:a=t[m++],o=t[m++],i.lineTo(a,o),d||r.updatePathMinMax(h,a,o);break;case es.curveTo:c=a,u=o,a=t[m+4],o=t[m+5],i.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],t[m+2],t[m+3],a,o,f),m+=6;break;case es.curveTo2:c=a,u=o,i.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,c,u,a,o,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],o=t[m+3],m+=4;break;case es.curveTo3:c=a,u=o,a=t[m+2],o=t[m+3],i.bezierCurveTo(t[m],t[m+1],a,o,a,o),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],a,o,a,o,f),m+=4;break;case es.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,_s(t),Mt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(t.save(),t.fillStyle=s.getPattern(t,this,_s(t),Mt.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=sT}eoClip(){this.pendingClip=Hw}beginText(){this.current.textMatrix=Ax,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x:a,y:o,fontSize:c,path:u}of e)s.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(a,o).scale(c,-c));t.clip(s),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||Nm,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ne("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=((h=s.systemFontInfo)==null?void 0:h.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const c=s.italic?"italic":"normal";let u=t;t<Mw?u=Mw:t>Iw&&(u=Iw),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,i,r,a){this.current.textMatrix=[e,t,s,i,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i,r){const a=this.ctx,o=this.current,c=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,d=u&Ct.FILL_STROKE_MASK,f=!!(u&Ct.ADD_TO_PATH_FLAG),p=o.patternFill&&!c.missingFile,m=o.patternStroke&&!c.missingFile;let A;if((c.disableFontFace||f||p||m)&&(A=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||p||m){if(a.save(),a.translate(t,s),a.scale(h,-h),d===Ct.FILL||d===Ct.FILL_STROKE)if(i){const _=a.getTransform();a.setTransform(...i),a.fill(x(this,As,ry).call(this,A,_,i))}else a.fill(A);if(d===Ct.STROKE||d===Ct.FILL_STROKE)if(r){const _=a.getTransform();a.setTransform(...r),a.stroke(x(this,As,ry).call(this,A,_,r))}else a.lineWidth/=h,a.stroke(A);a.restore()}else(d===Ct.FILL||d===Ct.FILL_STROKE)&&a.fillText(e,t,s),(d===Ct.STROKE||d===Ct.FILL_STROKE)&&a.strokeText(e,t,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Le(a),x:t,y:s,fontSize:h,path:A})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return ae(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=s.vertical,p=f?1:-1,m=s.defaultVMetrics,A=i*t.fontMatrix[0],_=t.textRenderingMode===Ct.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let v,w;if(t.patternFill){r.save();const k=t.fillColor.getPattern(r,this,_s(r),Mt.FILL);v=Le(r),r.restore(),r.fillStyle=k}if(t.patternStroke){r.save();const k=t.strokeColor.getPattern(r,this,_s(r),Mt.STROKE);w=Le(r),r.restore(),r.strokeStyle=k}let b=t.lineWidth;const E=t.textMatrixScale;if(E===0||b===0){const k=t.textRenderingMode&Ct.FILL_STROKE_MASK;(k===Ct.STROKE||k===Ct.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=E;if(a!==1&&(r.scale(a,a),b/=a),r.lineWidth=b,s.isInvalidPDFjsFont){const k=[];let P=0;for(const M of e)k.push(M.unicode),P+=M.width;r.fillText(k.join(""),0,0),t.x+=P*A*h,r.restore(),this.compose();return}let C=0,T;for(T=0;T<d;++T){const k=e[T];if(typeof k=="number"){C+=p*k*i/1e3;continue}let P=!1;const M=(k.isSpace?c:0)+o,D=k.fontChar,O=k.accent;let j,ee,J=k.width;if(f){const z=k.vmetric||m,X=-(k.vmetric?z[1]:J*.5)*A,I=z[2]*A;J=z?-z[0]:J,j=X/a,ee=(C+I)/a}else j=C/a,ee=0;if(s.remeasure&&J>0){const z=r.measureText(D).width*1e3/i*a;if(J<z&&this.isFontSubpixelAAEnabled){const X=J/z;P=!0,r.save(),r.scale(X,1),j/=X}else J!==z&&(j+=(J-z)/2e3*i/a)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(_&&!O)r.fillText(D,j,ee);else if(this.paintChar(D,j,ee,v,w),O){const z=j+i*O.offset.x/a,X=ee-i*O.offset.y/a;this.paintChar(O.fontChar,z,X,v,w)}}const me=f?J*A-M*u:J*A+M*u;C+=me,P&&r.restore()}f?t.y-=C:t.x+=C*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,a=s.fontDirection,o=i.vertical?1:-1,c=s.charSpacing,u=s.wordSpacing,h=s.textHScale*a,d=s.fontMatrix||Nm,f=e.length,p=s.textRenderingMode===Ct.INVISIBLE;let m,A,_,v;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(h,a),m=0;m<f;++m){if(A=e[m],typeof A=="number"){v=o*A*r/1e3,this.ctx.translate(v,0),s.x+=v*h;continue}const w=(A.isSpace?u:0)+c,b=i.charProcOperatorList[A.operatorListId];if(!b){ne(`Type3 character "${A.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=A,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(b),this.restore()),_=G.applyTransform([A.width,0],d)[0]*r+w,t.translate(_,0),s.x+=_*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,a){this.ctx.rect(s,i,r-s,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],i=this.baseTransform||Le(this.ctx),r={createCanvasGraphics:a=>new t0(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new ny(e,s,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=G.makeHexColor(e,t,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=G.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Yk(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,_s(t),Mt.SHADING);const i=_s(t);if(i){const{width:r,height:a}=t.canvas,[o,c,u,h]=G.getAxialAlignedBoundingBox([0,0,r,a],i);this.ctx.fillRect(o,c,u-o,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){be("Should not call beginInlineImage")}beginImageData(){be("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Le(this.ctx),t)){const s=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],s,i),this.current.updateRectMinMax(Le(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Wp("TODO: Support non-isolated groups."),e.knockout&&ne("Knockout groups not supported.");const s=Le(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=G.getAxialAlignedBoundingBox(e.bbox,Le(t));const r=[0,0,t.canvas.width,t.canvas.height];i=G.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-a,-o),f.transform(...s),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Nc(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Le(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=G.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(x(this,As,sy).call(this),Ld(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,u]=G.singularValueDecompose2dScale(Le(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,o*u),Ld(this.ctx)}else Ld(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Ow(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,As,iy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=eT(e)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(e),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=Le(o);o.transform(t,s,i,r,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=a.length;h<d;h+=2){const f=G.transform(c,[t,s,i,r,a[h],a[h+1]]),[p,m]=G.applyTransform([0,0],f);o.drawImage(u.canvas,p,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:a,width:o,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",o,c),d=h.context;d.save();const f=this.getObject(a,r);zw(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,_s(t),Mt.FILL):s,d.fillRect(0,0,o,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Rd(t,h.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){ne("Dependent image isn't ready yet");return}const a=r.width,o=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[t,0,0,s,i[u],i[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;if(this.save(),!Dt){const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none")}i.scale(1/t,-1/s);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,s).context;jw(c,e),r=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(r,_s(i));i.imageSmoothingEnabled=Bw(Le(i),e.interpolate),Rd(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;jw(c,e),i=this.applyTransferMapsToCanvas(c)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),Rd(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===Hw?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Le(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let a,o;if(s===0&&i===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)a=o=1/c;else{const h=c*e;a=o=h<1?1/h:1}else if(e===0)a=1/c,o=1/u;else{const h=c*e,d=u*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const c=Math.abs(t*r-s*i),u=Math.hypot(t,s),h=Math.hypot(i,r);if(e===0)a=h/c,o=u/c;else{const d=e*c;a=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=s||1,i===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(i,r),a.length>0){const o=Math.max(i,r);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};As=new WeakSet,sy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},iy=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},ry=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let tl=t0;for(const n in es)tl.prototype[n]!==void 0&&(tl.prototype[es[n]]=tl.prototype[n]);var oh,lh;class ki{static get workerPort(){return l(this,oh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");g(this,oh,e)}static get workerSrc(){return l(this,lh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");g(this,lh,e)}}oh=new WeakMap,lh=new WeakMap,S(ki,oh,null),S(ki,lh,"");var ka,ch;class iT{constructor({parsedData:e,rawData:t}){S(this,ka);S(this,ch);g(this,ka,e),g(this,ch,t)}getRaw(){return l(this,ch)}get(e){return l(this,ka).get(e)??null}getAll(){return Uv(l(this,ka))}has(e){return l(this,ka).has(e)}}ka=new WeakMap,ch=new WeakMap;const Ro=Symbol("INTERNAL");var uh,hh,dh,Al;class rT{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){S(this,uh,!1);S(this,hh,!1);S(this,dh,!1);S(this,Al,!0);g(this,uh,!!(e&Sn.DISPLAY)),g(this,hh,!!(e&Sn.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(l(this,dh))return l(this,Al);if(!l(this,Al))return!1;const{print:e,view:t}=this.usage;return l(this,uh)?(t==null?void 0:t.viewState)!=="OFF":l(this,hh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Ro&&be("Internal method `_setVisible` called."),g(this,dh,s),g(this,Al,t)}}uh=new WeakMap,hh=new WeakMap,dh=new WeakMap,Al=new WeakMap;var ar,we,Sl,xl,fh,ay;class aT{constructor(e,t=Sn.DISPLAY){S(this,fh);S(this,ar,null);S(this,we,new Map);S(this,Sl,null);S(this,xl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,g(this,xl,e.order);for(const s of e.groups)l(this,we).set(s.id,new rT(t,s));if(e.baseState==="OFF")for(const s of l(this,we).values())s._setVisible(Ro,!1);for(const s of e.on)l(this,we).get(s)._setVisible(Ro,!0);for(const s of e.off)l(this,we).get(s)._setVisible(Ro,!1);g(this,Sl,this.getHash())}}isVisible(e){if(l(this,we).size===0)return!0;if(!e)return Wp("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,we).has(e.id)?l(this,we).get(e.id).visible:(ne(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return x(this,fh,ay).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,we).has(t))return ne(`Optional content group not found: ${t}`),!0;if(l(this,we).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,we).has(t))return ne(`Optional content group not found: ${t}`),!0;if(!l(this,we).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,we).has(t))return ne(`Optional content group not found: ${t}`),!0;if(!l(this,we).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,we).has(t))return ne(`Optional content group not found: ${t}`),!0;if(l(this,we).get(t).visible)return!1}return!0}return ne(`Unknown optional content policy ${e.policy}.`),!0}return ne(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=l(this,we).get(e);if(!i){ne(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((r=l(this,we).get(o))==null||r._setVisible(Ro,!1,!0));i._setVisible(Ro,!!t,!0),g(this,ar,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=l(this,we).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}g(this,ar,null)}get hasInitialVisibility(){return l(this,Sl)===null||this.getHash()===l(this,Sl)}getOrder(){return l(this,we).size?l(this,xl)?l(this,xl).slice():[...l(this,we).keys()]:null}getGroups(){return l(this,we).size>0?Uv(l(this,we)):null}getGroup(e){return l(this,we).get(e)||null}getHash(){if(l(this,ar)!==null)return l(this,ar);const e=new Qx;for(const[t,s]of l(this,we))e.update(`${t}:${s.visible}`);return g(this,ar,e.hexdigest())}}ar=new WeakMap,we=new WeakMap,Sl=new WeakMap,xl=new WeakMap,fh=new WeakSet,ay=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let a;if(Array.isArray(r))a=x(this,fh,ay).call(this,r);else if(l(this,we).has(r))a=l(this,we).get(r).visible;else return ne(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class oT{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ye(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});Ye(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ye(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new lT(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new cT(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class lT{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Wv(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cT{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uT(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=a(n),t){const h=u(t);return r(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Gp(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,A,_,v]=f;if(A=parseInt(A,10),A in d){if(A===0)break;continue}d[A]=[_,v]}const m=[];for(let A=0;A<d.length&&A in d;++A){let[_,v]=d[A];v=o(v),_&&(v=unescape(v),A===0&&(v=c(v))),m.push(v)}return m.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,_){return String.fromCharCode(parseInt(_,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function hb(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Yp(n){try{return new URL(n).origin}catch{}return null}function db({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function fb(n){const e=n.get("Content-Disposition");if(e){let t=uT(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Wv(t))return t}return null}function Kp(n,e){return n===404||n===0&&e.startsWith("file:")?new Nu('Missing PDF "'+e+'".'):new qf(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function pb(n){return n===200||n===206}function gb(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function mb(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ne(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Uw{constructor(e){q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=hb(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ye(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new dT(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class hT{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,gb(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Yp(r.url),!pb(r.status))throw Kp(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:c}=db({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=fb(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:mb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class dT{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const a=i.url;fetch(a,gb(r,this._withCredentials,this._abortController)).then(o=>{const c=Yp(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!pb(o.status))throw Kp(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:mb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Lg=200,Mg=206;function fT(n){const e=n.response;return typeof e!="string"?e:Gp(e).buffer}class pT{constructor({url:e,httpHeaders:t,withCredentials:s}){q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=hb(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Mg):i.expectedStatus=Lg,t.responseType="arraybuffer",Ye(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Lg;if(!(r===Lg&&s.expectedStatus===Mg)&&r!==s.expectedStatus){s.onError(i.status);return}const o=fT(i);if(r===Mg){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:o}):(ne('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone({begin:0,chunk:o}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class gT{constructor(e){this._source=e,this._manager=new pT(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ye(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new mT(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new yT(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class mT{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Yp(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...u]=o.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=db({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=fb(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Kp(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yT{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Yp((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Kp(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const vT=/^[a-z][a-z0-9\-+.]+:/i;function wT(n){if(vT.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class AT{constructor(e){this.source=e,this.url=wT(e.url),Ye(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ye(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ST(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new xT(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class ST{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Nu(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new zr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class xT{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const bT=1e5,Kt=30,_T=.8;var qw,or,en,ph,gh,Ta,hi,mh,yh,Pa,bl,_l,lr,El,vh,Cl,Na,wh,Ah,Ra,La,Sh,cr,kl,zi,yb,vb,oy,kn,sf,ly,wb,Ab;const Ze=class Ze{constructor({textContentSource:e,container:t,viewport:s}){S(this,zi);S(this,or,Promise.withResolvers());S(this,en,null);S(this,ph,!1);S(this,gh,!!((qw=globalThis.FontInspector)!=null&&qw.enabled));S(this,Ta,null);S(this,hi,null);S(this,mh,0);S(this,yh,0);S(this,Pa,null);S(this,bl,null);S(this,_l,0);S(this,lr,0);S(this,El,Object.create(null));S(this,vh,[]);S(this,Cl,null);S(this,Na,[]);S(this,wh,new WeakMap);S(this,Ah,null);var c;if(e instanceof ReadableStream)g(this,Cl,e);else if(typeof e=="object")g(this,Cl,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,en,g(this,bl,t)),g(this,lr,s.scale*(globalThis.devicePixelRatio||1)),g(this,_l,s.rotation),g(this,hi,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:o}=s.rawDims;g(this,Ah,[1,0,0,-1,-a,o+r]),g(this,yh,i),g(this,mh,r),x(c=Ze,kn,wb).call(c),mo(t,s),l(this,or).promise.finally(()=>{l(Ze,kl).delete(this),g(this,hi,null),g(this,El,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Wt.platform;return ae(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Pa).read().then(({value:t,done:s})=>{if(s){l(this,or).resolve();return}l(this,Ta)??g(this,Ta,t.lang),Object.assign(l(this,El),t.styles),x(this,zi,yb).call(this,t.items),e()},l(this,or).reject)};return g(this,Pa,l(this,Cl).getReader()),l(Ze,kl).add(this),e(),l(this,or).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==l(this,_l)&&(t==null||t(),g(this,_l,i),mo(l(this,bl),{rotation:i})),s!==l(this,lr)){t==null||t(),g(this,lr,s);const a={div:null,properties:null,ctx:x(r=Ze,kn,sf).call(r,l(this,Ta))};for(const o of l(this,Na))a.properties=l(this,wh).get(o),a.div=o,x(this,zi,oy).call(this,a)}}cancel(){var t;const e=new zr("TextLayer task cancelled.");(t=l(this,Pa))==null||t.cancel(e).catch(()=>{}),g(this,Pa,null),l(this,or).reject(e)}get textDivs(){return l(this,Na)}get textContentItemsStr(){return l(this,vh)}static cleanup(){if(!(l(this,kl).size>0)){l(this,Ra).clear();for(const{canvas:e}of l(this,La).values())e.remove();l(this,La).clear()}}};or=new WeakMap,en=new WeakMap,ph=new WeakMap,gh=new WeakMap,Ta=new WeakMap,hi=new WeakMap,mh=new WeakMap,yh=new WeakMap,Pa=new WeakMap,bl=new WeakMap,_l=new WeakMap,lr=new WeakMap,El=new WeakMap,vh=new WeakMap,Cl=new WeakMap,Na=new WeakMap,wh=new WeakMap,Ah=new WeakMap,Ra=new WeakMap,La=new WeakMap,Sh=new WeakMap,cr=new WeakMap,kl=new WeakMap,zi=new WeakSet,yb=function(e){var i,r;if(l(this,ph))return;(r=l(this,hi)).ctx??(r.ctx=x(i=Ze,kn,sf).call(i,l(this,Ta)));const t=l(this,Na),s=l(this,vh);for(const a of e){if(t.length>bT){ne("Ignoring additional textDivs for performance reasons."),g(this,ph,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,en);g(this,en,document.createElement("span")),l(this,en).classList.add("markedContent"),a.id!==null&&l(this,en).setAttribute("id",`${a.id}`),o.append(l(this,en))}else a.type==="endMarkedContent"&&g(this,en,l(this,en).parentNode);continue}s.push(a.str),x(this,zi,vb).call(this,a)}},vb=function(e){var A;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Na).push(t);const i=G.transform(l(this,Ah),e.transform);let r=Math.atan2(i[1],i[0]);const a=l(this,El)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=l(this,gh)&&a.fontSubstitution||a.fontFamily;o=Ze.fontFamilyMap.get(o)||o;const c=Math.hypot(i[2],i[3]),u=c*x(A=Ze,kn,Ab).call(A,o,l(this,Ta));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;l(this,en)===l(this,bl)?(p.left=`${(100*h/l(this,yh)).toFixed(2)}%`,p.top=`${(100*d/l(this,mh)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(Ze,cr)*c).toFixed(2)}px)`,p.fontFamily=o,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,gh)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);_!==v&&Math.max(_,v)/Math.min(_,v)>1.5&&(m=!0)}if(m&&(s.canvasWidth=a.vertical?e.height:e.width),l(this,wh).set(t,s),l(this,hi).div=t,l(this,hi).properties=s,x(this,zi,oy).call(this,l(this,hi)),s.hasText&&l(this,en).append(t),s.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),l(this,en).append(_)}},oy=function(e){var o;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let a="";if(l(Ze,cr)>1&&(a=`scale(${1/l(Ze,cr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;x(o=Ze,kn,ly).call(o,i,h*l(this,lr),c);const{width:d}=i.measureText(t.textContent);d>0&&(a=`scaleX(${u*l(this,lr)/d}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(r.transform=a)},kn=new WeakSet,sf=function(e=null){let t=l(this,La).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,La).set(e,t),l(this,Sh).set(t,{size:0,family:""})}return t},ly=function(e,t,s){const i=l(this,Sh).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},wb=function(){if(l(this,cr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),g(this,cr,e.getBoundingClientRect().height),e.remove()},Ab=function(e,t){const s=l(this,Ra).get(e);if(s)return s;const i=x(this,kn,sf).call(this,t);i.canvas.width=i.canvas.height=Kt,x(this,kn,ly).call(this,i,Kt,e);const r=i.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const h=a/(a+o);return l(this,Ra).set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,Kt,Kt),i.strokeText("g",0,0);let c=i.getImageData(0,0,Kt,Kt).data;o=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){o=Math.ceil(h/4/Kt);break}i.clearRect(0,0,Kt,Kt),i.strokeText("A",0,Kt),c=i.getImageData(0,0,Kt,Kt).data,a=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){a=Kt-Math.floor(h/4/Kt);break}i.canvas.width=i.canvas.height=0;const u=a?a/(a+o):_T;return l(this,Ra).set(e,u),u},S(Ze,kn),S(Ze,Ra,new Map),S(Ze,La,new Map),S(Ze,Sh,new WeakMap),S(Ze,cr,null),S(Ze,kl,new Set);let Ru=Ze;class Lu{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var c;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Lu.shouldBuildText(o))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const ET=65536,CT=100,kT=5e3,TT=Dt?Uk:zk,PT=Dt?$k:rb,NT=Dt?Hk:Bk,RT=Dt?Vk:cb;function LT(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new cy,{docId:t}=e,s=n.url?MT(n.url):null,i=n.data?IT(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof Sb?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:ET;let h=n.worker instanceof nl?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!qp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,A=n.CMapReaderFactory||PT,_=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,v=n.StandardFontDataFactory||RT,w=n.stopAtErrors!==!0,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Dt,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Dt&&(Wt.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P=typeof n.disableFontFace=="boolean"?n.disableFontFace:Dt,M=n.fontExtraProperties===!0,D=n.enableXfa===!0,O=n.ownerDocument||globalThis.document,j=n.disableRange===!0,ee=n.disableStream===!0,J=n.disableAutoFetch===!0,me=n.pdfBug===!0,z=n.CanvasFactory||TT,X=n.FilterFactory||NT,I=n.enableHWA===!0,V=c?c.length:n.length??NaN,K=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Dt&&!P,oe=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:A===rb&&v===cb&&p&&_&&jc(p,document.baseURI)&&jc(_,document.baseURI),ie=null;yk(d);const _e={canvasFactory:new z({ownerDocument:O,enableHWA:I}),filterFactory:new X({docId:t,ownerDocument:O}),cMapReaderFactory:oe?null:new A({baseUrl:p,isCompressed:m}),standardFontDataFactory:oe?null:new v({baseUrl:_})};if(!h){const Ee={verbosity:d,port:ki.workerPort};h=Ee.port?nl.fromPort(Ee):new nl(Ee),e._worker=h}const ft={docId:t,apiVersion:"4.10.38",data:i,password:o,disableAutoFetch:J,rangeChunkSize:u,length:V,docBaseUrl:f,enableXfa:D,evaluatorOptions:{maxImageSize:b,disableFontFace:P,ignoreErrors:w,isEvalSupported:E,isOffscreenCanvasSupported:C,isImageDecoderSupported:T,canvasMaxAreaInBytes:k,fontExtraProperties:M,useSystemFonts:K,cMapUrl:oe?p:null,standardFontDataUrl:oe?_:null}},Rn={disableFontFace:P,fontExtraProperties:M,ownerDocument:O,pdfBug:me,styleElement:ie,loadingParams:{disableAutoFetch:J,enableXfa:D}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ee=h.messageHandler.sendWithPromise("GetDocRequest",ft,i?[i.buffer]:null);let ue;if(c)ue=new oT(c,{disableRange:j,disableStream:ee});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let Ss;if(Dt)if(jc(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ss=Uw}else Ss=AT;else Ss=jc(s)?Uw:gT;ue=new Ss({url:s,length:V,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:j,disableStream:ee})}return Ee.then(Ss=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Xr=new Uc(t,Ss,h.port),wc=new jT(Xr,e,ue,Rn,_e);e._transport=wc,Xr.send("Ready",null)})}).catch(e._capability.reject),e}function MT(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Dt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function IT(n){if(Dt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Gp(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $w(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var fp;const pp=class pp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ot(pp,fp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};fp=new WeakMap,S(pp,fp,0);let cy=pp;class Sb{constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){be("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class DT{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ae(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ur,di,$n,Lo,rf;class FT{constructor(e,t,s,i=!1){S(this,$n);S(this,ur,null);S(this,di,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new Pw:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new xb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new ud({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ae(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=Xi.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var E,C;(E=this._stats)==null||E.time("Overall");const f=this._transport.getRenderingIntent(s,i,h,d),{renderingIntent:p,cacheKey:m}=f;g(this,di,!1),x(this,$n,rf).call(this),o||(o=this._transport.getOptionalContentConfig(p));let A=this._intentStates.get(m);A||(A=Object.create(null),this._intentStates.set(m,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const _=!!(p&Sn.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(f));const v=T=>{var k;A.renderTasks.delete(w),(this._maybeCleanupAfterRender||_)&&g(this,di,!0),x(this,$n,Lo).call(this,!_),T?(w.capability.reject(T),this._abortOperatorList({intentState:A,reason:T instanceof Error?T:new Error(T)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new hy({callback:v,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:u});(A.renderTasks||(A.renderTasks=new Set)).add(w);const b=w.task;return Promise.all([A.displayReadyCapability.promise,o]).then(([T,k])=>{var P;if(this.destroyed){v();return}if((P=this._stats)==null||P.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:T,optionalContentConfig:k}),w.operatorListChanged()}).catch(v),b}getOperatorList({intent:e="display",annotationMode:t=Xi.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,s,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Lu.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){a.read().then(function({value:c,done:u}){if(u){s(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),g(this,di,!1),x(this,$n,rf).call(this),Promise.all(e)}cleanup(e=!1){g(this,di,!0);const t=x(this,$n,Lo).call(this,!1);return e&&t&&this._stats&&(this._stats=new Pw),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&x(this,$n,Lo).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:a}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},a).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();x(this,$n,Lo).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Vv){let i=CT;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new zr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}ur=new WeakMap,di=new WeakMap,$n=new WeakSet,Lo=function(e=!1){if(x(this,$n,rf).call(this),!l(this,di)||this.destroyed)return!1;if(e)return g(this,ur,setTimeout(()=>{g(this,ur,null),x(this,$n,Lo).call(this,!1)},kT)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,di,!1),!0},rf=function(){l(this,ur)&&(clearTimeout(l(this,ur)),g(this,ur,null))};var fi,gp;class OT{constructor(){S(this,fi,new Map);S(this,gp,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};l(this,gp).then(()=>{for(const[i]of l(this,fi))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){ne("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}l(this,fi).set(t,i)}removeEventListener(e,t){const s=l(this,fi).get(t);s==null||s(),l(this,fi).delete(t)}terminate(){for(const[,e]of l(this,fi))e==null||e();l(this,fi).clear()}}fi=new WeakMap,gp=new WeakMap;var mp,Ma,Ia,Tl,af,Pl,of;const Re=class Re{constructor({name:e=null,port:t=null,verbosity:s=vk()}={}){S(this,Tl);var i;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=l(Re,Ia))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Re,Ia)||g(Re,Ia,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Uc("main","worker",e),this._messageHandler.on("ready",function(){}),x(this,Tl,af).call(this)}_initialize(){if(l(Re,Ma)||l(Re,Pl,of)){this._setupFakeWorker();return}let{workerSrc:e}=Re;try{Re._isSameOrigin(window.location.href,e)||(e=Re._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Uc("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",o=>{if(r.abort(),this.destroyed||!o){i();return}this._messageHandler=s,this._port=t,this._webWorker=t,x(this,Tl,af).call(this)}),s.on("ready",o=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{Wp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Re,Ma)||(ne("Setting up fake worker."),g(Re,Ma,!0)),Re._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new OT;this._port=t;const s=`fake${Ot(Re,mp)._++}`,i=new Uc(s+"_worker",s,t);e.setup(i,t),this._messageHandler=new Uc(s,s+"_worker",t),x(this,Tl,af).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,s;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=l(Re,Ia))==null||t.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=l(this,Ia))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Re(e)}static get workerSrc(){if(ki.workerSrc)return ki.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ae(this,"_setupFakeWorkerGlobal",(async()=>l(this,Pl,of)?l(this,Pl,of):(await import(this.workerSrc)).WorkerMessageHandler)())}};mp=new WeakMap,Ma=new WeakMap,Ia=new WeakMap,Tl=new WeakSet,af=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Pl=new WeakSet,of=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(Re,Pl),S(Re,mp,0),S(Re,Ma,!1),S(Re,Ia),Dt&&(g(Re,Ma,!0),ki.workerSrc||(ki.workerSrc="./pdf.worker.mjs")),Re._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(t,s);return s.origin===i.origin},Re._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let nl=Re;var pi,Os,Nl,Rl,gi,Da,Xc;class jT{constructor(e,t,s,i,r){S(this,Da);S(this,pi,new Map);S(this,Os,new Map);S(this,Nl,new Map);S(this,Rl,new Map);S(this,gi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xb,this.fontLoader=new Ok({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ae(this,"annotationStorage",new qv)}getRenderingIntent(e,t=Xi.ENABLE,s=null,i=!1,r=!1){let a=Sn.DISPLAY,o=Jm;switch(e){case"any":a=Sn.ANY;break;case"display":break;case"print":a=Sn.PRINT;break;default:ne(`getRenderingIntent - invalid intent: ${e}`)}const c=a&Sn.PRINT&&s instanceof Zx?s:this.annotationStorage;switch(t){case Xi.DISABLE:a+=Sn.ANNOTATIONS_DISABLE;break;case Xi.ENABLE:break;case Xi.ENABLE_FORMS:a+=Sn.ANNOTATIONS_FORMS;break;case Xi.ENABLE_STORAGE:a+=Sn.ANNOTATIONS_STORAGE,o=c.serializable;break;default:ne(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=Sn.IS_EDITING),r&&(a+=Sn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,gi))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of l(this,Os).values())e.push(i._destroy());l(this,Os).clear(),l(this,Nl).clear(),l(this,Rl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,pi).clear(),this.filterFactory.destroy(),Ru.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new zr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Ye(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}Ye(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:a}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(s,i)=>{Ye(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){i.close();return}Ye(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new DT(s,this))}),e.on("DocException",s=>{t._capability.reject(Qt(s))}),e.on("PasswordRequest",s=>{g(this,gi,Promise.withResolvers());try{if(!t.onPassword)throw Qt(s);const i=r=>{r instanceof Error?l(this,gi).reject(r):l(this,gi).resolve({password:r})};t.onPassword(i,s.code)}catch(i){l(this,gi).reject(i)}return l(this,gi).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,Os).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;ne(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new jk(r,{disableFontFace:o,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Ye(f,"The imageRef must be defined.");for(const p of l(this,Os).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,a])=>{var c;if(this.destroyed)return;const o=l(this,Os).get(i);if(!o.objs.has(s)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":o.objs.resolve(s,a),(a==null?void 0:a.dataLen)>fk&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),e.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=l(this,Nl).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,Rl).set(r.refStr,e);const a=new FT(t,r,this,this._params.pdfBug);return l(this,Os).set(t,a),a});return l(this,Nl).set(t,i),i}getPageIndex(e){return $w(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return x(this,Da,Xc).call(this,"GetFieldObjects")}hasJSActions(){return x(this,Da,Xc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,Da,Xc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return x(this,Da,Xc).call(this,"GetOptionalContentConfig").then(t=>new aT(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,pi).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new iT(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,pi).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Os).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,pi).clear(),this.filterFactory.destroy(!0),Ru.cleanup()}}cachedPageNumber(e){if(!$w(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Rl).get(t)??null}}pi=new WeakMap,Os=new WeakMap,Nl=new WeakMap,Rl=new WeakMap,gi=new WeakMap,Da=new WeakSet,Xc=function(e,t=null){const s=l(this,pi).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return l(this,pi).set(e,i),i};const Rc=Symbol("INITIAL_DATA");var dn,xh,uy;class xb{constructor(){S(this,xh);S(this,dn,Object.create(null))}get(e,t=null){if(t){const i=x(this,xh,uy).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=l(this,dn)[e];if(!s||s.data===Rc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=l(this,dn)[e];return!!t&&t.data!==Rc}delete(e){const t=l(this,dn)[e];return!t||t.data===Rc?!1:(delete l(this,dn)[e],!0)}resolve(e,t=null){const s=x(this,xh,uy).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in l(this,dn)){const{data:s}=l(this,dn)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}g(this,dn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,dn)){const{data:t}=l(this,dn)[e];t!==Rc&&(yield[e,t])}}}dn=new WeakMap,xh=new WeakSet,uy=function(e){var t;return(t=l(this,dn))[e]||(t[e]={...Promise.withResolvers(),data:Rc})};var hr;class zT{constructor(e){S(this,hr,null);g(this,hr,e),this.onContinue=null}get promise(){return l(this,hr).capability.promise}cancel(e=0){l(this,hr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,hr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,hr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}hr=new WeakMap;var dr,Fa;const ea=class ea{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){S(this,dr,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(ea,Fa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(ea,Fa).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:a}=this.params;this.gfx=new tl(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,dr)&&(window.cancelAnimationFrame(l(this,dr)),g(this,dr,null)),l(ea,Fa).delete(this._canvas),this.callback(e||new Vv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,dr,window.requestAnimationFrame(()=>{g(this,dr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(ea,Fa).delete(this._canvas),this.callback())))}};dr=new WeakMap,Fa=new WeakMap,S(ea,Fa,new WeakSet);let hy=ea;const BT="4.10.38",HT="f9bea397f";function Vw(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Lc(n){return Math.max(0,Math.min(255,255*n))}class Ww{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Lc(e),[e,e,e]}static G_HTML([e]){const t=Vw(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Lc)}static RGB_HTML(e){return`#${e.map(Vw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[Lc(1-Math.min(1,e+i)),Lc(1-Math.min(1,s+i)),Lc(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,a=1-s,o=Math.min(i,r,a);return["CMYK",i,r,a,o]}}class UT{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){be("Abstract method `_createSVG` called.")}}class Kv extends UT{_createSVG(e){return document.createElementNS(Ys,e)}}class bb{static setupStorage(e,t,s,i,r){const a=i.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=r!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);a.append(p),o&&Lu.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,a]];for(;h.length>0;){const[p,m,A]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const _=p.children[++h.at(-1)[1]];if(_===null)continue;const{name:v}=_;if(v==="#text"){const b=document.createTextNode(_.value);u.push(b),A.append(b);continue}const w=(d=_==null?void 0:_.attributes)!=null&&d.xmlns?document.createElementNS(_.attributes.xmlns,v):document.createElement(v);if(A.append(w),_.attributes&&this.setAttributes({html:w,element:_,storage:t,intent:r,linkService:s}),((f=_.children)==null?void 0:f.length)>0)h.push([_,-1,w]);else if(_.value){const b=document.createTextNode(_.value);o&&Lu.shouldBuildText(v)&&u.push(b),w.append(b)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dd=1e3,$T=9,vo=new WeakSet;function Fr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class VT{static create(e){switch(e.data.annotationType){case Je.LINK:return new _b(e);case Je.TEXT:return new WT(e);case Je.WIDGET:switch(e.data.fieldType){case"Tx":return new GT(e);case"Btn":return e.data.radioButton?new kb(e):e.data.checkBox?new qT(e):new YT(e);case"Ch":return new KT(e);case"Sig":return new XT(e)}return new _o(e);case Je.POPUP:return new fy(e);case Je.FREETEXT:return new Lb(e);case Je.LINE:return new JT(e);case Je.SQUARE:return new ZT(e);case Je.CIRCLE:return new eP(e);case Je.POLYLINE:return new Mb(e);case Je.CARET:return new nP(e);case Je.INK:return new Qv(e);case Je.POLYGON:return new tP(e);case Je.HIGHLIGHT:return new Ib(e);case Je.UNDERLINE:return new sP(e);case Je.SQUIGGLY:return new iP(e);case Je.STRIKEOUT:return new rP(e);case Je.STAMP:return new Db(e);case Je.FILEATTACHMENT:return new aP(e);default:return new Ge(e)}}}var Oa,Ll,Ml,bh,dy;const n0=class n0{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){S(this,bh);S(this,Oa,null);S(this,Ll,!1);S(this,Ml,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n0._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;l(this,Oa)||g(this,Oa,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&x(this,bh,dy).call(this,t),(s=l(this,Ml))==null||s.popup.updateEdited(e)}resetEdited(){var e;l(this,Oa)&&(x(this,bh,dy).call(this,l(this,Oa).rect),(e=l(this,Ml))==null||e.popup.resetEdited(),g(this,Oa,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof _o||(r.tabIndex=dd);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof fy){const{rotation:A}=t;return!t.hasOwnCanvas&&A!==0&&this.setRotation(A,r),r}const{width:o,height:c}=Fr(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const A=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(A>0||_>0){const w=`calc(${A}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;a.borderRadius=w}else if(this instanceof kb){const w=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=w}switch(t.borderStyle.style){case Pc.SOLID:a.borderStyle="solid";break;case Pc.DASHED:a.borderStyle="dashed";break;case Pc.BEVELED:ne("Unimplemented border style: beveled");break;case Pc.INSET:ne("Unimplemented border style: inset");break;case Pc.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(g(this,Ll,!0),a.borderColor=G.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=G.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;a.left=`${100*(u[0]-f)/h}%`,a.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/h}%`,a.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:a}=Fr(this.data.rect);let o,c;e%180===0?(o=100*r/s,c=100*a/i):(o=100*a/s,c=100*r/i),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],a=r[0],o=r.slice(1);i.target.style[s]=Ww[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:Ww[`${a}_rgb`](o)})};return ae(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const a=s[i];if(a){const o={detail:{[i]:r},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(A=>Math.fround(A));if(e.length===8){const[A,_,v,w]=e.subarray(2,6);if(i===A&&r===_&&t===v&&s===w)return}const{style:a}=this.container;let o;if(l(this,Ll)){const{borderColor:A,borderWidth:_}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const c=i-t,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let A=2,_=e.length;A<_;A+=8){const v=e[A],w=e[A+1],b=e[A+2],E=e[A+3],C=h.createElement("rect"),T=(b-t)/c,k=(r-w)/u,P=(v-b)/c,M=(w-E)/u;C.setAttribute("x",T),C.setAttribute("y",k),C.setAttribute("width",P),C.setAttribute("height",M),p.append(C),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${P}" height="${M}"/>`)}l(this,Ll)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=g(this,Ml,new fy({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){be("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:a,exportValues:o}of i){if(r===-1||a===t)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!vo.has(u)){ne(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==t&&vo.has(i)&&s.push({id:a,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Oa=new WeakMap,Ll=new WeakMap,Ml=new WeakMap,bh=new WeakSet,dy=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;s==null||s.splice(0,4,...e);const{width:u,height:h}=Fr(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,i===0?(t.width=`${100*u/r}%`,t.height=`${100*h/a}%`):this.setRotation(i)};let Ge=n0;var bn,Kr,Eb,Cb;class _b extends Ge{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});S(this,bn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(x(this,bn,Eb).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(x(this,bn,Cb).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&x(this,bn,Kr).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),x(this,bn,Kr).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=i.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),x(this,bn,Kr).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),x(this,bn,Kr).call(this),!this._fieldObjects){ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:a,include:o}=s,c=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:A}of m)f.add(A)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===o&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const A=f.defaultValue||"";u.setValue(p,{value:A});break}case"checkbox":case"radiobutton":{const A=f.defaultValue===f.exportValues;u.setValue(p,{value:A});break}case"combobox":case"listbox":{const A=f.defaultValue||"";u.setValue(p,{value:A});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!vo.has(m)){ne(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}bn=new WeakSet,Kr=function(){this.container.setAttribute("data-internal-link","")},Eb=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},x(this,bn,Kr).call(this)},Cb=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),x(this,bn,Kr).call(this)};class WT extends Ge{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class _o extends Ge{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Wt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var o;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(e,t,s,i){var r,a,o;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":G.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||$T,r=e.style;let a;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(kg*i))||1,d=u/h;a=Math.min(i,c(d/kg))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,c(u/kg))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=G.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class GT extends _o{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),r.setValue(a.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),vo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=dd,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var A;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(A){h.userValue=A.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:_}=A.detail;h.formattedValue=_,_!=null&&A.target!==document.activeElement&&(A.target.value=_),e.setValue(t,{formattedValue:_})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var b;const{charLimit:_}=A.detail,{target:v}=A;if(_===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",_);let w=h.userValue;!w||w.length<=_||(w=w.slice(0,_),v.value=h.userValue=w,e.setValue(t,{value:w}),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("keydown",p=>{var _;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:A}=p.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",p=>{var A,_;if(!h.focused||!p.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var C;h.lastCommittedValue=null;const{data:m,target:A}=p,{value:_,selectionStart:v,selectionEnd:w}=A;let b=v,E=w;switch(p.inputType){case"deleteWordBackward":{const T=_.substring(0,v).match(/\w*[^\w]*$/);T&&(b-=T[0].length);break}case"deleteWordForward":{const T=_.substring(v).match(/^[^\w]*\w*/);T&&(E+=T[0].length);break}case"deleteContentBackward":v===w&&(b-=1);break;case"deleteContentForward":v===w&&(E+=1);break}p.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:m||"",willCommit:!1,selStart:b,selEnd:E}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class XT extends _o{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class qT extends _o{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return vo.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=dd,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,s)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class kb extends _o{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(vo.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=dd,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class YT extends _b{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class KT extends _o{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");vo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=dd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),a=()=>{h.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const A of i.options)A.selected=m.has(A.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,m=f.detail.remove;p[m].selected=!1,i.remove(m),p.length>0&&Array.prototype.findIndex.call(p,_=>_.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:p,displayValue:m,exportValue:A}=f.detail.insert,_=i.children[p],v=document.createElement("option");v.textContent=m,v.value=A,_?_.before(v):i.append(v),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of p){const{displayValue:A,exportValue:_}=m,v=document.createElement("option");v.textContent=A,v.value=_,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=o(!0),f=o(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class fy extends Ge{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Ge._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new QT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${$v}${s}`).join(",")),this.container}}var Il,yp,vp,Dl,ja,He,mi,Fl,_h,Eh,Ol,yi,rs,vi,Ch,wi,kh,za,Ba,xe,lf,py,Tb,Pb,Nb,Rb,cf,uf,gy;class QT{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:u,parentRect:h,open:d}){S(this,xe);S(this,Il,x(this,xe,Nb).bind(this));S(this,yp,x(this,xe,gy).bind(this));S(this,vp,x(this,xe,uf).bind(this));S(this,Dl,x(this,xe,cf).bind(this));S(this,ja,null);S(this,He,null);S(this,mi,null);S(this,Fl,null);S(this,_h,null);S(this,Eh,null);S(this,Ol,null);S(this,yi,!1);S(this,rs,null);S(this,vi,null);S(this,Ch,null);S(this,wi,null);S(this,kh,null);S(this,za,null);S(this,Ba,!1);var f;g(this,He,e),g(this,kh,i),g(this,mi,a),g(this,wi,o),g(this,Eh,c),g(this,ja,t),g(this,Ch,u),g(this,Ol,h),g(this,_h,s),g(this,Fl,Gv.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,Dl)),p.addEventListener("mouseenter",l(this,vp)),p.addEventListener("mouseleave",l(this,yp)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",l(this,Il));l(this,He).hidden=!0,d&&x(this,xe,cf).call(this)}render(){if(l(this,rs))return;const e=g(this,rs,document.createElement("div"));if(e.className="popup",l(this,ja)){const r=e.style.outlineColor=G.makeHexColor(...l(this,ja));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=G.makeHexColor(...l(this,ja).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=l(this,kh),e.append(t),l(this,Fl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Fl).valueOf()})),t.append(r)}const i=l(this,xe,lf);if(i)bb.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,mi));e.append(r)}l(this,He).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const o=i[r];s.append(document.createTextNode(o)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;l(this,za)||g(this,za,{contentsObj:l(this,mi),richText:l(this,wi)}),e&&g(this,vi,null),t&&(g(this,wi,x(this,xe,Pb).call(this,t)),g(this,mi,null)),(s=l(this,rs))==null||s.remove(),g(this,rs,null)}resetEdited(){var e;l(this,za)&&({contentsObj:Ot(this,mi)._,richText:Ot(this,wi)._}=l(this,za),g(this,za,null),(e=l(this,rs))==null||e.remove(),g(this,rs,null),g(this,vi,null))}forceHide(){g(this,Ba,this.isVisible),l(this,Ba)&&(l(this,He).hidden=!0)}maybeShow(){l(this,Ba)&&(l(this,rs)||x(this,xe,uf).call(this),g(this,Ba,!1),l(this,He).hidden=!1)}get isVisible(){return l(this,He).hidden===!1}}Il=new WeakMap,yp=new WeakMap,vp=new WeakMap,Dl=new WeakMap,ja=new WeakMap,He=new WeakMap,mi=new WeakMap,Fl=new WeakMap,_h=new WeakMap,Eh=new WeakMap,Ol=new WeakMap,yi=new WeakMap,rs=new WeakMap,vi=new WeakMap,Ch=new WeakMap,wi=new WeakMap,kh=new WeakMap,za=new WeakMap,Ba=new WeakMap,xe=new WeakSet,lf=function(){const e=l(this,wi),t=l(this,mi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,wi).html||null},py=function(){var e,t,s;return((s=(t=(e=l(this,xe,lf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},Tb=function(){var e,t,s;return((s=(t=(e=l(this,xe,lf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},Pb=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:l(this,xe,Tb),fontSize:l(this,xe,py)?`calc(${l(this,xe,py)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},Nb=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,yi))&&x(this,xe,cf).call(this)},Rb=function(){if(l(this,vi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=l(this,Eh);let a=!!l(this,Ol),o=a?l(this,Ol):l(this,Ch);for(const m of l(this,_h))if(!o||G.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const c=G.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,d=c[0]+h,f=c[1];g(this,vi,[100*(d-i)/t,100*(f-r)/s]);const{style:p}=l(this,He);p.left=`${l(this,vi)[0]}%`,p.top=`${l(this,vi)[1]}%`},cf=function(){g(this,yi,!l(this,yi)),l(this,yi)?(x(this,xe,uf).call(this),l(this,He).addEventListener("click",l(this,Dl)),l(this,He).addEventListener("keydown",l(this,Il))):(x(this,xe,gy).call(this),l(this,He).removeEventListener("click",l(this,Dl)),l(this,He).removeEventListener("keydown",l(this,Il)))},uf=function(){l(this,rs)||this.render(),this.isVisible?l(this,yi)&&l(this,He).classList.add("focused"):(x(this,xe,Rb).call(this),l(this,He).hidden=!1,l(this,He).style.zIndex=parseInt(l(this,He).style.zIndex)+1e3)},gy=function(){l(this,He).classList.remove("focused"),!(l(this,yi)||!this.isVisible)&&(l(this,He).hidden=!0,l(this,He).style.zIndex=parseInt(l(this,He).style.zIndex)-1e3)};class Lb extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Th;class JT extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Th,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:i}=Fr(t.rect),r=this.svgFactory.create(s,i,!0),a=g(this,Th,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Th)}addHighlightArea(){this.container.classList.add("highlightArea")}}Th=new WeakMap;var Ph;class ZT extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Ph,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:i}=Fr(t.rect),r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=g(this,Ph,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",s-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ph=new WeakMap;var Nh;class eP extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Nh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:i}=Fr(t.rect),r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=g(this,Nh,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",s/2),o.setAttribute("cy",i/2),o.setAttribute("rx",s/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap;var Rh;class Mb extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Rh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:a,height:o}=Fr(t),c=this.svgFactory.create(a,o,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-t[0],m=t[3]-s[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=g(this,Rh,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rh=new WeakMap;class tP extends Mb{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nP extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Lh,Ha,Mh,my;class Qv extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,Mh);S(this,Lh,null);S(this,Ha,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?te.HIGHLIGHT:te.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:c,height:u}=x(this,Mh,my).call(this,s,t),h=this.svgFactory.create(c,u,!0),d=g(this,Lh,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,p=i.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);l(this,Ha).push(m),m.setAttribute("points",i[f].join(",")),d.append(m)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,a=l(this,Lh);if(s>=0&&a.setAttribute("stroke-width",s||1),i)for(let o=0,c=l(this,Ha).length;o<c;o++)l(this,Ha)[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:c,height:u}=x(this,Mh,my).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return l(this,Ha)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lh=new WeakMap,Ha=new WeakMap,Mh=new WeakSet,my=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class Ib extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=te.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class sP extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class iP extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class rP extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Db extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=te.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ih,Dh,yy;class aP extends Ge{constructor(t){var i;super(t,{isRenderable:!0});S(this,Dh);S(this,Ih,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",x(this,Dh,yy).bind(this)),g(this,Ih,i);const{isMac:r}=Wt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&x(this,Dh,yy).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return l(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap,Dh=new WeakSet,yy=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Fh,Ua,$a,Oh,wo,Fb,vy;class oP{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:o}){S(this,wo);S(this,Fh,null);S(this,Ua,null);S(this,$a,new Map);S(this,Oh,null);this.div=e,g(this,Fh,t),g(this,Ua,s),g(this,Oh,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return l(this,$a).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;mo(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Kv,annotationStorage:e.annotationStorage||new qv,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===Je.POPUP;if(c){const d=i.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=Fr(o.rect);if(d<=0||f<=0)continue}r.data=o;const u=VT.create(r);if(!u.isRenderable)continue;if(!c&&o.popupRef){const d=i.get(o.popupRef);d?d.push(u):i.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await x(this,wo,Fb).call(this,h,o.id),u._isEditable&&(l(this,$a).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}x(this,wo,vy).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,mo(t,{rotation:e.rotation}),x(this,wo,vy).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,$a).values())}getEditableAnnotation(e){return l(this,$a).get(e)}}Fh=new WeakMap,Ua=new WeakMap,$a=new WeakMap,Oh=new WeakMap,wo=new WeakSet,Fb=async function(e,t){var a,o;const s=e.firstChild||e,i=s.id=`${$v}${t}`,r=await((a=l(this,Oh))==null?void 0:a.getAriaAttributes(i));if(r)for(const[c,u]of r)s.setAttribute(c,u);this.div.append(e),(o=l(this,Fh))==null||o.moveElementInDOM(this.div,e,s,!1)},vy=function(){if(!l(this,Ua))return;const e=this.div;for(const[t,s]of l(this,Ua)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}l(this,Ua).clear()};const Md=/\r\n?|\n/g;var as,fn,jh,Va,pn,Qe,Ob,jb,zb,hf,Li,df,ff,Bb,Ay,Hb;const Ce=class Ce extends je{constructor(t){super({...t,name:"freeTextEditor"});S(this,Qe);S(this,as);S(this,fn,"");S(this,jh,`${this.id}-editor`);S(this,Va,null);S(this,pn);g(this,as,t.color||Ce._defaultColor||je._defaultLineColor),g(this,pn,t.fontSize||Ce._defaultFontSize)}static get _keyboardManager(){const t=Ce.prototype,s=a=>a.isEmpty(),i=yo.TRANSLATE_SMALL,r=yo.TRANSLATE_BIG;return ae(this,"_keyboardManager",new hd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){je.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ce.FREETEXT_SIZE:Ce._defaultFontSize=s;break;case ce.FREETEXT_COLOR:Ce._defaultColor=s;break}}updateParams(t,s){switch(t){case ce.FREETEXT_SIZE:x(this,Qe,Ob).call(this,s);break;case ce.FREETEXT_COLOR:x(this,Qe,jb).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ce.FREETEXT_SIZE,Ce._defaultFontSize],[ce.FREETEXT_COLOR,Ce._defaultColor||je._defaultLineColor]]}get propertiesToUpdate(){return[[ce.FREETEXT_SIZE,l(this,pn)],[ce.FREETEXT_COLOR,l(this,as)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ce._internalPadding*t,-(Ce._internalPadding+l(this,pn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(te.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,Va,new AbortController);const t=this._uiManager.combinedSignal(l(this,Va));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,jh)),this._isDraggable=!0,(t=l(this,Va))==null||t.abort(),g(this,Va,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,fn),s=g(this,fn,x(this,Qe,zb).call(this).trimEnd());if(t===s)return;const i=r=>{if(g(this,fn,r),!r){this.remove();return}x(this,Qe,ff).call(this),this._uiManager.rebuild(this),x(this,Qe,hf).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),x(this,Qe,hf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ce._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,jh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,pn)}px * var(--scale-factor))`,i.color=l(this,as),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Yf(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,A;switch(this.rotation){case 0:m=t+(o[0]-f)/h,A=s+this.height-(o[1]-p)/d;break;case 90:m=t+(o[0]-f)/h,A=s-(o[1]-p)/d,[c,u]=[u,-c];break;case 180:m=t-this.width+(o[0]-f)/h,A=s-(o[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=t+(o[0]-f-this.height*d)/h,A=s+(o[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,A*a,c,u)}else this.setAt(t*r,s*a,this.width*r,this.height*a);x(this,Qe,ff).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,A,_;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=x(m=Ce,Li,Ay).call(m,s.getData("text")||"").replaceAll(Md,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Md,"")),v!==this.editorDiv){let w=h;for(const b of this.editorDiv.childNodes){if(b===v){w=d;continue}w.push(x(A=Ce,Li,df).call(A,b))}}h.push(c.nodeValue.slice(0,u).replaceAll(Md,""))}else if(c===this.editorDiv){let v=h,w=0;for(const b of this.editorDiv.childNodes)w++===u&&(v=d),v.push(x(_=Ce,Li,df).call(_,b))}g(this,fn,`${h.join(`
`)}${r}${d.join(`
`)}`),x(this,Qe,ff).call(this);const f=new Range;let p=h.reduce((v,w)=>v+w.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(p<=w){f.setStart(v,p),f.setEnd(v,p);break}p-=w}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var o;let r=null;if(t instanceof Lb){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:A,parent:{page:{pageNumber:_}}}=t;if(!m||m.length===0)return null;r=t={annotationType:te.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:A,pageIndex:_-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(t,s,i);return g(a,pn,t.fontSize),g(a,as,G.makeHexColor(...t.color)),g(a,fn,x(o=Ce,Li,Ay).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Ce._internalPadding*this.parentScale,i=this.getRect(s,s),r=je._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,as)),a={annotationType:te.FREETEXT,color:r,fontSize:l(this,pn),value:x(this,Qe,Bb).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!x(this,Qe,Hb).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${l(this,pn)}px * var(--scale-factor))`,i.color=l(this,as),s.replaceChildren();for(const a of l(this,fn).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),s.append(o)}const r=Ce._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,fn)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};as=new WeakMap,fn=new WeakMap,jh=new WeakMap,Va=new WeakMap,pn=new WeakMap,Qe=new WeakSet,Ob=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,pn))*this.parentScale),g(this,pn,r),x(this,Qe,hf).call(this)},i=l(this,pn);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},jb=function(t){const s=r=>{g(this,as,this.editorDiv.style.color=r)},i=l(this,as);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},zb=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(x(i=Ce,Li,df).call(i,r)),s=r);return t.join(`
`)},hf=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Li=new WeakSet,df=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Md,"")},ff=function(){if(this.editorDiv.replaceChildren(),!!l(this,fn))for(const t of l(this,fn).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},Bb=function(){return l(this,fn).replaceAll(""," ")},Ay=function(t){return t.replaceAll(" ","")},Hb=function(t){const{value:s,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((o,c)=>o!==r[c])||t.pageIndex!==a},S(Ce,Li),q(Ce,"_freeTextDefaultContent",""),q(Ce,"_internalPadding",0),q(Ce,"_defaultColor",null),q(Ce,"_defaultFontSize",10),q(Ce,"_type","freetext"),q(Ce,"_editorType",te.FREETEXT);let wy=Ce;class H{toSVGPath(){be("Abstract method `toSVGPath` must be implemented.")}get box(){be("Abstract getter `box` must be implemented.")}serialize(e,t){be("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o]*i,a[o+1]=s+e[o+1]*r;return a}static _rescaleAndSwap(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o+1]*i,a[o+1]=s+e[o]*r;return a}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,a){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+a)/6,(s+r)/2,(i+a)/2]}}q(H,"PRECISION",1e-4);var gn,os,jl,zl,js,re,Wa,Ga,zh,Bh,Bl,Hl,fr,Hh,wp,Ap,it,qc,Ub,$b,Vb,Wb,Gb,Xb;const ei=class ei{constructor({x:e,y:t},s,i,r,a,o=0){S(this,it);S(this,gn);S(this,os,[]);S(this,jl);S(this,zl);S(this,js,[]);S(this,re,new Float32Array(18));S(this,Wa);S(this,Ga);S(this,zh);S(this,Bh);S(this,Bl);S(this,Hl);S(this,fr,[]);g(this,gn,s),g(this,Hl,r*i),g(this,zl,a),l(this,re).set([NaN,NaN,NaN,NaN,e,t],6),g(this,jl,o),g(this,Bh,l(ei,Hh)*i),g(this,zh,l(ei,Ap)*i),g(this,Bl,i),l(this,fr).push(e,t)}isEmpty(){return isNaN(l(this,re)[8])}add({x:e,y:t}){var M;g(this,Wa,e),g(this,Ga,t);const[s,i,r,a]=l(this,gn);let[o,c,u,h]=l(this,re).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<l(this,zh))return!1;const m=p-l(this,Bh),A=m/p,_=A*d,v=A*f;let w=o,b=c;o=u,c=h,u+=_,h+=v,(M=l(this,fr))==null||M.push(e,t);const E=-v/m,C=_/m,T=E*l(this,Hl),k=C*l(this,Hl);return l(this,re).set(l(this,re).subarray(2,8),0),l(this,re).set([u+T,h+k],4),l(this,re).set(l(this,re).subarray(14,18),12),l(this,re).set([u-T,h-k],16),isNaN(l(this,re)[6])?(l(this,js).length===0&&(l(this,re).set([o+T,c+k],2),l(this,js).push(NaN,NaN,NaN,NaN,(o+T-s)/r,(c+k-i)/a),l(this,re).set([o-T,c-k],14),l(this,os).push(NaN,NaN,NaN,NaN,(o-T-s)/r,(c-k-i)/a)),l(this,re).set([w,b,o,c,u,h],6),!this.isEmpty()):(l(this,re).set([w,b,o,c,u,h],6),Math.abs(Math.atan2(b-c,w-o)-Math.atan2(v,_))<Math.PI/2?([o,c,u,h]=l(this,re).subarray(2,6),l(this,js).push(NaN,NaN,NaN,NaN,((o+u)/2-s)/r,((c+h)/2-i)/a),[o,c,w,b]=l(this,re).subarray(14,18),l(this,os).push(NaN,NaN,NaN,NaN,((w+o)/2-s)/r,((b+c)/2-i)/a),!0):([w,b,o,c,u,h]=l(this,re).subarray(0,6),l(this,js).push(((w+5*o)/6-s)/r,((b+5*c)/6-i)/a,((5*o+u)/6-s)/r,((5*c+h)/6-i)/a,((o+u)/2-s)/r,((c+h)/2-i)/a),[u,h,o,c,w,b]=l(this,re).subarray(12,18),l(this,os).push(((w+5*o)/6-s)/r,((b+5*c)/6-i)/a,((5*o+u)/6-s)/r,((5*c+h)/6-i)/a,((o+u)/2-s)/r,((c+h)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,js),t=l(this,os);if(isNaN(l(this,re)[6])&&!this.isEmpty())return x(this,it,Ub).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);x(this,it,Vb).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return x(this,it,$b).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,a){return new qb(e,t,s,i,r,a)}getOutlines(){var d;const e=l(this,js),t=l(this,os),s=l(this,re),[i,r,a,o]=l(this,gn),c=new Float32Array((((d=l(this,fr))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,fr)[f]-i)/a,c[f+1]=(l(this,fr)[f+1]-r)/o;if(c[c.length-2]=(l(this,Wa)-i)/a,c[c.length-1]=(l(this,Ga)-r)/o,isNaN(s[6])&&!this.isEmpty())return x(this,it,Wb).call(this,c);const u=new Float32Array(l(this,js).length+24+l(this,os).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=x(this,it,Xb).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return x(this,it,Gb).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,gn),l(this,Bl),l(this,jl),l(this,zl))}};gn=new WeakMap,os=new WeakMap,jl=new WeakMap,zl=new WeakMap,js=new WeakMap,re=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,zh=new WeakMap,Bh=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,fr=new WeakMap,Hh=new WeakMap,wp=new WeakMap,Ap=new WeakMap,it=new WeakSet,qc=function(){const e=l(this,re).subarray(4,6),t=l(this,re).subarray(16,18),[s,i,r,a]=l(this,gn);return[(l(this,Wa)+(e[0]-t[0])/2-s)/r,(l(this,Ga)+(e[1]-t[1])/2-i)/a,(l(this,Wa)+(t[0]-e[0])/2-s)/r,(l(this,Ga)+(t[1]-e[1])/2-i)/a]},Ub=function(){const[e,t,s,i]=l(this,gn),[r,a,o,c]=x(this,it,qc).call(this);return`M${(l(this,re)[2]-e)/s} ${(l(this,re)[3]-t)/i} L${(l(this,re)[4]-e)/s} ${(l(this,re)[5]-t)/i} L${r} ${a} L${o} ${c} L${(l(this,re)[16]-e)/s} ${(l(this,re)[17]-t)/i} L${(l(this,re)[14]-e)/s} ${(l(this,re)[15]-t)/i} Z`},$b=function(e){const t=l(this,os);e.push(`L${t[4]} ${t[5]} Z`)},Vb=function(e){const[t,s,i,r]=l(this,gn),a=l(this,re).subarray(4,6),o=l(this,re).subarray(16,18),[c,u,h,d]=x(this,it,qc).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-s)/r} L${c} ${u} L${h} ${d} L${(o[0]-t)/i} ${(o[1]-s)/r}`)},Wb=function(e){const t=l(this,re),[s,i,r,a]=l(this,gn),[o,c,u,h]=x(this,it,qc).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/a],0),this.newFreeDrawOutline(d,e,l(this,gn),l(this,Bl),l(this,jl),l(this,zl))},Gb=function(e,t){const s=l(this,os);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},Xb=function(e,t){const s=l(this,re).subarray(4,6),i=l(this,re).subarray(16,18),[r,a,o,c]=l(this,gn),[u,h,d,f]=x(this,it,qc).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/c],t),t+=24},S(ei,Hh,8),S(ei,wp,2),S(ei,Ap,l(ei,Hh)+l(ei,wp));let Jf=ei;var Ul,Xa,Ai,Uh,mn,$h,Ve,Sp,Yb;class qb extends H{constructor(t,s,i,r,a,o){super();S(this,Sp);S(this,Ul);S(this,Xa,new Float32Array(4));S(this,Ai);S(this,Uh);S(this,mn);S(this,$h);S(this,Ve);g(this,Ve,t),g(this,mn,s),g(this,Ul,i),g(this,$h,r),g(this,Ai,a),g(this,Uh,o),this.lastPoint=[NaN,NaN],x(this,Sp,Yb).call(this,o);const[c,u,h,d]=l(this,Xa);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-c)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,Ve)[4]} ${l(this,Ve)[5]}`];for(let s=6,i=l(this,Ve).length;s<i;s+=6){if(isNaN(l(this,Ve)[s])){t.push(`L${l(this,Ve)[s+4]} ${l(this,Ve)[s+5]}`);continue}t.push(`C${l(this,Ve)[s]} ${l(this,Ve)[s+1]} ${l(this,Ve)[s+2]} ${l(this,Ve)[s+3]} ${l(this,Ve)[s+4]} ${l(this,Ve)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],a){const o=i-t,c=r-s;let u,h;switch(a){case 0:u=H._rescale(l(this,Ve),t,r,o,-c),h=H._rescale(l(this,mn),t,r,o,-c);break;case 90:u=H._rescaleAndSwap(l(this,Ve),t,s,o,c),h=H._rescaleAndSwap(l(this,mn),t,s,o,c);break;case 180:u=H._rescale(l(this,Ve),i,s,-o,c),h=H._rescale(l(this,mn),i,s,-o,c);break;case 270:u=H._rescaleAndSwap(l(this,Ve),i,r,-o,-c),h=H._rescaleAndSwap(l(this,mn),i,r,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,Xa)}newOutliner(t,s,i,r,a,o=0){return new Jf(t,s,i,r,a,o)}getNewOutline(t,s){const[i,r,a,o]=l(this,Xa),[c,u,h,d]=l(this,Ul),f=a*h,p=o*d,m=i*h+c,A=r*d+u,_=this.newOutliner({x:l(this,mn)[0]*f+m,y:l(this,mn)[1]*p+A},l(this,Ul),l(this,$h),t,l(this,Uh),s??l(this,Ai));for(let v=2;v<l(this,mn).length;v+=2)_.add({x:l(this,mn)[v]*f+m,y:l(this,mn)[v+1]*p+A});return _.getOutlines()}}Ul=new WeakMap,Xa=new WeakMap,Ai=new WeakMap,Uh=new WeakMap,mn=new WeakMap,$h=new WeakMap,Ve=new WeakMap,Sp=new WeakSet,Yb=function(t){const s=l(this,Ve);let i=s[4],r=s[5],a=i,o=r,c=i,u=r,h=i,d=r;const f=t?Math.max:Math.min;for(let m=6,A=s.length;m<A;m+=6){if(isNaN(s[m]))a=Math.min(a,s[m+4]),o=Math.min(o,s[m+5]),c=Math.max(c,s[m+4]),u=Math.max(u,s[m+5]),d<s[m+5]?(h=s[m+4],d=s[m+5]):d===s[m+5]&&(h=f(h,s[m+4]));else{const _=G.bezierBoundingBox(i,r,...s.slice(m,m+6));a=Math.min(a,_[0]),o=Math.min(o,_[1]),c=Math.max(c,_[2]),u=Math.max(u,_[3]),d<_[3]?(h=_[2],d=_[3]):d===_[3]&&(h=f(h,_[2]))}i=s[m+4],r=s[m+5]}const p=l(this,Xa);p[0]=a-l(this,Ai),p[1]=o-l(this,Ai),p[2]=c-a+2*l(this,Ai),p[3]=u-o+2*l(this,Ai),this.lastPoint=[h,d]};var Vh,Wh,pr,ls,Xt,Kb,pf,Qb,Jb,xy;class Sy{constructor(e,t=0,s=0,i=!0){S(this,Xt);S(this,Vh);S(this,Wh);S(this,pr,[]);S(this,ls,[]);let r=1/0,a=-1/0,o=1/0,c=-1/0;const u=10**-4;for(const{x:_,y:v,width:w,height:b}of e){const E=Math.floor((_-t)/u)*u,C=Math.ceil((_+w+t)/u)*u,T=Math.floor((v-t)/u)*u,k=Math.ceil((v+b+t)/u)*u,P=[E,T,k,!0],M=[C,T,k,!1];l(this,pr).push(P,M),r=Math.min(r,E),a=Math.max(a,C),o=Math.min(o,T),c=Math.max(c,k)}const h=a-r+2*s,d=c-o+2*s,f=r-s,p=o-s,m=l(this,pr).at(i?-1:-2),A=[m[0],m[2]];for(const _ of l(this,pr)){const[v,w,b]=_;_[0]=(v-f)/h,_[1]=(w-p)/d,_[2]=(b-p)/d}g(this,Vh,new Float32Array([f,p,h,d])),g(this,Wh,A)}getOutlines(){l(this,pr).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of l(this,pr))t[3]?(e.push(...x(this,Xt,xy).call(this,t)),x(this,Xt,Qb).call(this,t)):(x(this,Xt,Jb).call(this,t),e.push(...x(this,Xt,xy).call(this,t)));return x(this,Xt,Kb).call(this,e)}}Vh=new WeakMap,Wh=new WeakMap,pr=new WeakMap,ls=new WeakMap,Xt=new WeakSet,Kb=function(e){const t=[],s=new Set;for(const a of e){const[o,c,u]=a;t.push([o,c,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],u=t[a+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const a=s.values().next().value;let[o,c,u,h,d]=a;s.delete(a);let f=o,p=c;for(r=[o,u],i.push(r);;){let m;if(s.has(h))m=h;else if(s.has(d))m=d;else break;s.delete(m),[o,c,u,h,d]=m,f!==o&&(r.push(f,p,o,p===c?c:u),f=o),p=p===c?u:c}r.push(f,p)}return new lP(i,l(this,Vh),l(this,Wh))},pf=function(e){const t=l(this,ls);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,a=t[r][0];if(a===e)return r;a<e?s=r+1:i=r-1}return i+1},Qb=function([,e,t]){const s=x(this,Xt,pf).call(this,e);l(this,ls).splice(s,0,[e,t])},Jb=function([,e,t]){const s=x(this,Xt,pf).call(this,e);for(let i=s;i<l(this,ls).length;i++){const[r,a]=l(this,ls)[i];if(r!==e)break;if(r===e&&a===t){l(this,ls).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,a]=l(this,ls)[i];if(r!==e)break;if(r===e&&a===t){l(this,ls).splice(i,1);return}}},xy=function(e){const[t,s,i]=e,r=[[t,s,i]],a=x(this,Xt,pf).call(this,i);for(let o=0;o<a;o++){const[c,u]=l(this,ls)[o];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([t,u,p])}}}return r};var Gh,$l;class lP extends H{constructor(t,s,i){super();S(this,Gh);S(this,$l);g(this,$l,t),g(this,Gh,s),this.lastPoint=i}toSVGPath(){const t=[];for(const s of l(this,$l)){let[i,r]=s;t.push(`M${i} ${r}`);for(let a=2;a<s.length;a+=2){const o=s[a],c=s[a+1];o===i?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],a){const o=[],c=i-t,u=r-s;for(const h of l(this,$l)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;o.push(d)}return o}get box(){return l(this,Gh)}get classNamesForOutlining(){return["highlightOutline"]}}Gh=new WeakMap,$l=new WeakMap;class by extends Jf{newFreeDrawOutline(e,t,s,i,r,a){return new cP(e,t,s,i,r,a)}}class cP extends qb{newOutliner(e,t,s,i,r,a=0){return new by(e,t,s,i,r,a)}}var cs,qa,Vl,tt,Xh,Wl,qh,Yh,gr,us,Gl,Kh,Se,_y,Ey,Cy,Qr,Zb,Ui;const Jt=class Jt{constructor({editor:e=null,uiManager:t=null}){S(this,Se);S(this,cs,null);S(this,qa,null);S(this,Vl);S(this,tt,null);S(this,Xh,!1);S(this,Wl,!1);S(this,qh,null);S(this,Yh);S(this,gr,null);S(this,us,null);S(this,Gl);var s;e?(g(this,Wl,!1),g(this,Gl,ce.HIGHLIGHT_COLOR),g(this,qh,e)):(g(this,Wl,!0),g(this,Gl,ce.HIGHLIGHT_DEFAULT_COLOR)),g(this,us,(e==null?void 0:e._uiManager)||t),g(this,Yh,l(this,us)._eventBus),g(this,Vl,(e==null?void 0:e.color)||((s=l(this,us))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Jt,Kh)||g(Jt,Kh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ae(this,"_keyboardManager",new hd([[["Escape","mac+Escape"],Jt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Jt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Jt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Jt.prototype._moveToPrevious],[["Home","mac+Home"],Jt.prototype._moveToBeginning],[["End","mac+End"],Jt.prototype._moveToEnd]]))}renderButton(){const e=g(this,cs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,us)._signal;e.addEventListener("click",x(this,Se,Qr).bind(this),{signal:t}),e.addEventListener("keydown",x(this,Se,Cy).bind(this),{signal:t});const s=g(this,qa,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,Vl),e.append(s),e}renderMainDropdown(){const e=g(this,tt,x(this,Se,_y).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,cs)){x(this,Se,Qr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&x(this,Se,Ey).call(this,t,e)}_moveToNext(e){var t,s;if(!l(this,Se,Ui)){x(this,Se,Qr).call(this,e);return}if(e.target===l(this,cs)){(t=l(this,tt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=l(this,tt))==null?void 0:t.firstChild)||e.target===l(this,cs)){l(this,Se,Ui)&&this._hideDropdownFromKeyboard();return}l(this,Se,Ui)||x(this,Se,Qr).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!l(this,Se,Ui)){x(this,Se,Qr).call(this,e);return}(t=l(this,tt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Se,Ui)){x(this,Se,Qr).call(this,e);return}(t=l(this,tt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,tt))==null||e.classList.add("hidden"),(t=l(this,gr))==null||t.abort(),g(this,gr,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Wl)){if(!l(this,Se,Ui)){(e=l(this,qh))==null||e.unselect();return}this.hideDropdown(),l(this,cs).focus({preventScroll:!0,focusVisible:l(this,Xh)})}}updateColor(e){if(l(this,qa)&&(l(this,qa).style.backgroundColor=e),!l(this,tt))return;const t=l(this,us).highlightColors.values();for(const s of l(this,tt).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,cs))==null||e.remove(),g(this,cs,null),g(this,qa,null),(t=l(this,tt))==null||t.remove(),g(this,tt,null)}};cs=new WeakMap,qa=new WeakMap,Vl=new WeakMap,tt=new WeakMap,Xh=new WeakMap,Wl=new WeakMap,qh=new WeakMap,Yh=new WeakMap,gr=new WeakMap,us=new WeakMap,Gl=new WeakMap,Kh=new WeakMap,Se=new WeakSet,_y=function(){const e=document.createElement("div"),t=l(this,us)._signal;e.addEventListener("contextmenu",ws,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of l(this,us).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",l(Jt,Kh)[s]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.setAttribute("aria-selected",i===l(this,Vl)),r.addEventListener("click",x(this,Se,Ey).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",x(this,Se,Cy).bind(this),{signal:t}),e},Ey=function(e,t){t.stopPropagation(),l(this,Yh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Gl),value:e})},Cy=function(e){Jt._keyboardManager.exec(this,e)},Qr=function(e){if(l(this,Se,Ui)){this.hideDropdown();return}if(g(this,Xh,e.detail===0),l(this,gr)||(g(this,gr,new AbortController),window.addEventListener("pointerdown",x(this,Se,Zb).bind(this),{signal:l(this,us).combinedSignal(l(this,gr))})),l(this,tt)){l(this,tt).classList.remove("hidden");return}const t=g(this,tt,x(this,Se,_y).call(this));l(this,cs).append(t)},Zb=function(e){var t;(t=l(this,tt))!=null&&t.contains(e.target)||this.hideDropdown()},Ui=function(){return l(this,tt)&&!l(this,tt).classList.contains("hidden")},S(Jt,Kh,null);let Zf=Jt;var Xl,Qh,Si,Ya,ql,tn,Jh,Zh,Ka,On,yn,yt,Yl,xi,Rt,Kl,jn,ed,Z,ky,gf,e_,t_,n_,Ty,Jr,Vn,Mo,s_,mf,Yc,i_,r_,a_,o_,l_;const ge=class ge extends je{constructor(t){super({...t,name:"highlightEditor"});S(this,Z);S(this,Xl,null);S(this,Qh,0);S(this,Si);S(this,Ya,null);S(this,ql,null);S(this,tn,null);S(this,Jh,null);S(this,Zh,0);S(this,Ka,null);S(this,On,null);S(this,yn,null);S(this,yt,!1);S(this,Yl,null);S(this,xi);S(this,Rt,null);S(this,Kl,"");S(this,jn);S(this,ed,"");this.color=t.color||ge._defaultColor,g(this,jn,t.thickness||ge._defaultThickness),g(this,xi,t.opacity||ge._defaultOpacity),g(this,Si,t.boxes||null),g(this,ed,t.methodOfCreation||""),g(this,Kl,t.text||""),this._isDraggable=!1,t.highlightId>-1?(g(this,yt,!0),x(this,Z,gf).call(this,t),x(this,Z,Jr).call(this)):l(this,Si)&&(g(this,Xl,t.anchorNode),g(this,Qh,t.anchorOffset),g(this,Jh,t.focusNode),g(this,Zh,t.focusOffset),x(this,Z,ky).call(this),x(this,Z,Jr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ge.prototype;return ae(this,"_keyboardManager",new hd([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,yt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,jn),methodOfCreation:l(this,ed)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;je.initialize(t,s),ge._defaultColor||(ge._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ce.HIGHLIGHT_DEFAULT_COLOR:ge._defaultColor=s;break;case ce.HIGHLIGHT_THICKNESS:ge._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return l(this,Yl)}updateParams(t,s){switch(t){case ce.HIGHLIGHT_COLOR:x(this,Z,e_).call(this,s);break;case ce.HIGHLIGHT_THICKNESS:x(this,Z,t_).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ce.HIGHLIGHT_DEFAULT_COLOR,ge._defaultColor],[ce.HIGHLIGHT_THICKNESS,ge._defaultThickness]]}get propertiesToUpdate(){return[[ce.HIGHLIGHT_COLOR,this.color||ge._defaultColor],[ce.HIGHLIGHT_THICKNESS,l(this,jn)||ge._defaultThickness],[ce.HIGHLIGHT_FREE,l(this,yt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(g(this,ql,new Zf({editor:this})),t.addColorPicker(l(this,ql))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,Z,Yc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,x(this,Z,Yc).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){x(this,Z,Ty).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,Z,Jr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?x(this,Z,Ty).call(this):t&&(x(this,Z,Jr).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,a,o;const{drawLayer:s}=this.parent;let i;l(this,yt)?(t=(t-this.rotation+360)%360,i=x(r=ge,Vn,Mo).call(r,l(this,On).box,t)):i=x(a=ge,Vn,Mo).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(l(this,yn),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(l(this,Rt),{bbox:x(o=ge,Vn,Mo).call(o,l(this,tn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,Kl)&&(t.setAttribute("aria-label",l(this,Kl)),t.setAttribute("role","mark")),l(this,yt)?t.classList.add("free"):this.div.addEventListener("keydown",x(this,Z,s_).bind(this),{signal:this._uiManager._signal});const s=g(this,Ka,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,Ya);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Yf(this,l(this,Ka),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,Rt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,Rt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:x(this,Z,mf).call(this,!0);break;case 1:case 3:x(this,Z,mf).call(this,!1);break}}select(){var t;super.select(),l(this,Rt)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,Rt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,Rt)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,Rt),{rootClass:{selected:!1}}),l(this,yt)||x(this,Z,mf).call(this,!1))}get _mustFixPosition(){return!l(this,yt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,yn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,Rt),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:a}){const{x:o,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=m=>{d.abort(),x(this,Vn,o_).call(this,t,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",_n,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ws,{signal:f}),i.addEventListener("pointermove",x(this,Vn,a_).bind(this,t),{signal:f}),this._freeHighlight=new by({x:r,y:a},[o,c,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var A,_,v,w;let r=null;if(t instanceof Ib){const{data:{quadPoints:b,rect:E,rotation:C,id:T,color:k,opacity:P,popupRef:M},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:te.HIGHLIGHT,color:Array.from(k),opacity:P,quadPoints:b,boxes:null,pageIndex:D-1,rect:E.slice(0),rotation:C,id:T,deleted:!1,popupRef:M}}else if(t instanceof Qv){const{data:{inkLists:b,rect:E,rotation:C,id:T,color:k,borderStyle:{rawWidth:P},popupRef:M},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:te.HIGHLIGHT,color:Array.from(k),thickness:P,inkLists:b,boxes:null,pageIndex:D-1,rect:E.slice(0),rotation:C,id:T,deleted:!1,popupRef:M}}const{color:a,quadPoints:o,inkLists:c,opacity:u}=t,h=await super.deserialize(t,s,i);h.color=G.makeHexColor(...a),g(h,xi,u||1),c&&g(h,jn,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(o){const b=g(h,Si,[]);for(let E=0;E<o.length;E+=8)b.push({x:(o[E]-p)/d,y:1-(o[E+1]-m)/f,width:(o[E+2]-o[E])/d,height:(o[E+1]-o[E+5])/f});x(A=h,Z,ky).call(A),x(_=h,Z,Jr).call(_),h.rotate(h.rotation)}else if(c){g(h,yt,!0);const b=c[0],E={x:b[0]-p,y:f-(b[1]-m)},C=new by(E,[0,0,d,f],1,l(h,jn)/2,!0,.001);for(let P=0,M=b.length;P<M;P+=2)E.x=b[P]-p,E.y=f-(b[P+1]-m),C.add(E);const{id:T,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);x(v=h,Z,gf).call(v,{highlightOutlines:C.getOutlines(),highlightId:T,clipPathId:k}),x(w=h,Z,Jr).call(w)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=je._colorManager.convert(this.color),r={annotationType:te.HIGHLIGHT,color:i,opacity:l(this,xi),thickness:l(this,jn),quadPoints:x(this,Z,i_).call(this),outlines:x(this,Z,r_).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:x(this,Z,Yc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,Z,l_).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Xl=new WeakMap,Qh=new WeakMap,Si=new WeakMap,Ya=new WeakMap,ql=new WeakMap,tn=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,Ka=new WeakMap,On=new WeakMap,yn=new WeakMap,yt=new WeakMap,Yl=new WeakMap,xi=new WeakMap,Rt=new WeakMap,Kl=new WeakMap,jn=new WeakMap,ed=new WeakMap,Z=new WeakSet,ky=function(){const t=new Sy(l(this,Si),.001);g(this,On,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,On).box;const s=new Sy(l(this,Si),.0025,.001,this._uiManager.direction==="ltr");g(this,tn,s.getOutlines());const{lastPoint:i}=l(this,tn);g(this,Yl,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},gf=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var d,f;if(g(this,On,t),g(this,tn,t.getNewOutline(l(this,jn)/2+1.5,.0025)),s>=0)g(this,yn,s),g(this,Ya,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),g(this,Rt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,tn).box,path:{d:l(this,tn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,yn),{bbox:x(d=ge,Vn,Mo).call(d,l(this,On).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Rt),{bbox:x(f=ge,Vn,Mo).call(f,l(this,tn).box,p),path:{d:l(this,tn).toSVGPath()}})}const[a,o,c,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=l(this,tn);g(this,Yl,[(h[0]-a)/c,(h[1]-o)/u])},e_=function(t){const s=(a,o)=>{var c,u;this.color=a,g(this,xi,o),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,yn),{root:{fill:a,"fill-opacity":o}}),(u=l(this,ql))==null||u.updateColor(a)},i=this.color,r=l(this,xi);this.addCommands({cmd:s.bind(this,t,ge._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},t_=function(t){const s=l(this,jn),i=r=>{g(this,jn,r),x(this,Z,n_).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},n_=function(t){if(!l(this,yt))return;x(this,Z,gf).call(this,{highlightOutlines:l(this,On).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},Ty=function(){l(this,yn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,yn)),g(this,yn,null),this.parent.drawLayer.remove(l(this,Rt)),g(this,Rt,null))},Jr=function(t=this.parent){l(this,yn)===null&&({id:Ot(this,yn)._,clipPathId:Ot(this,Ya)._}=t.drawLayer.draw({bbox:l(this,On).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,xi)},rootClass:{highlight:!0,free:l(this,yt)},path:{d:l(this,On).toSVGPath()}},!1,!0),g(this,Rt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,yt)},bbox:l(this,tn).box,path:{d:l(this,tn).toSVGPath()}},l(this,yt))),l(this,Ka)&&(l(this,Ka).style.clipPath=l(this,Ya)))},Vn=new WeakSet,Mo=function([t,s,i,r],a){switch(a){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},s_=function(t){ge._keyboardManager.exec(this,t)},mf=function(t){if(!l(this,Xl))return;const s=window.getSelection();t?s.setPosition(l(this,Xl),l(this,Qh)):s.setPosition(l(this,Jh),l(this,Zh))},Yc=function(){return l(this,yt)?this.rotation:0},i_=function(){if(l(this,yt))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,a=l(this,Si),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of a){const p=u*t+i,m=(1-h)*s+r;o[c]=o[c+4]=p,o[c+1]=o[c+3]=m,o[c+2]=o[c+6]=p+d*t,o[c+5]=o[c+7]=m-f*s,c+=8}return o},r_=function(t){return l(this,On).serialize(t,x(this,Z,Yc).call(this))},a_=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},o_=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},l_=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},S(ge,Vn),q(ge,"_defaultColor",null),q(ge,"_defaultOpacity",1),q(ge,"_defaultThickness",12),q(ge,"_type","highlight"),q(ge,"_editorType",te.HIGHLIGHT),q(ge,"_freeHighlightId",-1),q(ge,"_freeHighlight",null),q(ge,"_freeHighlightClipId","");let ep=ge;var Qa;class uP{constructor(){S(this,Qa,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))this.updateProperty(t,s)}updateSVGProperty(e,t){l(this,Qa)[e]=t}toSVGProperties(){const e=l(this,Qa);return g(this,Qa,Object.create(null)),{root:e}}reset(){g(this,Qa,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){be("Not implemented")}}Qa=new WeakMap;var vn,Ql,lt,Ja,Za,mr,yr,vr,eo,de,Ny,Ry,Ly,Kc,c_,yf,Qc,Io;const $=class $ extends je{constructor(t){super(t);S(this,de);S(this,vn,null);S(this,Ql);q(this,"_drawId",null);g(this,Ql,t.mustBeCommitted||!1),t.drawOutlines&&(x(this,de,Ny).call(this,t),x(this,de,Kc).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,a]of Object.entries(s))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){be("Not implemented")}static get typesMap(){be("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(l($,lt).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,a=r[s],o=c=>{var h;r.updateProperty(s,c);const u=l(this,vn).updateProperty(s,c);u&&x(this,de,Qc).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties(l(this,vn).getPathResizingSVGProperties(x(this,de,yf).call(this)),{bbox:x(this,de,Io).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties(l(this,vn).getPathResizedSVGProperties(x(this,de,yf).call(this)),{bbox:x(this,de,Io).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:x(this,de,Io).call(this,t,s)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties(l(this,vn).getPathTranslatedSVGProperties(x(this,de,yf).call(this),this.parentDimensions),{bbox:x(this,de,Io).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Ql)&&(g(this,Ql,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){x(this,de,Ly).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,de,Kc).call(this),x(this,de,Qc).call(this,l(this,vn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),x(this,de,Ly).call(this)):t&&(this._uiManager.addShouldRescale(this),x(this,de,Kc).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,$._mergeSVGProperties({bbox:x(this,de,Io).call(this)},l(this,vn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(this,de,Qc).call(this,l(this,vn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const s=document.createElement("div");t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,s,i,r,a){be("Not implemented")}static startDrawing(t,s,i,r){var _;const{target:a,offsetX:o,offsetY:c,pointerId:u,pointerType:h}=r;if(l($,yr)&&l($,yr)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:p}=a.getBoundingClientRect(),m=g($,Ja,new AbortController),A=t.combinedSignal(m);if(l($,mr)||g($,mr,u),l($,yr)??g($,yr,h),window.addEventListener("pointerup",v=>{var w;l($,mr)===v.pointerId?this._endDraw(v):(w=l($,vr))==null||w.delete(v.pointerId)},{signal:A}),window.addEventListener("pointercancel",v=>{var w;l($,mr)===v.pointerId?this._currentParent.endDrawingSession():(w=l($,vr))==null||w.delete(v.pointerId)},{signal:A}),window.addEventListener("pointerdown",v=>{l($,yr)===v.pointerType&&((l($,vr)||g($,vr,new Set)).add(v.pointerId),l($,lt).isCancellable()&&(l($,lt).removeLastElement(),l($,lt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",ws,{signal:A}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),a.addEventListener("touchmove",v=>{v.timeStamp===l($,eo)&&_n(v)},{signal:A}),t.toggleDrawing(),(_=s._editorUndoBar)==null||_.hide(),l($,lt)){t.drawLayer.updateProperties(this._currentDrawId,l($,lt).startNew(o,c,f,p,d));return}s.updateUIForDefaultProperties(this),g($,lt,this.createDrawerInstance(o,c,f,p,d)),g($,Za,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l($,Za).toSVGProperties(),l($,lt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(g($,eo,-1),!l($,lt))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(l($,mr)===r){if(((a=l($,vr))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l($,lt).add(s,i)),g($,eo,t.timeStamp),_n(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,g($,lt,null),g($,Za,null),g($,yr,null),g($,eo,NaN)),l($,Ja)&&(l($,Ja).abort(),g($,Ja,null),g($,mr,NaN),g($,vr,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),t&&s.drawLayer.updateProperties(this._currentDrawId,l($,lt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=l($,lt),r=this._currentDrawId,a=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:ce.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ce.DRAW_STEP),!l($,lt).isEmpty()){const{pageDimensions:[i,r],scale:a}=s,o=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l($,lt).getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:l($,Za),mustBeCommitted:!t});return this._cleanup(!0),o}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,a,o){be("Not implemented")}static async deserialize(t,s,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}=s.viewport,u=this.deserializeDraw(o,c,r,a,this._INNER_MARGIN,t),h=await super.deserialize(t,s,i);return h.createDrawingOptions(t),x(d=h,de,Ny).call(d,{drawOutlines:u}),x(f=h,de,Kc).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,i]=this.pageTranslation,[r,a]=this.pageDimensions;return l(this,vn).serialize([s,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};vn=new WeakMap,Ql=new WeakMap,lt=new WeakMap,Ja=new WeakMap,Za=new WeakMap,mr=new WeakMap,yr=new WeakMap,vr=new WeakMap,eo=new WeakMap,de=new WeakSet,Ny=function({drawOutlines:t,drawId:s,drawingOptions:i}){g(this,vn,t),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=x(this,de,Ry).call(this,t,this.parent),x(this,de,Qc).call(this,t.box)},Ry=function(t,s){const{id:i}=s.drawLayer.draw($._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},Ly=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Kc=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=x(this,de,Ry).call(this,l(this,vn),t)}},c_=function([t,s,i,r]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[s,1-t,i*(o/a),r*(a/o)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(o/a),r*(a/o)];default:return[t,s,i,r]}},yf=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-s,t,i*(a/o),r*(o/a)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(a/o),r*(o/a)];default:return[t,s,i,r]}},Qc=function(t){if([this.x,this.y,this.width,this.height]=x(this,de,c_).call(this,t),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},Io=function(){const{x:t,y:s,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[c,u]}=this;switch((a*4+o)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-s,t,i*(c/u),r*(u/c)];case 6:return[1-t-r*(u/c),1-s,r*(u/c),i*(c/u)];case 7:return[s-i*(c/u),1-t-r*(u/c),i*(c/u),r*(u/c)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(u/c),s,r*(u/c),i*(c/u)];case 13:return[1-s-i*(c/u),t-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-t,1-s-i*(c/u),r*(u/c),i*(c/u)];case 15:return[s,1-t,i*(c/u),r*(u/c)];default:return[t,s,i,r]}},q($,"_currentDrawId",-1),q($,"_currentParent",null),S($,lt,null),S($,Ja,null),S($,Za,null),S($,mr,NaN),S($,yr,null),S($,vr,null),S($,eo,NaN),q($,"_INNER_MARGIN",3);let Py=$;var zs,ct,ut,to,Jl,Bt,vt,zn,no,so,io,Zl,vf;class hP{constructor(e,t,s,i,r,a){S(this,Zl);S(this,zs,new Float64Array(6));S(this,ct);S(this,ut);S(this,to);S(this,Jl);S(this,Bt);S(this,vt,"");S(this,zn,0);S(this,no,new tp);S(this,so);S(this,io);g(this,so,s),g(this,io,i),g(this,to,r),g(this,Jl,a),[e,t]=x(this,Zl,vf).call(this,e,t);const o=g(this,ct,[NaN,NaN,NaN,NaN,e,t]);g(this,Bt,[e,t]),g(this,ut,[{line:o,points:l(this,Bt)}]),l(this,zs).set(o,0)}updateProperty(e,t){e==="stroke-width"&&g(this,Jl,t)}isEmpty(){return!l(this,ut)||l(this,ut).length===0}isCancellable(){return l(this,Bt).length<=10}add(e,t){[e,t]=x(this,Zl,vf).call(this,e,t);const[s,i,r,a]=l(this,zs).subarray(2,6),o=e-r,c=t-a;return Math.hypot(l(this,so)*o,l(this,io)*c)<=2?null:(l(this,Bt).push(e,t),isNaN(s)?(l(this,zs).set([r,a,e,t],2),l(this,ct).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,zs)[0])&&l(this,ct).splice(6,6),l(this,zs).set([s,i,r,a,e,t],0),l(this,ct).push(...H.createBezierPoints(s,i,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(l(this,Bt).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){g(this,so,s),g(this,io,i),g(this,to,r),[e,t]=x(this,Zl,vf).call(this,e,t);const a=g(this,ct,[NaN,NaN,NaN,NaN,e,t]);g(this,Bt,[e,t]);const o=l(this,ut).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),l(this,ut).push({line:a,points:l(this,Bt)}),l(this,zs).set(a,0),g(this,zn,0),this.toSVGPath(),null}getLastElement(){return l(this,ut).at(-1)}setLastElement(e){return l(this,ut)?(l(this,ut).push(e),g(this,ct,e.line),g(this,Bt,e.points),g(this,zn,0),{path:{d:this.toSVGPath()}}):l(this,no).setLastElement(e)}removeLastElement(){if(!l(this,ut))return l(this,no).removeLastElement();l(this,ut).pop(),g(this,vt,"");for(let e=0,t=l(this,ut).length;e<t;e++){const{line:s,points:i}=l(this,ut)[e];g(this,ct,s),g(this,Bt,i),g(this,zn,0),this.toSVGPath()}return{path:{d:l(this,vt)}}}toSVGPath(){const e=H.svgRound(l(this,ct)[4]),t=H.svgRound(l(this,ct)[5]);if(l(this,Bt).length===2)return g(this,vt,`${l(this,vt)} M ${e} ${t} Z`),l(this,vt);if(l(this,Bt).length<=6){const i=l(this,vt).lastIndexOf("M");g(this,vt,`${l(this,vt).slice(0,i)} M ${e} ${t}`),g(this,zn,6)}if(l(this,Bt).length===4){const i=H.svgRound(l(this,ct)[10]),r=H.svgRound(l(this,ct)[11]);return g(this,vt,`${l(this,vt)} L ${i} ${r}`),g(this,zn,12),l(this,vt)}const s=[];l(this,zn)===0&&(s.push(`M ${e} ${t}`),g(this,zn,6));for(let i=l(this,zn),r=l(this,ct).length;i<r;i+=6){const[a,o,c,u,h,d]=l(this,ct).slice(i,i+6).map(H.svgRound);s.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}return g(this,vt,l(this,vt)+s.join(" ")),g(this,zn,l(this,ct).length),l(this,vt)}getOutlines(e,t,s,i){const r=l(this,ut).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,no).build(l(this,ut),e,t,s,l(this,to),l(this,Jl),i),g(this,zs,null),g(this,ct,null),g(this,ut,null),g(this,vt,null),l(this,no)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}zs=new WeakMap,ct=new WeakMap,ut=new WeakMap,to=new WeakMap,Jl=new WeakMap,Bt=new WeakMap,vt=new WeakMap,zn=new WeakMap,no=new WeakMap,so=new WeakMap,io=new WeakMap,Zl=new WeakSet,vf=function(e,t){return H._normalizePoint(e,t,l(this,so),l(this,io),l(this,to))};var Ht,td,nd,wn,Bs,Hs,ec,tc,nc,St,Qs,u_,h_,d_;const s0=class s0 extends H{constructor(){super(...arguments);S(this,St);S(this,Ht);S(this,td,0);S(this,nd);S(this,wn);S(this,Bs);S(this,Hs);S(this,ec);S(this,tc);S(this,nc)}build(t,s,i,r,a,o,c){g(this,Bs,s),g(this,Hs,i),g(this,ec,r),g(this,tc,a),g(this,nc,o),g(this,nd,c??0),g(this,wn,t),x(this,St,h_).call(this)}setLastElement(t){return l(this,wn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,wn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of l(this,wn)){if(t.push(`M${H.svgRound(s[4])} ${H.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12){t.push(`L${H.svgRound(s[10])} ${H.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[a,o,c,u,h,d]=s.subarray(i,i+6).map(H.svgRound);t.push(`C${a} ${o} ${c} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,s,i,r],a){const o=[],c=[],[u,h,d,f]=x(this,St,u_).call(this);let p,m,A,_,v,w,b,E,C;switch(l(this,tc)){case 0:C=H._rescale,p=t,m=s+r,A=i,_=-r,v=t+u*i,w=s+(1-h-f)*r,b=t+(u+d)*i,E=s+(1-h)*r;break;case 90:C=H._rescaleAndSwap,p=t,m=s,A=i,_=r,v=t+h*i,w=s+u*r,b=t+(h+f)*i,E=s+(u+d)*r;break;case 180:C=H._rescale,p=t+i,m=s,A=-i,_=r,v=t+(1-u-d)*i,w=s+h*r,b=t+(1-u)*i,E=s+(h+f)*r;break;case 270:C=H._rescaleAndSwap,p=t+i,m=s+r,A=-i,_=-r,v=t+(1-h-f)*i,w=s+(1-u-d)*r,b=t+(1-h)*i,E=s+(1-u)*r;break}for(const{line:T,points:k}of l(this,wn))o.push(C(T,p,m,A,_,a?new Array(T.length):null)),c.push(C(k,p,m,A,_,a?new Array(k.length):null));return{lines:o,points:c,rect:[v,w,b,E]}}static deserialize(t,s,i,r,a,{paths:{lines:o,points:c},rotation:u,thickness:h}){const d=[];let f,p,m,A,_;switch(u){case 0:_=H._rescale,f=-t/i,p=s/r+1,m=1/i,A=-1/r;break;case 90:_=H._rescaleAndSwap,f=-s/r,p=-t/i,m=1/r,A=1/i;break;case 180:_=H._rescale,f=t/i+1,p=-s/r,m=-1/i,A=1/r;break;case 270:_=H._rescaleAndSwap,f=s/r+1,p=t/i+1,m=-1/r,A=-1/i;break}if(!o){o=[];for(const w of c){const b=w.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const E=new Float32Array(3*(b-2));o.push(E);let[C,T,k,P]=w.subarray(0,4);E.set([NaN,NaN,NaN,NaN,C,T],0);for(let M=4;M<b;M+=2){const D=w[M],O=w[M+1];E.set(H.createBezierPoints(C,T,k,P,D,O),(M-2)*3),[C,T,k,P]=[k,P,D,O]}}}for(let w=0,b=o.length;w<b;w++)d.push({line:_(o[w].map(E=>E??NaN),f,p,m,A),points:_(c[w].map(E=>E??NaN),f,p,m,A)});const v=new s0;return v.build(d,i,r,1,u,h,a),v}get box(){return l(this,Ht)}updateProperty(t,s){return t==="stroke-width"?x(this,St,d_).call(this,s):null}updateParentDimensions([t,s],i){const[r,a]=x(this,St,Qs).call(this);g(this,Bs,t),g(this,Hs,s),g(this,ec,i);const[o,c]=x(this,St,Qs).call(this),u=o-r,h=c-a,d=l(this,Ht);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return g(this,td,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Ht).map(H.svgRound).join(" ")}get defaultProperties(){const[t,s]=l(this,Ht);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=l(this,Ht);let i=0,r=0,a=0,o=0,c=0,u=0;switch(l(this,td)){case 90:r=s/t,a=-t/s,c=t;break;case 180:i=-1,o=-1,c=t,u=s;break;case 270:r=-s/t,a=t/s,u=s;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${H.svgRound(c)} ${H.svgRound(u)})`}getPathResizingSVGProperties([t,s,i,r]){const[a,o]=x(this,St,Qs).call(this),[c,u,h,d]=l(this,Ht);if(Math.abs(h-a)<=H.PRECISION||Math.abs(d-o)<=H.PRECISION){const _=t+i/2-(c+h/2),v=s+r/2-(u+d/2);return{path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`,transform:`${this.rotationTransform} translate(${_} ${v})`}}}const f=(i-2*a)/(h-2*a),p=(r-2*o)/(d-2*o),m=h/i,A=d/r;return{path:{"transform-origin":`${H.svgRound(c)} ${H.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${A}) translate(${H.svgRound(a)} ${H.svgRound(o)}) scale(${f} ${p}) translate(${H.svgRound(-a)} ${H.svgRound(-o)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[a,o]=x(this,St,Qs).call(this),c=l(this,Ht),[u,h,d,f]=c;if(c[0]=t,c[1]=s,c[2]=i,c[3]=r,Math.abs(d-a)<=H.PRECISION||Math.abs(f-o)<=H.PRECISION){const v=t+i/2-(u+d/2),w=s+r/2-(h+f/2);for(const{line:b,points:E}of l(this,wn))H._translate(b,v,w,b),H._translate(E,v,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*a)/(d-2*a),m=(r-2*o)/(f-2*o),A=-p*(u+a)+t+a,_=-m*(h+o)+s+o;if(p!==1||m!==1||A!==0||_!==0)for(const{line:v,points:w}of l(this,wn))H._rescale(v,A,_,p,m,v),H._rescale(w,A,_,p,m,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,a]=i,o=l(this,Ht),c=t-o[0],u=s-o[1];if(l(this,Bs)===r&&l(this,Hs)===a)for(const{line:h,points:d}of l(this,wn))H._translate(h,c,u,h),H._translate(d,c,u,d);else{const h=l(this,Bs)/r,d=l(this,Hs)/a;g(this,Bs,r),g(this,Hs,a);for(const{line:f,points:p}of l(this,wn))H._rescale(f,c,u,h,d,f),H._rescale(p,c,u,h,d,p);o[2]*=h,o[3]*=d}return o[0]=t,o[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`}}}get defaultSVGProperties(){const t=l(this,Ht);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t[0])} ${H.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Ht=new WeakMap,td=new WeakMap,nd=new WeakMap,wn=new WeakMap,Bs=new WeakMap,Hs=new WeakMap,ec=new WeakMap,tc=new WeakMap,nc=new WeakMap,St=new WeakSet,Qs=function(t=l(this,nc)){const s=l(this,nd)+t/2*l(this,ec);return l(this,tc)%180===0?[s/l(this,Bs),s/l(this,Hs)]:[s/l(this,Hs),s/l(this,Bs)]},u_=function(){const[t,s,i,r]=l(this,Ht),[a,o]=x(this,St,Qs).call(this,0);return[t+a,s+o,i-2*a,r-2*o]},h_=function(){const t=g(this,Ht,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,wn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6){const[h,d]=r.subarray(c,c+2);t[0]=Math.min(t[0],h),t[1]=Math.min(t[1],d),t[2]=Math.max(t[2],h),t[3]=Math.max(t[3],d)}continue}let a=r[4],o=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,m,A]=r.subarray(c,c+6);G.bezierBoundingBox(a,o,h,d,f,p,m,A,t),a=m,o=A}}const[s,i]=x(this,St,Qs).call(this);t[0]=Math.min(1,Math.max(0,t[0]-s)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+s)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},d_=function(t){const[s,i]=x(this,St,Qs).call(this);g(this,nc,t);const[r,a]=x(this,St,Qs).call(this),[o,c]=[r-s,a-i],u=l(this,Ht);return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u};let tp=s0;var sc;const i0=class i0 extends uP{constructor(t){super();S(this,sc);g(this,sc,t),super.updateProperties({fill:"none",stroke:je._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,s){t==="stroke-width"&&(s??(s=this["stroke-width"]),s*=l(this,sc).realScale),super.updateSVGProperty(t,s)}clone(){const t=new i0(l(this,sc));return t.updateAll(this),t}};sc=new WeakMap;let My=i0;var xp,f_;const qo=class qo extends Py{constructor(t){super({...t,name:"inkEditor"});S(this,xp);this._willKeepAspectRatio=!0}static initialize(t,s){je.initialize(t,s),this._defaultDrawingOptions=new My(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return ae(this,"typesMap",new Map([[ce.INK_THICKNESS,"stroke-width"],[ce.INK_COLOR,"stroke"],[ce.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,a){return new hP(t,s,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,a,o){return tp.deserialize(t,s,i,r,a,o)}static async deserialize(t,s,i){let r=null;if(t instanceof Qv){const{data:{inkLists:o,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:m},parent:{page:{pageNumber:A}}}=t;r=t={annotationType:te.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:o},boxes:null,pageIndex:A-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:m}}const a=await super.deserialize(t,s,i);return a.annotationElementId=t.id||null,a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=qo.getDefaultDrawingOptions({stroke:G.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u={annotationType:te.INK,color:je._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!x(this,xp,f_).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};xp=new WeakSet,f_=function(t){const{color:s,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==s[c])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a},q(qo,"_type","ink"),q(qo,"_editorType",te.INK),q(qo,"_defaultDrawingOptions",null);let Iy=qo;var Fe,wt,wr,bi,Ar,ic,Us,$s,An,rc,pe,Jc,Zc,wf,Fy,Af,Oy,Sf,p_;const uu=class uu extends je{constructor(t){super({...t,name:"stampEditor"});S(this,pe);S(this,Fe,null);S(this,wt,null);S(this,wr,null);S(this,bi,null);S(this,Ar,null);S(this,ic,"");S(this,Us,null);S(this,$s,null);S(this,An,!1);S(this,rc,!1);g(this,bi,t.bitmapUrl),g(this,Ar,t.bitmapFile)}static initialize(t,s){je.initialize(t,s)}static get supportedTypes(){return ae(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return ae(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(te.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,wt)&&(g(this,Fe,null),this._uiManager.imageManager.deleteId(l(this,wt)),(t=l(this,Us))==null||t.remove(),g(this,Us,null),l(this,$s)&&(clearTimeout(l(this,$s)),g(this,$s,null))),super.remove()}rebuild(){if(!this.parent){l(this,wt)&&x(this,pe,wf).call(this);return}super.rebuild(),this.div!==null&&(l(this,wt)&&l(this,Us)===null&&x(this,pe,wf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,wr)||l(this,Fe)||l(this,bi)||l(this,Ar)||l(this,wt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Fe)?x(this,pe,Fy).call(this):x(this,pe,wf).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,$s)!==null&&clearTimeout(l(this,$s)),g(this,$s,setTimeout(()=>{g(this,$s,null),x(this,pe,Oy).call(this)},200))}copyCanvas(t,s,i=!1){var p;t||(t=224);const{width:r,height:a}=l(this,Fe),o=new Mm;let c=l(this,Fe),u=r,h=a,d=null;if(s){if(r>s||a>s){const P=Math.min(s/r,s/a);u=Math.floor(r*P),h=Math.floor(a*P)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*o.sx),A=d.height=Math.ceil(h*o.sy);l(this,An)||(c=x(this,pe,Af).call(this,m,A));const _=d.getContext("2d");_.filter=this._uiManager.hcmFilter;let v="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",w="#42414d");const b=15,E=b*o.sx,C=b*o.sy,T=new OffscreenCanvas(E*2,C*2),k=T.getContext("2d");k.fillStyle=v,k.fillRect(0,0,E*2,C*2),k.fillStyle=w,k.fillRect(0,0,E,C),k.fillRect(E,C,E,C),_.fillStyle=_.createPattern(T,"repeat"),_.fillRect(0,0,m,A),_.drawImage(c,0,0,c.width,c.height,0,0,m,A)}let f=null;if(i){let m,A;if(o.symmetric&&c.width<t&&c.height<t)m=c.width,A=c.height;else if(c=l(this,Fe),r>t||a>t){const w=Math.min(t/r,t/a);m=Math.floor(r*w),A=Math.floor(a*w),l(this,An)||(c=x(this,pe,Af).call(this,m,A))}const v=new OffscreenCanvas(m,A).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,m,A),f={width:m,height:A,data:v.getImageData(0,0,m,A).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,Us)}static async deserialize(t,s,i){var A;let r=null;if(t instanceof Db){const{data:{rect:_,rotation:v,id:w,structParent:b,popupRef:E},container:C,parent:{page:{pageNumber:T}}}=t,k=C.querySelector("canvas"),P=i.imageManager.getFromCanvas(C.id,k);k.remove();const M=((A=await s._structTree.getAriaAttributes(`${$v}${w}`))==null?void 0:A.get("aria-label"))||"";r=t={annotationType:te.STAMP,bitmapId:P.id,bitmap:P.bitmap,pageIndex:T-1,rect:_.slice(0),rotation:v,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:b,popupRef:E}}const a=await super.deserialize(t,s,i),{rect:o,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&i.imageManager.isValidId(h)?(g(a,wt,h),c&&g(a,Fe,c)):g(a,bi,u),g(a,An,d);const[p,m]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/m,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=r,g(a,rc,!!r),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:te.STAMP,bitmapId:l(this,wt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,An),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=x(this,pe,Sf).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=x(this,pe,p_).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const o=l(this,An)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(l(this,wt)))s.stamps.set(l(this,wt),{area:o,serialized:i}),i.bitmap=x(this,pe,Sf).call(this,!1);else if(l(this,An)){const c=s.stamps.get(l(this,wt));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=x(this,pe,Sf).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Fe=new WeakMap,wt=new WeakMap,wr=new WeakMap,bi=new WeakMap,Ar=new WeakMap,ic=new WeakMap,Us=new WeakMap,$s=new WeakMap,An=new WeakMap,rc=new WeakMap,pe=new WeakSet,Jc=function(t,s=!1){if(!t){this.remove();return}g(this,Fe,t.bitmap),s||(g(this,wt,t.id),g(this,An,t.isSvg)),t.file&&g(this,ic,t.file.name),x(this,pe,Fy).call(this)},Zc=function(){if(g(this,wr,null),this._uiManager.enableWaiting(!1),!!l(this,Us)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Fe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Fe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},wf=function(){if(l(this,wt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,wt)).then(i=>x(this,pe,Jc).call(this,i,!0)).finally(()=>x(this,pe,Zc).call(this));return}if(l(this,bi)){const i=l(this,bi);g(this,bi,null),this._uiManager.enableWaiting(!0),g(this,wr,this._uiManager.imageManager.getFromUrl(i).then(r=>x(this,pe,Jc).call(this,r)).finally(()=>x(this,pe,Zc).call(this)));return}if(l(this,Ar)){const i=l(this,Ar);g(this,Ar,null),this._uiManager.enableWaiting(!0),g(this,wr,this._uiManager.imageManager.getFromFile(i).then(r=>x(this,pe,Jc).call(this,r)).finally(()=>x(this,pe,Zc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=uu.supportedTypesStr;const s=this._uiManager._signal;g(this,wr,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,pe,Jc).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>x(this,pe,Zc).call(this))),t.click()},Fy=function(){var d;const{div:t}=this;let{width:s,height:i}=l(this,Fe);const[r,a]=this.pageDimensions,o=.75;if(this.width)s=this.width*r,i=this.height*a;else if(s>o*r||i>o*a){const f=Math.min(o*r/s,o*a/i);s*=f,i*=f}const[c,u]=this.parentDimensions;this.setDims(s*c/r,i*u/a),this._uiManager.enableWaiting(!1);const h=g(this,Us,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=s/r,this.height=i/a,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),x(this,pe,Oy).call(this),l(this,rc)||(this.parent.addUndoableEditor(this),g(this,rc,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,ic)&&h.setAttribute("aria-label",l(this,ic))},Af=function(t,s){const{width:i,height:r}=l(this,Fe);let a=i,o=r,c=l(this,Fe);for(;a>2*t||o>2*s;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(c,0,0,u,h,0,0,a,o),c=d.transferToImageBitmap()}return c},Oy=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,a=new Mm,o=Math.ceil(i*t*a.sx),c=Math.ceil(r*s*a.sy),u=l(this,Us);if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const h=l(this,An)?l(this,Fe):x(this,pe,Af).call(this,o,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,o,c)},Sf=function(t){if(t){if(l(this,An)){const r=this._uiManager.imageManager.getSvgUrl(l(this,wt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,Fe),s.getContext("2d").drawImage(l(this,Fe),0,0),s.toDataURL()}if(l(this,An)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Br.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Br.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(l(this,Fe),0,0,l(this,Fe).width,l(this,Fe).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(l(this,Fe))},p_=function(t){var o;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},q(uu,"_type","stamp"),q(uu,"_editorType",te.STAMP);let Dy=uu;var ro,ac,Vs,Sr,_i,Bn,xr,oc,ao,hs,Ei,Lt,Ci,W,br,Me,g_,Cs,zy,By,xf;const Jn=class Jn{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:c,viewport:u,l10n:h}){S(this,Me);S(this,ro);S(this,ac,!1);S(this,Vs,null);S(this,Sr,null);S(this,_i,null);S(this,Bn,new Map);S(this,xr,!1);S(this,oc,!1);S(this,ao,!1);S(this,hs,null);S(this,Ei,null);S(this,Lt,null);S(this,Ci,null);S(this,W);const d=[...l(Jn,br).values()];if(!Jn._initialized){Jn._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),g(this,W,e),this.pageIndex=t,this.div=s,g(this,ro,r),g(this,Vs,a),this.viewport=u,g(this,Lt,c),this.drawLayer=o,this._structTree=i,l(this,W).addLayer(this)}get isEmpty(){return l(this,Bn).size===0}get isInvisible(){return this.isEmpty&&l(this,W).getMode()===te.NONE}updateToolbar(e){l(this,W).updateToolbar(e)}updateMode(e=l(this,W).getMode()){switch(x(this,Me,xf).call(this),e){case te.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case te.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of l(Jn,br).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Lt))==null?void 0:t.div)}setEditingState(e){l(this,W).setEditingState(e)}addCommands(e){l(this,W).addCommands(e)}cleanUndoStack(e){l(this,W).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Vs))==null||t.div.classList.toggle("disabled",!e)}async enable(){g(this,ao,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of l(this,Bn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,W).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!l(this,Vs)){g(this,ao,!1);return}const t=l(this,Vs).getEditableAnnotations();for(const s of t){if(s.hide(),l(this,W).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}g(this,ao,!1)}disable(){var i;g(this,oc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,Bn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(l(this,Vs)){const r=l(this,Vs).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(l(this,W).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(l(this,W).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}x(this,Me,xf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(Jn,br).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,oc,!1)}getEditableAnnotation(e){var t;return((t=l(this,Vs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,W).getActive()!==e&&l(this,W).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Lt))!=null&&e.div&&!l(this,Ci)){g(this,Ci,new AbortController);const t=l(this,W).combinedSignal(l(this,Ci));l(this,Lt).div.addEventListener("pointerdown",x(this,Me,g_).bind(this),{signal:t}),l(this,Lt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Lt))!=null&&e.div&&l(this,Ci)&&(l(this,Ci).abort(),g(this,Ci,null),l(this,Lt).div.classList.remove("highlighting"))}enableClick(){if(l(this,Sr))return;g(this,Sr,new AbortController);const e=l(this,W).combinedSignal(l(this,Sr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,Sr))==null||e.abort(),g(this,Sr,null)}attach(e){l(this,Bn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,W).isDeletedAnnotationElement(t)&&l(this,W).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Bn).delete(e.id),(t=l(this,ro))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,oc)&&e.annotationElementId&&l(this,W).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,W).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,W).addDeletedAnnotationElement(e.annotationElementId),je.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,W).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,ao)),l(this,W).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,_i)&&(e._focusEventsAllowed=!1,g(this,_i,setTimeout(()=>{g(this,_i,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,W)._signal}),t.focus())},0))),e._structTreeParentId=(s=l(this,ro))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return l(this,W).getId()}combinedSignal(e){return l(this,W).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Me,Cs))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,W).updateToolbar(e),l(this,W).updateMode(e);const{offsetX:s,offsetY:i}=x(this,Me,By).call(this),r=this.getNextId(),a=x(this,Me,zy).call(this,{parent:this,id:r,x:s,y:i,uiManager:l(this,W),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=l(Jn,br).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,W)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=x(this,Me,zy).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:l(this,W),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(x(this,Me,By).call(this),!0)}setSelected(e){l(this,W).setSelected(e)}toggleSelected(e){l(this,W).toggleSelected(e)}unselect(e){l(this,W).unselect(e)}pointerup(e){var s;const{isMac:t}=Wt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,xr)&&(g(this,xr,!1),!((s=l(this,Me,Cs))!=null&&s.isDrawer&&l(this,Me,Cs).supportMultipleDrawings))){if(!l(this,ac)){g(this,ac,!0);return}if(l(this,W).getMode()===te.STAMP){l(this,W).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(l(this,W).getMode()===te.HIGHLIGHT&&this.enableTextSelection(),l(this,xr)){g(this,xr,!1);return}const{isMac:t}=Wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(g(this,xr,!0),(i=l(this,Me,Cs))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=l(this,W).getActive();g(this,ac,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus(),l(this,hs)){l(this,Me,Cs).startDrawing(this,l(this,W),!1,e);return}l(this,W).setCurrentDrawingSession(this),g(this,hs,new AbortController);const t=l(this,W).combinedSignal(l(this,hs));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(g(this,Ei,null),this.commitOrRemove())},{signal:t}),l(this,Me,Cs).startDrawing(this,l(this,W),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&g(this,Ei,t);return}l(this,Ei)&&setTimeout(()=>{var t;(t=l(this,Ei))==null||t.focus(),g(this,Ei,null)},0)}endDrawingSession(e=!1){return l(this,hs)?(l(this,W).setCurrentDrawingSession(null),l(this,hs).abort(),g(this,hs,null),g(this,Ei,null),l(this,Me,Cs).endDrawing(e)):null}findNewParent(e,t,s){const i=l(this,W).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return l(this,hs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,hs)&&l(this,Me,Cs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,W).getActive())==null?void 0:e.parent)===this&&(l(this,W).commitOrRemove(),l(this,W).setActiveEditor(null)),l(this,_i)&&(clearTimeout(l(this,_i)),g(this,_i,null));for(const s of l(this,Bn).values())(t=l(this,ro))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,Bn).clear(),l(this,W).removeLayer(this)}render({viewport:e}){this.viewport=e,mo(this.div,e);for(const t of l(this,W).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,W).commitOrRemove(),x(this,Me,xf).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,mo(this.div,{rotation:s}),t!==s)for(const i of l(this,Bn).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,W).viewParameters.realScale}};ro=new WeakMap,ac=new WeakMap,Vs=new WeakMap,Sr=new WeakMap,_i=new WeakMap,Bn=new WeakMap,xr=new WeakMap,oc=new WeakMap,ao=new WeakMap,hs=new WeakMap,Ei=new WeakMap,Lt=new WeakMap,Ci=new WeakMap,W=new WeakMap,br=new WeakMap,Me=new WeakSet,g_=function(e){l(this,W).unselectAll();const{target:t}=e;if(t===l(this,Lt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Lt).div.contains(t)){const{isMac:s}=Wt.platform;if(e.button!==0||e.ctrlKey&&s)return;l(this,W).showAllEditors("highlight",!0,!0),l(this,Lt).div.classList.add("free"),this.toggleDrawing(),ep.startHighlighting(this,l(this,W).direction==="ltr",{target:l(this,Lt).div,x:e.x,y:e.y}),l(this,Lt).div.addEventListener("pointerup",()=>{l(this,Lt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,W)._signal}),e.preventDefault()}},Cs=function(){return l(Jn,br).get(l(this,W).getMode())},zy=function(e){const t=l(this,Me,Cs);return t?new t.prototype.constructor(e):null},By=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+i),u=(r+o)/2-e,h=(a+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},xf=function(){for(const e of l(this,Bn).values())e.isEmpty()&&e.remove()},q(Jn,"_initialized",!1),S(Jn,br,new Map([wy,Iy,Dy,ep].map(e=>[e._editorType,e])));let jy=Jn;var ds,sd,Ut,oo,bp,m_,qs,Uy,y_,$y;const Tt=class Tt{constructor({pageIndex:e}){S(this,qs);S(this,ds,null);S(this,sd,0);S(this,Ut,new Map);S(this,oo,new Map);this.pageIndex=e}setParent(e){if(!l(this,ds)){g(this,ds,e);return}if(l(this,ds)!==e){if(l(this,Ut).size>0)for(const t of l(this,Ut).values())t.remove(),e.append(t);g(this,ds,e)}}static get _svgFactory(){return ae(this,"_svgFactory",new Kv)}draw(e,t=!1,s=!1){const i=Ot(this,sd)._++,r=x(this,qs,Uy).call(this),a=Tt._svgFactory.createElement("defs");r.append(a);const o=Tt._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,oo).set(i,o);const u=s?x(this,qs,y_).call(this,a,c):null,h=Tt._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,e),l(this,Ut).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=Ot(this,sd)._++,i=x(this,qs,Uy).call(this),r=Tt._svgFactory.createElement("defs");i.append(r);const a=Tt._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const d=Tt._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Tt._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Tt._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Tt._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),l(this,Ut).set(s,i),s}finalizeDraw(e,t){l(this,oo).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:i,rootClass:r,path:a}=t,o=typeof e=="number"?l(this,Ut).get(e):e;if(o){if(s&&x(this,qs,$y).call(this,o,s),i&&x(c=Tt,bp,m_).call(c,o,i),r){const{classList:u}=o;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(a){const h=o.firstChild.firstChild;x(this,qs,$y).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const s=l(this,Ut).get(e);s&&(l(t,ds).append(s),l(this,Ut).delete(e),l(t,Ut).set(e,s))}remove(e){l(this,oo).delete(e),l(this,ds)!==null&&(l(this,Ut).get(e).remove(),l(this,Ut).delete(e))}destroy(){g(this,ds,null);for(const e of l(this,Ut).values())e.remove();l(this,Ut).clear(),l(this,oo).clear()}};ds=new WeakMap,sd=new WeakMap,Ut=new WeakMap,oo=new WeakMap,bp=new WeakSet,m_=function(e,[t,s,i,r]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},qs=new WeakSet,Uy=function(){const e=Tt._svgFactory.create(1,1,!0);return l(this,ds).append(e),e.setAttribute("aria-hidden",!0),e},y_=function(e,t){const s=Tt._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Tt._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},$y=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},S(Tt,bp);let Hy=Tt;globalThis.pdfjsTestingUtils={HighlightOutliner:Sy};Q.AbortException;Q.AnnotationEditorLayer;Q.AnnotationEditorParamsType;Q.AnnotationEditorType;Q.AnnotationEditorUIManager;Q.AnnotationLayer;Q.AnnotationMode;Q.ColorPicker;Q.DOMSVGFactory;Q.DrawLayer;Q.FeatureTest;var dP=Q.GlobalWorkerOptions;Q.ImageKind;Q.InvalidPDFException;Q.MissingPDFException;Q.OPS;Q.OutputScale;Q.PDFDataRangeTransport;Q.PDFDateString;Q.PDFWorker;Q.PasswordResponses;Q.PermissionFlag;Q.PixelsPerInch;Q.RenderingCancelledException;Q.TextLayer;Q.TouchManager;Q.UnexpectedResponseException;Q.Util;Q.VerbosityLevel;Q.XfaLayer;Q.build;Q.createValidAbsoluteUrl;Q.fetchData;var fP=Q.getDocument;Q.getFilenameFromUrl;Q.getPdfFilenameFromUrl;Q.getXfaPageViewport;Q.isDataScheme;Q.isPdfFile;Q.noContextMenu;Q.normalizeUnicode;Q.setLayerDimensions;Q.shadow;Q.stopEvent;Q.version;const pP=""+new URL("pdf.worker.min-yatZIOMy.mjs",import.meta.url).href,gP="fyp-io",mP=2,np="papers",sp="sticky_notes",Qp="http://localhost:11434",Jp="llama3.1",Gw={author:"Doe et al.",title:"Dummy Paper for Debugging",url:"https://example.com/paper",published_date:"2023",citation_count:42,note:"This is a placeholder note so you can test the UI without extraction."};function v_(){return new Promise((n,e)=>{const t=indexedDB.open(gP,mP);t.onupgradeneeded=()=>{const s=t.result;s.objectStoreNames.contains(np)||s.createObjectStore(np,{keyPath:"id",autoIncrement:!0}),s.objectStoreNames.contains(sp)||s.createObjectStore(sp,{keyPath:"id",autoIncrement:!0})},t.onsuccess=()=>n(t.result),t.onerror=()=>e(t.error)})}async function Gn(n,e){const t=await v_();return new Promise((s,i)=>{const r=t.transaction(np,n),a=r.objectStore(np),o=e(a);r.oncomplete=()=>s(o),r.onerror=()=>i(r.error)})}async function Jv(n,e){const t=await v_();return new Promise((s,i)=>{const r=t.transaction(sp,n),a=r.objectStore(sp),o=e(a);r.oncomplete=()=>s(o),r.onerror=()=>i(r.error)})}function Vy(n){try{return JSON.parse(n)}catch{const t=n.match(/\{[\s\S]*\}/);if(!t)return{};try{return JSON.parse(t[0])}catch{return{}}}}function yP(n){const e=Vy(n);if(Array.isArray(e))return e;const t=n.match(/\[[\s\S]*\]/);if(t){const s=Vy(t[0]);return Array.isArray(s)?s:[]}return[]}let Xw=!1;async function w_(n){const e=await n.arrayBuffer();Xw||(dP.workerSrc=pP,Xw=!0);const t=await fP({data:e}).promise;let s="";for(let i=1;i<=t.numPages;i+=1){const a=(await(await t.getPage(i)).getTextContent()).items.map(o=>"str"in o?o.str:"").join(" ");s+=`${a}
`}return s.trim()}function Wy(n){if(!n||typeof n!="string")return[];const e=["references","bibliography","works cited","literature cited"],t=n.toLowerCase();let s=-1;for(const h of e){const d=t.lastIndexOf(h);if(d!==-1){s=d;break}}if(s===-1){const h=n.split(`
`),d=h.findIndex(f=>/^\s*(\[\d+\]|\d+\.)/.test(f));if(d===-1)return[];s=h.slice(0,d).join(`
`).length}const i=n.slice(s).split(`
`).slice(1).join(`
`).trim();if(!i)return[];const r=i.split(`
`).map(h=>h.replace(/\s+/g," ").trim()).filter(Boolean).filter(h=>!/^\d+$/.test(h)).filter(h=>!/^\.*$/.test(h)).filter(h=>!/rspa\.royalsocietypublishing\.org/i.test(h)).filter(h=>!/^Downloaded from/i.test(h)),a=[];let o="";for(const h of r)(/^\s*(\[\d+\]|\d+\.)/.test(h)||/^\s*\d+\)/.test(h)||/^[A-Z][a-z]+,\s*[A-Z]/.test(h)||/^\s*[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*\s+et al\./.test(h))&&o?(a.push(o.trim()),o=h):o=o?`${o} ${h}`:h;o&&a.push(o.trim());let c=a;const u=a.join(`
`).split(/\s*(?=\[\d+\]\s+)/);if(u.length>1)c=u;else if(a.length<=1){const h=i.replace(/\s+/g," ").split(/\s*(?=\d+\.\s+)/);h.length>1&&(c=h)}return c.map(h=>h.replace(/\s+/g," ").replace(/^\d+\.\s*/,"").trim()).filter(Boolean).slice(0,150)}function vP(n){if(!n||typeof n!="string")return"X";const e=n.trim().split(/[^a-zA-Z]+/).filter(Boolean);return e.length===0?"X":e.length===1?e[0][0].toUpperCase():`${e[0][0]}${e[1][0]}`.toUpperCase()}function ip(n,e){const t=vP(n);let s=1;for(;e.has(`${t}${s}`);)s+=1;return`${t}${s}`}async function wP(n){var a;const e=`You are a strict JSON generator.
Extract the paper metadata from the note below.
Return ONLY a JSON object with keys: author, title, url, published_date, citation_count.
If a field is unknown, use an empty string or null for citation_count.

NOTE:
${n}`,t=await fetch(`${Qp}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Jp,messages:[{role:"user",content:e}],stream:!1})});if(!t.ok){const o=await t.text();throw new Error(`Ollama error ${t.status}: ${o}`)}const s=await t.json(),i=((a=s==null?void 0:s.message)==null?void 0:a.content)||"{}",r=Vy(i);return{author:typeof r.author=="string"?r.author.trim():"",title:typeof r.title=="string"?r.title.trim():"",url:typeof r.url=="string"?r.url.trim():"",published_date:typeof r.published_date=="string"?r.published_date.trim():"",citation_count:typeof r.citation_count=="number"?r.citation_count:r.citation_count===null?null:Number.isFinite(Number(r.citation_count))?Number(r.citation_count):null}}async function AP(n,e){var o;const t=e.trim();if(!t)throw new Error("Question required");const s=n.slice(0,20).map(c=>({id:c.id,code:c.code,author:c.author,title:c.title,url:c.url,published_date:c.published_date,citation_count:c.citation_count,note:c.note})),i=`You answer questions using only the provided literature notes.
Do not mention author names, titles, or URLs in your answer.
Always include citations for any claim, using this format: [code: <code>].
If the answer is not in the notes, say you don't have enough information and do not invent citations.

NOTES:
${JSON.stringify(s,null,2)}

QUESTION:
${t}`,r=await fetch(`${Qp}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Jp,messages:[{role:"user",content:i}],stream:!1})});if(!r.ok){const c=await r.text();throw new Error(`Ollama error ${r.status}: ${c}`)}const a=await r.json();return((o=a==null?void 0:a.message)==null?void 0:o.content)||""}async function SP(n){var o;const e=n.trim();if(!e)return[];const t=`Extract 5-8 short keywords or phrases from the note.
Return ONLY a JSON array of strings.
Avoid full sentences.

NOTE:
${e}`,s=await fetch(`${Qp}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Jp,messages:[{role:"user",content:t}],stream:!1})});if(!s.ok){const c=await s.text();throw new Error(`Ollama error ${s.status}: ${c}`)}const i=await s.json(),r=((o=i==null?void 0:i.message)==null?void 0:o.content)||"[]",a=yP(r);return[...new Set(a.map(c=>String(c).trim()).filter(Boolean))].slice(0,8)}async function xP(n,e){var c;const t=e.flatMap(u=>Array.isArray(u.references)?u.references:[]).map(u=>String(u).trim()).filter(Boolean),s=e.map(u=>u.title).filter(Boolean);if(t.length===0)return[];const i=`You are selecting papers to read next.
Use ONLY the provided references list.
Use the research scope and existing titles to decide relevance.
Return 10 references, one per line.

RESEARCH SCOPE:
${n||"No scope provided."}

EXISTING TITLES:
${s.join(`
`)}

REFERENCES:
${t.join(`
`)}`,r=await fetch(`${Qp}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Jp,messages:[{role:"user",content:i}],stream:!1})});if(!r.ok){const u=await r.text();throw new Error(`Ollama error ${r.status}: ${u}`)}const a=await r.json();return(((c=a==null?void 0:a.message)==null?void 0:c.content)||"").split(`
`).map(u=>u.trim()).filter(Boolean).slice(0,10)}async function bP(n){const e=await Gn("readonly",r=>new Promise((a,o)=>{const c=r.getAll();c.onsuccess=()=>a(c.result),c.onerror=()=>o(c.error)})),t=new Set(e.map(r=>r.code).filter(Boolean)),s=await wP(n),i={code:ip(s.author,t),...s,note:n,created_at:new Date().toISOString()};await Gn("readwrite",r=>{r.add(i)})}async function _P(n){const e=await Gn("readonly",a=>new Promise((o,c)=>{const u=a.getAll();u.onsuccess=()=>o(u.result),u.onerror=()=>c(u.error)})),t=new Set(e.map(a=>a.code).filter(Boolean)),s=n.citation_count,i=s===""||s===null||s===void 0?null:Number.isFinite(Number(s))?Number(s):null,r={code:ip(n.author,t),author:n.author||"",title:n.title||"",url:n.url||"",published_date:n.published_date||"",citation_count:i,note:n.note||"",created_at:new Date().toISOString()};await Gn("readwrite",a=>{a.add(r)})}async function EP(){let n=await Gn("readonly",s=>new Promise((i,r)=>{const a=s.getAll();a.onsuccess=()=>i(a.result),a.onerror=()=>r(a.error)}));n.length===0&&(await Gn("readwrite",s=>{s.add({...Gw,code:ip(Gw.author,new Set),created_at:new Date().toISOString()})}),n=await Gn("readonly",s=>new Promise((i,r)=>{const a=s.getAll();a.onsuccess=()=>i(a.result),a.onerror=()=>r(a.error)})));const e=new Set(n.map(s=>s.code).filter(Boolean)),t=[];return n.forEach(s=>{if(!s.code){const i=ip(s.author,e);e.add(i),t.push({...s,code:i})}}),t.length>0&&(await Gn("readwrite",s=>{t.forEach(i=>s.put(i))}),n=n.map(s=>t.find(i=>i.id===s.id)||s)),[...n].sort((s,i)=>i.id-s.id)}async function A_(n){const e=await Gn("readonly",t=>new Promise((s,i)=>{const r=t.get(Number(n));r.onsuccess=()=>s(r.result),r.onerror=()=>i(r.error)}));if(!e)throw new Error("Not found");return e}async function CP(n,e){const t=await w_(e),s=Wy(t);return gc(n,{pdf_blob:e,pdf_name:e.name,pdf_text:t,references:s})}async function kP(n){return gc(n,{pdf_blob:null,pdf_name:"",pdf_text:"",references:[]})}async function TP(n){const e=await A_(n);if(!e)throw new Error("Not found");if(e.pdf_blob&&!e.pdf_text){const t=await w_(e.pdf_blob),s=Wy(t);return gc(n,{pdf_text:t,references:s})}if(!Array.isArray(e.references)||e.references.length===0){const t=Wy(e.pdf_text||"");return t.length===0?e:gc(n,{references:t})}return e}async function gc(n,e){const t=await Gn("readonly",i=>new Promise((r,a)=>{const o=i.get(Number(n));o.onsuccess=()=>r(o.result),o.onerror=()=>a(o.error)}));if(!t)throw new Error("Not found");const s={...t,...e};return await Gn("readwrite",i=>{i.put(s)}),s}async function PP(n){const e=[...new Set(n.map(t=>Number(t)).filter(t=>Number.isInteger(t)))];e.length!==0&&await Gn("readwrite",t=>{e.forEach(s=>t.delete(s))})}async function NP(){return Jv("readonly",n=>new Promise((e,t)=>{const s=n.getAll();s.onsuccess=()=>e(s.result||[]),s.onerror=()=>t(s.error)}))}async function Ig(n){const e={text:n,created_at:new Date().toISOString()};return Jv("readwrite",t=>new Promise((s,i)=>{const r=t.add(e);r.onsuccess=()=>s({...e,id:r.result}),r.onerror=()=>i(r.error)}))}async function RP(n){const e=[...new Set(n.map(t=>Number(t)).filter(t=>Number.isInteger(t)))];e.length!==0&&await Jv("readwrite",t=>{e.forEach(s=>t.delete(s))})}function LP({stickyNotes:n=[]}){const[e,t]=N.useState(""),[s,i]=N.useState([]),[r,a]=N.useState([]),[o,c]=N.useState("idle"),[u,h]=N.useState(""),[d,f]=N.useState(""),[p,m]=N.useState(!1),[A,_]=N.useState("idle"),[v,w]=N.useState(""),[b,E]=N.useState(""),[C,T]=N.useState(""),[k,P]=N.useState("idle"),[M,D]=N.useState(""),[O,j]=N.useState({author:"",title:"",url:"",published_date:"",citation_count:"",note:""}),[ee,J]=N.useState([]),[me,z]=N.useState(""),[X,I]=N.useState(!0),[V,K]=N.useState({key:"created_at",direction:"desc"}),[oe,ie]=N.useState([]),[_e,ft]=N.useState("idle"),[Rn,Ee]=N.useState(""),ue=N.useRef(null),Ss=N.useRef(new Set);async function Xr(){try{const R=await EP();i(R),a(fe=>fe.filter(ye=>R.some(pt=>pt.id===ye)))}catch{h("Could not load papers.")}}N.useEffect(()=>{Xr()},[]),N.useEffect(()=>{const R=localStorage.getItem("fyp-io-todo");R!==null&&f(R)},[]),N.useEffect(()=>{const R=localStorage.getItem("fyp-io-scope");R!==null&&(z(R),I(!0))},[]),N.useEffect(()=>{localStorage.setItem("fyp-io-todo",d)},[d]);const wc=s.length>0&&r.length===s.length,r0=r.length>0&&!wc;N.useEffect(()=>{ue.current&&(ue.current.indeterminate=r0)},[r0]),N.useEffect(()=>{let R=!1;async function fe(){for(const ye of s){if(R)return;if(!(!ye.note||Array.isArray(ye.keywords)&&ye.keywords.length>0)&&!Ss.current.has(ye.id)){Ss.current.add(ye.id),J(pt=>[...new Set([...pt,ye.id])]);try{const pt=await SP(ye.note);await gc(ye.id,{keywords:pt}),i(Ln=>Ln.map(Co=>Co.id===ye.id?{...Co,keywords:pt}:Co))}catch{}finally{Ss.current.delete(ye.id),R||J(pt=>pt.filter(Ln=>Ln!==ye.id))}break}}}return fe(),()=>{R=!0}},[s]);async function S_(R){if(R.preventDefault(),h(""),!e.trim()){h("Write a note first so I can extract metadata.");return}try{c("loading"),await bP(e.trim()),t(""),await Xr()}catch{h("Extraction failed. Check Ollama and CORS, then try again.")}finally{c("idle")}}function x_(){if(wc){a([]);return}a(s.map(R=>R.id))}function b_(R){a(fe=>fe.includes(R)?fe.filter(ye=>ye!==R):[...fe,R])}async function __(){if(r.length!==0)try{c("loading"),await PP(r),a([]),await Xr()}catch{h("Failed to delete selected papers.")}finally{c("idle")}}function E_(R){z(R),I(!1)}function C_(){localStorage.setItem("fyp-io-scope",me),I(!0)}function a0(R){K(fe=>fe.key!==R?{key:R,direction:"desc"}:{key:R,direction:fe.direction==="asc"?"desc":"asc"})}function o0(R){const fe=String(R||"").match(/\d{4}/);return fe?Number(fe[0]):null}const k_=[...s].sort((R,fe)=>{const ye=V.direction==="asc"?1:-1;if(V.key==="published_date"){const pt=o0(R.published_date)??0,Ln=o0(fe.published_date)??0;return(pt-Ln)*ye}if(V.key==="citation_count"){const pt=Number.isFinite(Number(R.citation_count))?Number(R.citation_count):-1,Ln=Number.isFinite(Number(fe.citation_count))?Number(fe.citation_count):-1;return(pt-Ln)*ye}return(R.id-fe.id)*ye});async function T_(){Ee(""),ie([]),ft("loading");try{const R=await xP(me,s);ie(R),R.length===0&&Ee("No references available to suggest from.");const fe=document.getElementById("next-paper-suggestions");fe&&fe.scrollIntoView({behavior:"smooth",block:"start"})}catch{Ee("Suggestion failed. Check Ollama and try again.")}finally{ft("idle")}}function Eo(R,fe){j(ye=>({...ye,[R]:fe})),w("")}async function P_(){if(!O.title.trim()&&!O.note.trim()){w("Add at least a title or a note.");return}try{_("loading"),await _P({...O,author:O.author.trim(),title:O.title.trim(),url:O.url.trim(),published_date:O.published_date.trim(),note:O.note.trim()}),j({author:"",title:"",url:"",published_date:"",citation_count:"",note:""}),m(!1),await Xr()}catch{w("Failed to add paper.")}finally{_("idle")}}async function N_(R){if(R.preventDefault(),D(""),T(""),!b.trim()){D("Ask a question first.");return}try{P("loading");const fe=await AP(s,b);T(fe||"No answer returned.")}catch{D("Query failed. Check Ollama and try again.")}finally{P("idle")}}return y.jsxs("div",{className:"grid-layout",children:[y.jsxs("div",{className:"column left-column",children:[y.jsxs("section",{className:"card intro-card",children:[y.jsx("h2",{children:"Literature Desk"}),y.jsx("p",{className:"muted",children:"This page is for capturing research notes, extracting metadata, and keeping a living index of your sources."})]}),y.jsxs("section",{className:"card note-card",children:[y.jsx("h2",{children:"New Research Note"}),y.jsx("p",{className:"muted",children:"Paste your raw note, abstract, or citation. The AI will extract the core details and log it for you."}),y.jsxs("form",{onSubmit:S_,className:"note-form",children:[y.jsx("textarea",{value:e,onChange:R=>t(R.target.value),placeholder:"Example: Smith et al. (2022) found that... DOI: ...",rows:10}),y.jsxs("div",{className:"note-actions",children:[y.jsx("button",{type:"submit",disabled:o==="loading",children:o==="loading"?"Extracting":"Extract & Save"}),u?y.jsx("span",{className:"error",children:u}):null]})]})]}),y.jsxs("section",{className:"card note-card query-card",children:[y.jsx("h2",{children:"Literature Query"}),y.jsx("p",{className:"muted",children:"Ask questions about your saved notes. Ollama will answer using only your local database."}),y.jsxs("form",{onSubmit:N_,className:"note-form",children:[y.jsx("textarea",{value:b,onChange:R=>E(R.target.value),placeholder:"Example: What are common themes across my notes?",rows:6}),y.jsxs("div",{className:"note-actions",children:[y.jsx("button",{type:"submit",disabled:k==="loading",children:k==="loading"?"Thinking":"Ask"}),y.jsx("button",{type:"button",className:"clear-button",onClick:()=>T(""),disabled:!C,children:"Clear answer"}),M?y.jsx("span",{className:"error",children:M}):null]})]}),C?y.jsx("div",{className:"answer-box",children:C}):null,y.jsx("div",{className:"sticky-notes-action",children:y.jsx(Oi,{to:"/sticky-notes",className:"ghost-link sticky-notes-link",children:"Open sticky notes"})})]})]}),y.jsxs("div",{className:"column right-column",children:[y.jsxs("section",{className:"card scope-card",children:[y.jsx("div",{className:"table-header",children:y.jsx("h2",{children:"Research Scope"})}),y.jsx("textarea",{className:"notepad-textarea",value:me,onChange:R=>E_(R.target.value),placeholder:"Define the scope and purpose of your research...",rows:5}),y.jsx("div",{className:"note-actions",children:y.jsx("button",{type:"button",onClick:C_,disabled:X,children:X?"Saved":"Save scope"})})]}),y.jsxs("section",{className:"card notepad-card",children:[y.jsx("div",{className:"table-header",children:y.jsx("h2",{children:"Notepad"})}),y.jsx("textarea",{className:"notepad-textarea",value:d,onChange:R=>f(R.target.value),placeholder:"Write your to-do list here...",rows:6})]}),y.jsxs("section",{className:"card table-card",children:[y.jsxs("div",{className:"table-header",children:[y.jsx("h2",{children:"Literature Index"}),y.jsxs("div",{className:"table-actions",children:[r.length>0?y.jsxs("button",{type:"button",className:"danger-button",disabled:o==="loading",onClick:__,children:["Delete selected (",r.length,")"]}):null,y.jsx("button",{type:"button",className:"suggest-button",onClick:T_,children:"Suggest my next paper"}),y.jsxs("div",{className:"count-group",children:[y.jsxs("span",{className:"count",children:[s.length," papers"]}),y.jsx("button",{type:"button",className:"add-button",onClick:()=>m(R=>!R),"aria-label":"Add paper manually",title:"Add paper",children:"+"})]})]})]}),p?y.jsxs("div",{className:"manual-form",children:[y.jsxs("div",{className:"manual-grid",children:[y.jsx("input",{className:"detail-input",placeholder:"Author",value:O.author,onChange:R=>Eo("author",R.target.value)}),y.jsx("input",{className:"detail-input",placeholder:"Title",value:O.title,onChange:R=>Eo("title",R.target.value)}),y.jsx("input",{className:"detail-input",placeholder:"URL",value:O.url,onChange:R=>Eo("url",R.target.value)}),y.jsx("input",{className:"detail-input",placeholder:"Published",value:O.published_date,onChange:R=>Eo("published_date",R.target.value)}),y.jsx("input",{className:"detail-input",type:"number",min:"0",placeholder:"Citations",value:O.citation_count,onChange:R=>Eo("citation_count",R.target.value)})]}),y.jsx("textarea",{className:"detail-input detail-textarea",placeholder:"Note",value:O.note,onChange:R=>Eo("note",R.target.value),rows:4}),y.jsxs("div",{className:"manual-actions",children:[y.jsx("button",{type:"button",onClick:P_,disabled:A==="loading",children:A==="loading"?"Saving":"Add paper"}),y.jsx("button",{type:"button",className:"ghost-link",onClick:()=>m(!1),children:"Cancel"}),v?y.jsx("span",{className:"error",children:v}):null]})]}):null,y.jsx("div",{className:"table-wrap",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"checkbox-cell",children:y.jsx("input",{ref:ue,type:"checkbox",checked:wc,onChange:x_,"aria-label":"Select all papers"})}),y.jsx("th",{children:"Code"}),y.jsx("th",{children:"Author"}),y.jsx("th",{children:"Title"}),y.jsx("th",{children:"Link"}),y.jsx("th",{children:y.jsxs("button",{type:"button",className:"sort-button",onClick:()=>a0("published_date"),children:["Published",y.jsx("span",{className:"sort-arrow",children:V.key==="published_date"?V.direction==="asc"?"":"":""})]})}),y.jsx("th",{children:y.jsxs("button",{type:"button",className:"sort-button",onClick:()=>a0("citation_count"),children:["Citations",y.jsx("span",{className:"sort-arrow",children:V.key==="citation_count"?V.direction==="asc"?"":"":""})]})})]})}),y.jsx("tbody",{children:s.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:"7",className:"empty",children:"No notes yet. Add one to populate your table."})}):k_.map(R=>y.jsxs("tr",{children:[y.jsx("td",{className:"checkbox-cell",children:y.jsx("input",{type:"checkbox",checked:r.includes(R.id),onChange:()=>b_(R.id),"aria-label":`Select ${R.title||"paper"}`})}),y.jsx("td",{className:"code-cell",children:R.code||""}),y.jsx("td",{children:y.jsx(Oi,{to:`/paper/${R.id}`,className:"row-link",children:R.author||"Unknown"})}),y.jsx("td",{children:R.title||"Untitled"}),y.jsx("td",{children:R.url?y.jsx("a",{href:R.url,target:"_blank",rel:"noreferrer",children:"Open"}):""}),y.jsx("td",{children:R.published_date||""}),y.jsx("td",{children:R.citation_count===null||R.citation_count===void 0?"":R.citation_count})]},R.id))})]})})]})]}),y.jsxs("section",{className:"card timeline-card full-width",children:[y.jsx("h2",{children:"Literature Timeline"}),y.jsx("p",{className:"muted",children:"A quick, visual sweep of your notes by date."}),y.jsx("div",{className:"timeline-track",children:s.length===0?y.jsx("p",{className:"muted",children:"Add papers to see them plotted here."}):[...s].slice().sort((R,fe)=>{const ye=Co=>{const Ac=String(Co||"").match(/\d{4}/);return Ac?Number(Ac[0]):null},pt=ye(R.published_date)??ye(R.created_at)??0,Ln=ye(fe.published_date)??ye(fe.created_at)??0;return pt-Ln}).map(R=>{const fe=R.published_date||R.created_at||"",ye=String(fe).match(/\d{4}/),pt=ye?ye[0]:"",Ln=R.note||"",Ac=Ln.split(`
`).map(xs=>xs.trim()).filter(Boolean).filter(xs=>/^[-*]/.test(xs));return Ac.length?Ac.map(xs=>xs.replace(/^[-*]\s*/,"")).slice(0,2):Ln.split(new RegExp("(?<=[.!?])\\s+")).map(xs=>xs.trim()).filter(Boolean).slice(0,2),y.jsxs("div",{className:"timeline-item",children:[y.jsx("div",{className:"timeline-dot"}),y.jsxs("div",{className:"timeline-meta",children:[y.jsx("span",{className:"timeline-year",children:pt}),y.jsx("span",{className:"timeline-code",children:R.code||""})]}),y.jsx("div",{className:"timeline-title",children:R.title||"Untitled"}),Array.isArray(R.keywords)&&R.keywords.length>0?y.jsx("div",{className:"timeline-keywords",children:R.keywords.map(xs=>y.jsx("span",{className:"keyword-chip",children:xs},xs))}):y.jsx("p",{className:"muted",children:ee.includes(R.id)?"Extracting keywords":"No keywords yet."})]},R.id)})})]}),y.jsxs("section",{className:"card info-card full-width suggested-card",id:"next-paper-suggestions",children:[y.jsx("h2",{children:"Suggested Next Papers"}),y.jsx("p",{className:"muted",children:"Ollama is analysing references from uploaded papers..."}),_e==="loading"?y.jsx("p",{className:"muted",children:"Working on suggestions..."}):null,Rn?y.jsx("p",{className:"error",children:Rn}):null,oe.length>0?y.jsx("div",{className:"references-list",children:oe.join(`
`)}):null]}),y.jsxs("section",{className:"card info-card full-width",id:"ollama-info",children:[y.jsx("h2",{children:"What is Ollama?"}),y.jsx("p",{className:"muted",children:"Ollama runs language models on your machine. This app connects to it locally so you can extract metadata without a paid API."}),y.jsxs("div",{className:"info-list",children:[y.jsx("span",{className:"info-label",children:"Download"}),y.jsxs("span",{children:["Install from ",y.jsx("a",{href:"https://ollama.com",target:"_blank",rel:"noreferrer",children:"ollama.com"}),"."]})]}),y.jsxs("div",{className:"info-list",children:[y.jsx("span",{className:"info-label",children:"Start"}),y.jsx("span",{children:"Run `ollama serve` to start the local API."})]}),y.jsxs("div",{className:"info-list",children:[y.jsx("span",{className:"info-label",children:"Model"}),y.jsx("span",{children:"Pull a model: `ollama pull llama3.1`."})]}),y.jsxs("div",{className:"info-list",children:[y.jsx("span",{className:"info-label",children:"CORS"}),y.jsx("span",{children:'For GitHub Pages: `OLLAMA_ORIGINS="https://clarabollengandolfo.github.io" ollama serve`.'})]})]})]})}function MP(){const{id:n}=zC(),[e,t]=N.useState(null),[s,i]=N.useState(null),[r,a]=N.useState("idle"),[o,c]=N.useState(""),[u,h]=N.useState(""),[d,f]=N.useState(!1),[p,m]=N.useState(""),[A,_]=N.useState("idle"),[v,w]=N.useState(""),[b,E]=N.useState(!1);function C(j){return{author:j.author||"",title:j.title||"",url:j.url||"",published_date:j.published_date||"",citation_count:j.citation_count===null||j.citation_count===void 0?"":String(j.citation_count),note:j.note||""}}const T=N.useMemo(()=>!s||!e?!1:s.author!==(e.author||"")||s.title!==(e.title||"")||s.url!==(e.url||"")||s.published_date!==(e.published_date||"")||s.citation_count!==(e.citation_count===null||e.citation_count===void 0?"":String(e.citation_count))||s.note!==(e.note||""),[s,e]);N.useEffect(()=>{async function j(){try{const ee=await A_(n);t(ee),i(C(ee))}catch{c("Could not load paper.")}}j()},[n]),N.useEffect(()=>{if(!(e!=null&&e.pdf_blob)){m("");return}const j=URL.createObjectURL(e.pdf_blob);return m(j),()=>{URL.revokeObjectURL(j)}},[e==null?void 0:e.pdf_blob]),N.useEffect(()=>{if(!(e&&b&&e.pdf_blob&&(!e.pdf_text||!Array.isArray(e.references)||e.references.length===0)))return;let ee=!1;async function J(){try{const me=await TP(e.id);ee||(t(me),i(C(me)))}catch{}}return J(),()=>{ee=!0}},[e,b]);function k(j,ee){i(J=>({...J,[j]:ee})),h("")}function P(){if(!d){f(!0);return}f(!1),i(C(e))}async function M(j){var J;const ee=(J=j.target.files)==null?void 0:J[0];if(!(!ee||!e)){_("loading"),w("");try{const me=await CP(e.id,ee);t(me),i(C(me))}catch{w("Failed to attach PDF.")}finally{_("idle"),j.target.value=""}}}async function D(){if(e){_("loading"),w("");try{const j=await kP(e.id);t(j),i(C(j)),E(!1)}catch{w("Failed to remove PDF.")}finally{_("idle")}}}async function O(){if(!(!s||!e||!T)){a("saving"),c(""),h("");try{const j=await gc(e.id,{author:s.author.trim(),title:s.title.trim(),url:s.url.trim(),published_date:s.published_date.trim(),citation_count:s.citation_count===""?null:Number(s.citation_count),note:s.note.trim()});t(j),i(C(j)),h("Saved.")}catch{c("Could not save changes.")}finally{a("idle")}}}return o?y.jsxs("div",{className:"card detail-card",children:[y.jsx("p",{className:"error",children:o}),y.jsx(Oi,{to:"/",className:"ghost-link",children:"Back to dashboard"})]}):!e||!s?y.jsx("div",{className:"card detail-card",children:y.jsx("p",{className:"muted",children:"Loading paper"})}):y.jsxs("div",{className:"card detail-card",children:[y.jsxs("div",{className:"detail-header",children:[y.jsxs("div",{children:[y.jsx("p",{className:"app-kicker",children:"Paper Detail"}),y.jsx("h2",{children:(d?s.title:e.title)||"Untitled"})]}),y.jsxs("div",{className:"detail-header-actions",children:[y.jsx("button",{type:"button",className:"edit-toggle",onClick:P,children:d?"End edit":"Edit"}),y.jsx(Oi,{to:"/",className:"ghost-link",children:"Back to dashboard"})]})]}),y.jsxs("dl",{className:"detail-list",children:[y.jsxs("div",{children:[y.jsx("dt",{children:"Author"}),y.jsx("dd",{children:d?y.jsx("input",{className:"detail-input",value:s.author,onChange:j=>k("author",j.target.value),placeholder:"Unknown"}):y.jsx("span",{children:e.author||"Unknown"})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Published"}),y.jsx("dd",{children:d?y.jsx("input",{className:"detail-input",value:s.published_date,onChange:j=>k("published_date",j.target.value),placeholder:""}):y.jsx("span",{children:e.published_date||""})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Citations"}),y.jsx("dd",{children:d?y.jsx("input",{className:"detail-input",type:"number",min:"0",value:s.citation_count,onChange:j=>k("citation_count",j.target.value),placeholder:""}):y.jsx("span",{children:e.citation_count===null||e.citation_count===void 0?"":e.citation_count})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Link"}),y.jsx("dd",{children:d?y.jsx("input",{className:"detail-input",value:s.url,onChange:j=>k("url",j.target.value),placeholder:""}):e.url?y.jsx("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.url}):y.jsx("span",{children:""})})]}),y.jsxs("div",{children:[y.jsx("dt",{children:"Title"}),y.jsx("dd",{children:d?y.jsx("input",{className:"detail-input",value:s.title,onChange:j=>k("title",j.target.value),placeholder:"Untitled"}):y.jsx("span",{children:e.title||"Untitled"})})]})]}),d?y.jsxs("div",{className:"detail-actions",children:[y.jsx("button",{type:"button",onClick:O,disabled:!T||r==="saving",children:r==="saving"?"Saving":"Save changes"}),u?y.jsx("span",{className:"muted",children:u}):null,o?y.jsx("span",{className:"error",children:o}):null]}):null,y.jsxs("div",{className:"pdf-block",children:[y.jsx("h3",{children:"Paper PDF"}),y.jsxs("div",{className:"pdf-actions",children:[y.jsx("input",{type:"file",accept:"application/pdf",onChange:M}),p?y.jsx("a",{href:p,target:"_blank",rel:"noreferrer",children:"Open PDF"}):null,e.pdf_name?y.jsx("span",{className:"muted",children:e.pdf_name}):null,e.pdf_name?y.jsx("button",{type:"button",className:"ghost-link",onClick:D,disabled:A==="loading",children:"Remove"}):null]}),A==="loading"?y.jsx("p",{className:"muted",children:"Extracting text..."}):null,v?y.jsx("p",{className:"error",children:v}):null]}),y.jsxs("div",{className:"notes-block",children:[y.jsx("h3",{children:"Original Note"}),d?y.jsx("textarea",{className:"detail-input detail-textarea",value:s.note,onChange:j=>k("note",j.target.value),rows:6}):y.jsx("p",{className:"note-text",children:e.note||""}),y.jsxs("div",{className:"references-block",children:[y.jsx("button",{type:"button",className:"ghost-link",onClick:()=>E(j=>!j),children:b?"Hide references":"Display references"}),b?e.references&&e.references.length>0?y.jsx("div",{className:"references-list",children:e.references.join(`
`)}):y.jsx("p",{className:"muted",children:e.pdf_name?"No references found in this PDF.":"Please upload the paper."}):null]})]})]})}function IP({stickyNotes:n=[],onDeleteStickyNotes:e}){const[t,s]=N.useState(!1),[i,r]=N.useState([]),a=N.useMemo(()=>new Set(i),[i]);function o(u){r(h=>h.includes(u)?h.filter(d=>d!==u):[...h,u])}async function c(){!e||i.length===0||(await e(i),r([]),s(!1))}return y.jsxs("section",{className:"card sticky-notes-page",children:[y.jsxs("div",{className:"table-header",children:[y.jsx("h2",{children:"Sticky Notes"}),y.jsxs("div",{className:"sticky-notes-actions",children:[n.length>0?y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",className:"ghost-link",onClick:()=>{s(u=>!u),r([])},children:t?"Done selecting":"Select"}),y.jsx("button",{type:"button",className:"danger-button",disabled:!t||i.length===0,onClick:c,children:"Delete selected"})]}):null,y.jsx(Oi,{to:"/tool",className:"ghost-link",children:"Back to tool"})]})]}),y.jsx("p",{className:"muted",children:"All quick thoughts captured from the sticky note panel."}),n.length>0?y.jsx("div",{className:"sticky-notes-grid",children:n.map(u=>{const h=u.created_at?new Date(u.created_at):null,d=h&&!Number.isNaN(h.getTime())?`${h.toLocaleDateString()} ${h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"";return y.jsxs("article",{className:"sticky-note-card",children:[t?y.jsxs("label",{className:"sticky-note-select",children:[y.jsx("input",{type:"checkbox",checked:a.has(u.id),onChange:()=>o(u.id),"aria-label":`Select sticky note ${u.id}`}),y.jsx("span",{children:"Select"})]}):null,y.jsx("p",{children:u.text}),d?y.jsx("span",{className:"muted",children:d}):null]},u.id)})}):y.jsx("p",{className:"muted",children:"No sticky notes yet. Add one from the top-right icon."})]})}function DP(){const[n,e]=N.useState("idle"),[t,s]=N.useState("");async function i(){e("loading"),s("");try{const a=await fetch("http://localhost:11434/api/tags");if(!a.ok)throw new Error(`Ollama returned ${a.status}`);const o=await a.json(),c=Array.isArray(o==null?void 0:o.models)?o.models.length:0;e("success"),s(c>0?`${c} model(s)`:"No models")}catch{e("error"),s("Not reachable")}}function r(){const a=document.getElementById("ollama-info");a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return y.jsxs("div",{className:"ollama-widget",children:[y.jsxs("div",{className:"ollama-widget-header",children:[y.jsx("span",{children:"Ollama"}),y.jsx("button",{type:"button",className:"info-icon",onClick:r,"aria-label":"Learn about Ollama",children:"i"})]}),y.jsx("button",{type:"button",onClick:i,disabled:n==="loading",children:n==="loading"?"Checking":"Test"}),t?y.jsx("span",{className:n==="error"?"error":"muted",children:t}):null]})}function FP(){const[n,e]=N.useState(!1),[t,s]=N.useState(""),[i,r]=N.useState([]);N.useEffect(()=>{let c=!1;async function u(){try{const h=await NP();if(c)return;if(h.length>0){r(h);return}const d=localStorage.getItem("fyp-io-sticky-notes");if(d)try{const p=JSON.parse(d);if(Array.isArray(p)&&p.length>0){const m=[];for(const A of p)A&&A.text&&m.push(await Ig(String(A.text)));if(!c&&m.length>0){r(m);return}}}catch{}const f=await Ig("Capture quick thoughts while you read.");c||r([f])}catch{c||r([])}}return u(),()=>{c=!0}},[]);async function a(){const c=t.trim();if(c)try{const u=await Ig(c);r(h=>[u,...h]),s("")}catch{}}async function o(c){if(c.length)try{await RP(c),r(u=>u.filter(h=>!c.includes(h.id)))}catch{}}return y.jsxs("div",{className:"app-shell",children:[y.jsxs("header",{className:"app-header",children:[y.jsxs("div",{children:[y.jsx("a",{href:"https://clarabollengandolfo.github.io/",className:"profile-button",target:"_blank",rel:"noreferrer",children:"clara bollen gandolfo"}),y.jsx("h1",{className:"app-title",children:"Literature Desk"})]}),y.jsxs("div",{className:"app-header-actions",children:[y.jsx(DP,{}),y.jsxs("nav",{children:[y.jsx(Oi,{to:"/",className:"ghost-link",children:"Home"}),y.jsx(Oi,{to:"/tool",className:"ghost-link",children:"Tool"})]}),y.jsx("button",{type:"button",className:"sticky-button",onClick:()=>e(c=>!c),"aria-label":"Open sticky notes",children:y.jsxs("svg",{viewBox:"0 0 64 64","aria-hidden":"true",className:"sticky-icon",children:[y.jsx("path",{d:"M8 10h36l12 12v28H8V10z"}),y.jsx("path",{d:"M44 10v12h12"})]})}),y.jsx("a",{href:"https://www.overleaf.com/project/6967b6d7653766a341e88fa5",className:"report-button",target:"_blank",rel:"noreferrer",children:"Report"})]})]}),n?y.jsxs("div",{className:"sticky-panel",role:"dialog","aria-label":"Sticky notes",children:[y.jsxs("div",{className:"sticky-panel-header",children:[y.jsx("h2",{children:"Sticky notes"}),y.jsx("button",{type:"button",className:"ghost-link",onClick:()=>e(!1),children:"Close"})]}),y.jsx("textarea",{className:"sticky-textarea",value:t,onChange:c=>s(c.target.value),placeholder:"Jot a thought...",rows:4}),y.jsx("div",{className:"note-actions",children:y.jsx("button",{type:"button",onClick:a,children:"Add to notes"})})]}):null,y.jsx("main",{className:"app-main",children:y.jsxs(tk,{children:[y.jsx(Oc,{path:"/",element:y.jsx(dk,{})}),y.jsx(Oc,{path:"/tool",element:y.jsx(LP,{stickyNotes:i})}),y.jsx(Oc,{path:"/sticky-notes",element:y.jsx(IP,{stickyNotes:i,onDeleteStickyNotes:o})}),y.jsx(Oc,{path:"/paper/:id",element:y.jsx(MP,{})})]})})]})}lx(document.getElementById("root")).render(y.jsx(rA.StrictMode,{children:y.jsx(lk,{children:y.jsx(FP,{})})}));
